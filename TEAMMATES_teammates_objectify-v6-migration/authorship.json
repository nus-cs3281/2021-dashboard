[{"path":"src/client/java/teammates/client/scripts/DataMigrationEntitiesBaseScript.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.client.scripts;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import java.io.File;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import java.io.IOException;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import java.io.OutputStream;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import java.nio.file.Files;"},{"lineNumber":7,"author":{"gitId":"-"},"content":"import java.nio.file.Path;"},{"lineNumber":8,"author":{"gitId":"-"},"content":"import java.nio.file.Paths;"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import java.nio.file.StandardOpenOption;"},{"lineNumber":10,"author":{"gitId":"-"},"content":"import java.util.ArrayList;"},{"lineNumber":11,"author":{"gitId":"-"},"content":"import java.util.List;"},{"lineNumber":12,"author":{"gitId":"-"},"content":"import java.util.Optional;"},{"lineNumber":13,"author":{"gitId":"-"},"content":"import java.util.concurrent.atomic.AtomicLong;"},{"lineNumber":14,"author":{"gitId":"-"},"content":""},{"lineNumber":15,"author":{"gitId":"Derek-Hardy"},"content":"import com.google.cloud.datastore.Cursor;"},{"lineNumber":16,"author":{"gitId":"Derek-Hardy"},"content":"import com.google.cloud.datastore.QueryResults;"},{"lineNumber":17,"author":{"gitId":"-"},"content":"import com.googlecode.objectify.Key;"},{"lineNumber":18,"author":{"gitId":"-"},"content":"import com.googlecode.objectify.cmd.Query;"},{"lineNumber":19,"author":{"gitId":"-"},"content":""},{"lineNumber":20,"author":{"gitId":"-"},"content":"import teammates.client.remoteapi.RemoteApiClient;"},{"lineNumber":21,"author":{"gitId":"-"},"content":"import teammates.storage.entity.BaseEntity;"},{"lineNumber":22,"author":{"gitId":"-"},"content":"import teammates.test.FileHelper;"},{"lineNumber":23,"author":{"gitId":"-"},"content":""},{"lineNumber":24,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":25,"author":{"gitId":"-"},"content":" * Base script to be used as a template for all data migration scripts."},{"lineNumber":26,"author":{"gitId":"-"},"content":" *"},{"lineNumber":27,"author":{"gitId":"-"},"content":" * \u003cul\u003e"},{"lineNumber":28,"author":{"gitId":"-"},"content":" * \u003cli\u003eSupports full scan of entities without {@code OutOfMemoryError}.\u003c/li\u003e"},{"lineNumber":29,"author":{"gitId":"-"},"content":" * \u003cli\u003eSupports automatic continuation from the last failure point (Checkpoint feature).\u003c/li\u003e"},{"lineNumber":30,"author":{"gitId":"-"},"content":" * \u003cli\u003eSupports transaction between {@link #isMigrationNeeded(BaseEntity)} and {@link #migrateEntity(BaseEntity)}.\u003c/li\u003e"},{"lineNumber":31,"author":{"gitId":"-"},"content":" * \u003cli\u003eSupports batch saving if transaction is not used.\u003c/li\u003e"},{"lineNumber":32,"author":{"gitId":"-"},"content":" * \u003c/ul\u003e"},{"lineNumber":33,"author":{"gitId":"-"},"content":" *"},{"lineNumber":34,"author":{"gitId":"-"},"content":" * @param \u003cT\u003e The entity type to be migrated by the script."},{"lineNumber":35,"author":{"gitId":"-"},"content":" */"},{"lineNumber":36,"author":{"gitId":"-"},"content":"public abstract class DataMigrationEntitiesBaseScript\u003cT extends BaseEntity\u003e extends RemoteApiClient {"},{"lineNumber":37,"author":{"gitId":"-"},"content":""},{"lineNumber":38,"author":{"gitId":"-"},"content":"    // the folder where the cursor position and console output is saved as a file"},{"lineNumber":39,"author":{"gitId":"-"},"content":"    private static final String BASE_LOG_URI \u003d \"src/client/java/teammates/client/scripts/log/\";"},{"lineNumber":40,"author":{"gitId":"-"},"content":""},{"lineNumber":41,"author":{"gitId":"-"},"content":"    // 100 is the optimal batch size as there won\u0027t be too much time interval"},{"lineNumber":42,"author":{"gitId":"-"},"content":"    // between read and save (if transaction is not used)"},{"lineNumber":43,"author":{"gitId":"-"},"content":"    // cannot set number greater than 300"},{"lineNumber":44,"author":{"gitId":"-"},"content":"    // see https://stackoverflow.com/questions/41499505/objectify-queries-setting-limit-above-300-does-not-work"},{"lineNumber":45,"author":{"gitId":"-"},"content":"    private static final int BATCH_SIZE \u003d 100;"},{"lineNumber":46,"author":{"gitId":"-"},"content":""},{"lineNumber":47,"author":{"gitId":"-"},"content":"    /*"},{"lineNumber":48,"author":{"gitId":"-"},"content":"     * Creates the folder that will contain the stored log."},{"lineNumber":49,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":50,"author":{"gitId":"-"},"content":"    static {"},{"lineNumber":51,"author":{"gitId":"-"},"content":"        new File(BASE_LOG_URI).mkdir();"},{"lineNumber":52,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":53,"author":{"gitId":"-"},"content":""},{"lineNumber":54,"author":{"gitId":"-"},"content":"    protected AtomicLong numberOfScannedKey;"},{"lineNumber":55,"author":{"gitId":"-"},"content":"    protected AtomicLong numberOfAffectedEntities;"},{"lineNumber":56,"author":{"gitId":"-"},"content":"    protected AtomicLong numberOfUpdatedEntities;"},{"lineNumber":57,"author":{"gitId":"-"},"content":""},{"lineNumber":58,"author":{"gitId":"-"},"content":"    // buffer of entities to save"},{"lineNumber":59,"author":{"gitId":"-"},"content":"    private List\u003cT\u003e entitiesSavingBuffer;"},{"lineNumber":60,"author":{"gitId":"-"},"content":""},{"lineNumber":61,"author":{"gitId":"-"},"content":"    public DataMigrationEntitiesBaseScript() {"},{"lineNumber":62,"author":{"gitId":"-"},"content":"        numberOfScannedKey \u003d new AtomicLong();"},{"lineNumber":63,"author":{"gitId":"-"},"content":"        numberOfAffectedEntities \u003d new AtomicLong();"},{"lineNumber":64,"author":{"gitId":"-"},"content":"        numberOfUpdatedEntities \u003d new AtomicLong();"},{"lineNumber":65,"author":{"gitId":"-"},"content":""},{"lineNumber":66,"author":{"gitId":"-"},"content":"        entitiesSavingBuffer \u003d new ArrayList\u003c\u003e();"},{"lineNumber":67,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":68,"author":{"gitId":"-"},"content":""},{"lineNumber":69,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":70,"author":{"gitId":"-"},"content":"     * Gets the query for the entities that need data migration."},{"lineNumber":71,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":72,"author":{"gitId":"-"},"content":"    protected abstract Query\u003cT\u003e getFilterQuery();"},{"lineNumber":73,"author":{"gitId":"-"},"content":""},{"lineNumber":74,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":75,"author":{"gitId":"-"},"content":"     * If true, the script will not perform actual data migration."},{"lineNumber":76,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":77,"author":{"gitId":"-"},"content":"    protected abstract boolean isPreview();"},{"lineNumber":78,"author":{"gitId":"-"},"content":""},{"lineNumber":79,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":80,"author":{"gitId":"-"},"content":"     * Checks whether data migration is needed."},{"lineNumber":81,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":82,"author":{"gitId":"-"},"content":"     * \u003cp\u003eCausation: this method might be called in multiple threads if using transaction.\u003c/p\u003e"},{"lineNumber":83,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":84,"author":{"gitId":"-"},"content":"    protected abstract boolean isMigrationNeeded(T entity) throws Exception;"},{"lineNumber":85,"author":{"gitId":"-"},"content":""},{"lineNumber":86,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":87,"author":{"gitId":"-"},"content":"     * Migrates the entity."},{"lineNumber":88,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":89,"author":{"gitId":"-"},"content":"     * \u003cp\u003eCausation: this method might be called in multiple threads if using transaction.\u003c/p\u003e"},{"lineNumber":90,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":91,"author":{"gitId":"-"},"content":"    protected abstract void migrateEntity(T entity) throws Exception;"},{"lineNumber":92,"author":{"gitId":"-"},"content":""},{"lineNumber":93,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":94,"author":{"gitId":"-"},"content":"     * Determines whether the migration should be done in a transaction."},{"lineNumber":95,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":96,"author":{"gitId":"-"},"content":"     * \u003cp\u003eTransaction is useful for data consistency. However, there are some limitations on operations"},{"lineNumber":97,"author":{"gitId":"-"},"content":"     * inside a transaction. In addition, the performance of the script will also be affected."},{"lineNumber":98,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":99,"author":{"gitId":"-"},"content":"     * @see \u003ca href\u003d\"https://cloud.google.com/appengine/docs/standard/java/datastore/transactions#what_can_be_done_in_a_transaction\"\u003eWhat can be done in a transaction\u003c/a\u003e"},{"lineNumber":100,"author":{"gitId":"-"},"content":"     * @see \u003ca href\u003d\"https://cloud.google.com/appengine/docs/standard/java/tools/remoteapi#transaction-efficiency\"\u003eTransactions are less efficient\u003c/a\u003e"},{"lineNumber":101,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":102,"author":{"gitId":"-"},"content":"    protected boolean shouldUseTransaction() {"},{"lineNumber":103,"author":{"gitId":"-"},"content":"        return false;"},{"lineNumber":104,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":105,"author":{"gitId":"-"},"content":""},{"lineNumber":106,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":107,"author":{"gitId":"-"},"content":"     * Migrates the entity without transaction for better performance."},{"lineNumber":108,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":109,"author":{"gitId":"-"},"content":"    private void migrateWithoutTrx(T entity) {"},{"lineNumber":110,"author":{"gitId":"-"},"content":"        doMigration(entity);"},{"lineNumber":111,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":112,"author":{"gitId":"-"},"content":""},{"lineNumber":113,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":114,"author":{"gitId":"-"},"content":"     * Migrates the entity and counts the statistics."},{"lineNumber":115,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":116,"author":{"gitId":"-"},"content":"    private void doMigration(T entity) {"},{"lineNumber":117,"author":{"gitId":"-"},"content":"        try {"},{"lineNumber":118,"author":{"gitId":"-"},"content":"            if (!isMigrationNeeded(entity)) {"},{"lineNumber":119,"author":{"gitId":"-"},"content":"                return;"},{"lineNumber":120,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":121,"author":{"gitId":"-"},"content":"            numberOfAffectedEntities.incrementAndGet();"},{"lineNumber":122,"author":{"gitId":"-"},"content":"            if (!isPreview()) {"},{"lineNumber":123,"author":{"gitId":"-"},"content":"                migrateEntity(entity);"},{"lineNumber":124,"author":{"gitId":"-"},"content":"                numberOfUpdatedEntities.incrementAndGet();"},{"lineNumber":125,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":126,"author":{"gitId":"-"},"content":"        } catch (Exception e) {"},{"lineNumber":127,"author":{"gitId":"-"},"content":"            logError(\"Problem migrating entity \" + entity);"},{"lineNumber":128,"author":{"gitId":"-"},"content":"            logError(e.getMessage());"},{"lineNumber":129,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":130,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":131,"author":{"gitId":"-"},"content":""},{"lineNumber":132,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":133,"author":{"gitId":"-"},"content":"     * Migrates the entity in a transaction to ensure data consistency."},{"lineNumber":134,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":135,"author":{"gitId":"-"},"content":"    private void migrateWithTrx(Key\u003cT\u003e entityKey) {"},{"lineNumber":136,"author":{"gitId":"-"},"content":"        Runnable task \u003d () -\u003e {"},{"lineNumber":137,"author":{"gitId":"-"},"content":"            // the read place a \"lock\" on the object to migrate"},{"lineNumber":138,"author":{"gitId":"-"},"content":"            T entity \u003d ofy().load().key(entityKey).now();"},{"lineNumber":139,"author":{"gitId":"-"},"content":"            doMigration(entity);"},{"lineNumber":140,"author":{"gitId":"-"},"content":"        };"},{"lineNumber":141,"author":{"gitId":"-"},"content":"        if (isPreview()) {"},{"lineNumber":142,"author":{"gitId":"-"},"content":"            // even transaction is enabled, there is no need to use transaction in preview mode"},{"lineNumber":143,"author":{"gitId":"-"},"content":"            task.run();"},{"lineNumber":144,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":145,"author":{"gitId":"-"},"content":"            ofy().transact(task);"},{"lineNumber":146,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":147,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":148,"author":{"gitId":"-"},"content":""},{"lineNumber":149,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":150,"author":{"gitId":"-"},"content":"    @SuppressWarnings(\"unchecked\")"},{"lineNumber":151,"author":{"gitId":"-"},"content":"    protected void doOperation() {"},{"lineNumber":152,"author":{"gitId":"-"},"content":"        log(\"Running \" + getClass().getSimpleName() + \"...\");"},{"lineNumber":153,"author":{"gitId":"-"},"content":"        log(\"Preview: \" + isPreview());"},{"lineNumber":154,"author":{"gitId":"-"},"content":""},{"lineNumber":155,"author":{"gitId":"-"},"content":"        Cursor cursor \u003d readPositionOfCursorFromFile().orElse(null);"},{"lineNumber":156,"author":{"gitId":"-"},"content":"        if (cursor \u003d\u003d null) {"},{"lineNumber":157,"author":{"gitId":"-"},"content":"            log(\"Start from the beginning\");"},{"lineNumber":158,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":159,"author":{"gitId":"Derek-Hardy"},"content":"            log(\"Start from cursor position: \" + cursor.toUrlSafe());"},{"lineNumber":160,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":161,"author":{"gitId":"-"},"content":""},{"lineNumber":162,"author":{"gitId":"-"},"content":"        boolean shouldContinue \u003d true;"},{"lineNumber":163,"author":{"gitId":"-"},"content":"        while (shouldContinue) {"},{"lineNumber":164,"author":{"gitId":"-"},"content":"            shouldContinue \u003d false;"},{"lineNumber":165,"author":{"gitId":"-"},"content":"            Query\u003cT\u003e filterQueryKeys \u003d getFilterQuery().limit(BATCH_SIZE);"},{"lineNumber":166,"author":{"gitId":"-"},"content":"            if (cursor !\u003d null) {"},{"lineNumber":167,"author":{"gitId":"-"},"content":"                filterQueryKeys \u003d filterQueryKeys.startAt(cursor);"},{"lineNumber":168,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":169,"author":{"gitId":"Derek-Hardy"},"content":"            QueryResults\u003c?\u003e iterator;"},{"lineNumber":170,"author":{"gitId":"-"},"content":"            if (shouldUseTransaction()) {"},{"lineNumber":171,"author":{"gitId":"-"},"content":"                iterator \u003d filterQueryKeys.keys().iterator();"},{"lineNumber":172,"author":{"gitId":"-"},"content":"            } else {"},{"lineNumber":173,"author":{"gitId":"-"},"content":"                iterator \u003d filterQueryKeys.iterator();"},{"lineNumber":174,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":175,"author":{"gitId":"-"},"content":""},{"lineNumber":176,"author":{"gitId":"-"},"content":"            while (iterator.hasNext()) {"},{"lineNumber":177,"author":{"gitId":"-"},"content":"                shouldContinue \u003d true;"},{"lineNumber":178,"author":{"gitId":"-"},"content":""},{"lineNumber":179,"author":{"gitId":"-"},"content":"                // migrate"},{"lineNumber":180,"author":{"gitId":"-"},"content":"                if (shouldUseTransaction()) {"},{"lineNumber":181,"author":{"gitId":"-"},"content":"                    migrateWithTrx((Key\u003cT\u003e) iterator.next());"},{"lineNumber":182,"author":{"gitId":"-"},"content":"                } else {"},{"lineNumber":183,"author":{"gitId":"-"},"content":"                    migrateWithoutTrx((T) iterator.next());"},{"lineNumber":184,"author":{"gitId":"-"},"content":"                }"},{"lineNumber":185,"author":{"gitId":"-"},"content":""},{"lineNumber":186,"author":{"gitId":"-"},"content":"                numberOfScannedKey.incrementAndGet();"},{"lineNumber":187,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":188,"author":{"gitId":"-"},"content":""},{"lineNumber":189,"author":{"gitId":"-"},"content":"            if (shouldContinue) {"},{"lineNumber":190,"author":{"gitId":"Derek-Hardy"},"content":"                cursor \u003d iterator.getCursorAfter();"},{"lineNumber":191,"author":{"gitId":"-"},"content":"                flushEntitiesSavingBuffer();"},{"lineNumber":192,"author":{"gitId":"-"},"content":"                savePositionOfCursorToFile(cursor);"},{"lineNumber":193,"author":{"gitId":"Derek-Hardy"},"content":"                log(String.format(\"Cursor Position: %s\", cursor.toUrlSafe()));"},{"lineNumber":194,"author":{"gitId":"-"},"content":"                log(String.format(\"Number Of Entity Key Scanned: %d\", numberOfScannedKey.get()));"},{"lineNumber":195,"author":{"gitId":"-"},"content":"                log(String.format(\"Number Of Entity affected: %d\", numberOfAffectedEntities.get()));"},{"lineNumber":196,"author":{"gitId":"-"},"content":"                log(String.format(\"Number Of Entity updated: %d\", numberOfUpdatedEntities.get()));"},{"lineNumber":197,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":198,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":199,"author":{"gitId":"-"},"content":""},{"lineNumber":200,"author":{"gitId":"-"},"content":"        deleteCursorPositionFile();"},{"lineNumber":201,"author":{"gitId":"-"},"content":"        log(isPreview() ? \"Preview Completed!\" : \"Migration Completed!\");"},{"lineNumber":202,"author":{"gitId":"-"},"content":"        log(\"Total number of entities: \" + numberOfScannedKey.get());"},{"lineNumber":203,"author":{"gitId":"-"},"content":"        log(\"Number of affected entities: \" + numberOfAffectedEntities.get());"},{"lineNumber":204,"author":{"gitId":"-"},"content":"        log(\"Number of updated entities: \" + numberOfUpdatedEntities.get());"},{"lineNumber":205,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":206,"author":{"gitId":"-"},"content":""},{"lineNumber":207,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":208,"author":{"gitId":"-"},"content":"     * Stores the entity to save in a buffer and saves it later."},{"lineNumber":209,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":210,"author":{"gitId":"-"},"content":"    protected void saveEntityDeferred(T entity) {"},{"lineNumber":211,"author":{"gitId":"-"},"content":"        if (shouldUseTransaction()) {"},{"lineNumber":212,"author":{"gitId":"-"},"content":"            throw new RuntimeException(\"Batch saving is not supported for transaction!\");"},{"lineNumber":213,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":214,"author":{"gitId":"-"},"content":"        entitiesSavingBuffer.add(entity);"},{"lineNumber":215,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":216,"author":{"gitId":"-"},"content":""},{"lineNumber":217,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":218,"author":{"gitId":"-"},"content":"     * Flushes the saving buffer by issuing Datastore save request."},{"lineNumber":219,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":220,"author":{"gitId":"-"},"content":"    private void flushEntitiesSavingBuffer() {"},{"lineNumber":221,"author":{"gitId":"-"},"content":"        if (!entitiesSavingBuffer.isEmpty() \u0026\u0026 !isPreview()) {"},{"lineNumber":222,"author":{"gitId":"-"},"content":"            log(\"Saving entities in batch...\" + entitiesSavingBuffer.size());"},{"lineNumber":223,"author":{"gitId":"-"},"content":"            ofy().save().entities(entitiesSavingBuffer).now();"},{"lineNumber":224,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":225,"author":{"gitId":"-"},"content":"        entitiesSavingBuffer.clear();"},{"lineNumber":226,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":227,"author":{"gitId":"-"},"content":""},{"lineNumber":228,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":229,"author":{"gitId":"-"},"content":"     * Saves the cursor position to a file so it can be used in the next run."},{"lineNumber":230,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":231,"author":{"gitId":"-"},"content":"    private void savePositionOfCursorToFile(Cursor cursor) {"},{"lineNumber":232,"author":{"gitId":"-"},"content":"        try {"},{"lineNumber":233,"author":{"gitId":"-"},"content":"            FileHelper.saveFile("},{"lineNumber":234,"author":{"gitId":"Derek-Hardy"},"content":"                    BASE_LOG_URI + this.getClass().getSimpleName() + \".cursor\", cursor.toUrlSafe());"},{"lineNumber":235,"author":{"gitId":"-"},"content":"        } catch (IOException e) {"},{"lineNumber":236,"author":{"gitId":"-"},"content":"            logError(\"Fail to save cursor position \" + e.getMessage());"},{"lineNumber":237,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":238,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":239,"author":{"gitId":"-"},"content":""},{"lineNumber":240,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":241,"author":{"gitId":"-"},"content":"     * Reads the cursor position from the saved file."},{"lineNumber":242,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":243,"author":{"gitId":"-"},"content":"     * @return cursor if the file can be properly decoded."},{"lineNumber":244,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":245,"author":{"gitId":"-"},"content":"    private Optional\u003cCursor\u003e readPositionOfCursorFromFile() {"},{"lineNumber":246,"author":{"gitId":"-"},"content":"        try {"},{"lineNumber":247,"author":{"gitId":"-"},"content":"            String cursorPosition \u003d"},{"lineNumber":248,"author":{"gitId":"-"},"content":"                    FileHelper.readFile(BASE_LOG_URI + this.getClass().getSimpleName() + \".cursor\");"},{"lineNumber":249,"author":{"gitId":"Derek-Hardy"},"content":"            return Optional.of(Cursor.fromUrlSafe(cursorPosition));"},{"lineNumber":250,"author":{"gitId":"-"},"content":"        } catch (IOException | IllegalArgumentException e) {"},{"lineNumber":251,"author":{"gitId":"-"},"content":"            return Optional.empty();"},{"lineNumber":252,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":253,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":254,"author":{"gitId":"-"},"content":""},{"lineNumber":255,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":256,"author":{"gitId":"-"},"content":"     * Deletes the cursor position file."},{"lineNumber":257,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":258,"author":{"gitId":"-"},"content":"    private void deleteCursorPositionFile() {"},{"lineNumber":259,"author":{"gitId":"-"},"content":"        FileHelper.deleteFile(BASE_LOG_URI + this.getClass().getSimpleName() + \".cursor\");"},{"lineNumber":260,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":261,"author":{"gitId":"-"},"content":""},{"lineNumber":262,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":263,"author":{"gitId":"-"},"content":"     * Logs a line and persists it to the disk."},{"lineNumber":264,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":265,"author":{"gitId":"-"},"content":"    protected void log(String logLine) {"},{"lineNumber":266,"author":{"gitId":"-"},"content":"        System.out.println(logLine);"},{"lineNumber":267,"author":{"gitId":"-"},"content":""},{"lineNumber":268,"author":{"gitId":"-"},"content":"        Path logPath \u003d Paths.get(BASE_LOG_URI + this.getClass().getSimpleName() + \".log\");"},{"lineNumber":269,"author":{"gitId":"-"},"content":"        try (OutputStream logFile \u003d Files.newOutputStream(logPath,"},{"lineNumber":270,"author":{"gitId":"-"},"content":"                StandardOpenOption.CREATE, StandardOpenOption.WRITE, StandardOpenOption.APPEND)) {"},{"lineNumber":271,"author":{"gitId":"-"},"content":"            logFile.write((logLine + System.lineSeparator()).getBytes());"},{"lineNumber":272,"author":{"gitId":"-"},"content":"        } catch (Exception e) {"},{"lineNumber":273,"author":{"gitId":"-"},"content":"            System.err.println(\"Error writing log line: \" + logLine);"},{"lineNumber":274,"author":{"gitId":"-"},"content":"            System.err.println(e.getMessage());"},{"lineNumber":275,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":276,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":277,"author":{"gitId":"-"},"content":""},{"lineNumber":278,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":279,"author":{"gitId":"-"},"content":"     * Logs an error and persists it to the disk."},{"lineNumber":280,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":281,"author":{"gitId":"-"},"content":"    protected void logError(String logLine) {"},{"lineNumber":282,"author":{"gitId":"-"},"content":"        System.err.println(logLine);"},{"lineNumber":283,"author":{"gitId":"-"},"content":""},{"lineNumber":284,"author":{"gitId":"-"},"content":"        log(\"[ERROR]\" + logLine);"},{"lineNumber":285,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":286,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"Derek-Hardy":8,"-":278}},{"path":"src/client/java/teammates/client/scripts/statistics/CursorIterator.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.client.scripts.statistics;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import java.util.Iterator;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import java.util.LinkedList;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import java.util.Queue;"},{"lineNumber":6,"author":{"gitId":"-"},"content":""},{"lineNumber":7,"author":{"gitId":"Derek-Hardy"},"content":"import com.google.cloud.datastore.Cursor;"},{"lineNumber":8,"author":{"gitId":"Derek-Hardy"},"content":"import com.google.cloud.datastore.QueryResults;"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import com.googlecode.objectify.cmd.Query;"},{"lineNumber":10,"author":{"gitId":"-"},"content":""},{"lineNumber":11,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":12,"author":{"gitId":"-"},"content":" * An iterator that iterates all the matched entities for a Datastore query with batch fetching enabled."},{"lineNumber":13,"author":{"gitId":"-"},"content":" *"},{"lineNumber":14,"author":{"gitId":"-"},"content":" * @param \u003cT\u003e the type of entity to iterate"},{"lineNumber":15,"author":{"gitId":"-"},"content":" */"},{"lineNumber":16,"author":{"gitId":"-"},"content":"public class CursorIterator\u003cT\u003e implements Iterator\u003cT\u003e {"},{"lineNumber":17,"author":{"gitId":"-"},"content":""},{"lineNumber":18,"author":{"gitId":"-"},"content":"    // cannot set number greater than 300"},{"lineNumber":19,"author":{"gitId":"-"},"content":"    // see https://stackoverflow.com/questions/41499505/objectify-queries-setting-limit-above-300-does-not-work"},{"lineNumber":20,"author":{"gitId":"-"},"content":"    private static final int BUFFER_SIZE \u003d 300;"},{"lineNumber":21,"author":{"gitId":"-"},"content":""},{"lineNumber":22,"author":{"gitId":"-"},"content":"    private Cursor cursor;"},{"lineNumber":23,"author":{"gitId":"-"},"content":""},{"lineNumber":24,"author":{"gitId":"-"},"content":"    private Query\u003cT\u003e query;"},{"lineNumber":25,"author":{"gitId":"-"},"content":""},{"lineNumber":26,"author":{"gitId":"-"},"content":"    private Queue\u003cT\u003e buffer;"},{"lineNumber":27,"author":{"gitId":"-"},"content":""},{"lineNumber":28,"author":{"gitId":"-"},"content":"    CursorIterator(Query\u003cT\u003e query) {"},{"lineNumber":29,"author":{"gitId":"-"},"content":"        this.query \u003d query;"},{"lineNumber":30,"author":{"gitId":"-"},"content":"        this.buffer \u003d new LinkedList\u003c\u003e();"},{"lineNumber":31,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":32,"author":{"gitId":"-"},"content":""},{"lineNumber":33,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":34,"author":{"gitId":"-"},"content":"     * Returns an {@link Iterable} which iterates all the matched entities of the {@code query}."},{"lineNumber":35,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":36,"author":{"gitId":"-"},"content":"    public static \u003cT\u003e Iterable\u003cT\u003e iterate(Query\u003cT\u003e query) {"},{"lineNumber":37,"author":{"gitId":"-"},"content":"        return () -\u003e new CursorIterator\u003c\u003e(query);"},{"lineNumber":38,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":39,"author":{"gitId":"-"},"content":""},{"lineNumber":40,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":41,"author":{"gitId":"-"},"content":"     * Fetches entities in batches and puts them into the buffer."},{"lineNumber":42,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":43,"author":{"gitId":"-"},"content":"    private void batchFetching() {"},{"lineNumber":44,"author":{"gitId":"-"},"content":"        Query\u003cT\u003e newQuery \u003d this.query.limit(BUFFER_SIZE);"},{"lineNumber":45,"author":{"gitId":"-"},"content":"        if (this.cursor !\u003d null) {"},{"lineNumber":46,"author":{"gitId":"-"},"content":"            newQuery \u003d newQuery.startAt(this.cursor);"},{"lineNumber":47,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":48,"author":{"gitId":"Derek-Hardy"},"content":"        QueryResults\u003cT\u003e iterator \u003d newQuery.iterator();"},{"lineNumber":49,"author":{"gitId":"-"},"content":""},{"lineNumber":50,"author":{"gitId":"-"},"content":"        boolean shouldContinue \u003d false;"},{"lineNumber":51,"author":{"gitId":"-"},"content":"        while (iterator.hasNext()) {"},{"lineNumber":52,"author":{"gitId":"-"},"content":"            shouldContinue \u003d true;"},{"lineNumber":53,"author":{"gitId":"-"},"content":"            this.buffer.offer(iterator.next());"},{"lineNumber":54,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":55,"author":{"gitId":"-"},"content":""},{"lineNumber":56,"author":{"gitId":"-"},"content":"        if (shouldContinue) {"},{"lineNumber":57,"author":{"gitId":"Derek-Hardy"},"content":"            this.cursor \u003d iterator.getCursorAfter();"},{"lineNumber":58,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":59,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":60,"author":{"gitId":"-"},"content":""},{"lineNumber":61,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":62,"author":{"gitId":"-"},"content":"    public boolean hasNext() {"},{"lineNumber":63,"author":{"gitId":"-"},"content":"        if (this.buffer.isEmpty()) {"},{"lineNumber":64,"author":{"gitId":"-"},"content":"            batchFetching();"},{"lineNumber":65,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":66,"author":{"gitId":"-"},"content":"        return !this.buffer.isEmpty();"},{"lineNumber":67,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":68,"author":{"gitId":"-"},"content":""},{"lineNumber":69,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":70,"author":{"gitId":"-"},"content":"    public T next() {"},{"lineNumber":71,"author":{"gitId":"-"},"content":"        return buffer.poll();"},{"lineNumber":72,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":73,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"Derek-Hardy":4,"-":69}},{"path":"src/e2e/java/teammates/e2e/cases/BaseE2ETestCase.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.e2e.cases;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import java.io.IOException;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import java.nio.file.Files;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import java.nio.file.Paths;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import java.util.List;"},{"lineNumber":7,"author":{"gitId":"-"},"content":""},{"lineNumber":8,"author":{"gitId":"-"},"content":"import org.testng.ITestContext;"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import org.testng.annotations.AfterClass;"},{"lineNumber":10,"author":{"gitId":"-"},"content":"import org.testng.annotations.BeforeClass;"},{"lineNumber":11,"author":{"gitId":"-"},"content":"import org.testng.annotations.BeforeSuite;"},{"lineNumber":12,"author":{"gitId":"-"},"content":""},{"lineNumber":13,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.DataBundle;"},{"lineNumber":14,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.AccountAttributes;"},{"lineNumber":15,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.CourseAttributes;"},{"lineNumber":16,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.FeedbackQuestionAttributes;"},{"lineNumber":17,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.FeedbackResponseAttributes;"},{"lineNumber":18,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.FeedbackResponseCommentAttributes;"},{"lineNumber":19,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.FeedbackSessionAttributes;"},{"lineNumber":20,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.InstructorAttributes;"},{"lineNumber":21,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.StudentAttributes;"},{"lineNumber":22,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.StudentProfileAttributes;"},{"lineNumber":23,"author":{"gitId":"-"},"content":"import teammates.common.exception.HttpRequestFailedException;"},{"lineNumber":24,"author":{"gitId":"-"},"content":"import teammates.common.exception.TeammatesException;"},{"lineNumber":25,"author":{"gitId":"-"},"content":"import teammates.common.util.AppUrl;"},{"lineNumber":26,"author":{"gitId":"-"},"content":"import teammates.common.util.Const;"},{"lineNumber":27,"author":{"gitId":"-"},"content":"import teammates.common.util.ThreadHelper;"},{"lineNumber":28,"author":{"gitId":"-"},"content":"import teammates.common.util.retry.RetryManager;"},{"lineNumber":29,"author":{"gitId":"-"},"content":"import teammates.e2e.pageobjects.AdminHomePage;"},{"lineNumber":30,"author":{"gitId":"-"},"content":"import teammates.e2e.pageobjects.AppPage;"},{"lineNumber":31,"author":{"gitId":"-"},"content":"import teammates.e2e.pageobjects.Browser;"},{"lineNumber":32,"author":{"gitId":"-"},"content":"import teammates.e2e.pageobjects.DevServerLoginPage;"},{"lineNumber":33,"author":{"gitId":"-"},"content":"import teammates.e2e.pageobjects.HomePage;"},{"lineNumber":34,"author":{"gitId":"-"},"content":"import teammates.e2e.util.BackDoor;"},{"lineNumber":35,"author":{"gitId":"-"},"content":"import teammates.e2e.util.EmailAccount;"},{"lineNumber":36,"author":{"gitId":"-"},"content":"import teammates.e2e.util.TestProperties;"},{"lineNumber":37,"author":{"gitId":"-"},"content":"import teammates.test.BaseTestCaseWithDatastoreAccess;"},{"lineNumber":38,"author":{"gitId":"-"},"content":"import teammates.test.FileHelper;"},{"lineNumber":39,"author":{"gitId":"-"},"content":""},{"lineNumber":40,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":41,"author":{"gitId":"-"},"content":" * Base class for all browser tests."},{"lineNumber":42,"author":{"gitId":"-"},"content":" *"},{"lineNumber":43,"author":{"gitId":"-"},"content":" * \u003cp\u003eThis type of test has no knowledge of the workings of the application,"},{"lineNumber":44,"author":{"gitId":"-"},"content":" * and can only communicate via the UI or via {@link BackDoor} to obtain/transmit data."},{"lineNumber":45,"author":{"gitId":"-"},"content":" */"},{"lineNumber":46,"author":{"gitId":"-"},"content":"public abstract class BaseE2ETestCase extends BaseTestCaseWithDatastoreAccess {"},{"lineNumber":47,"author":{"gitId":"-"},"content":""},{"lineNumber":48,"author":{"gitId":"-"},"content":"    static final BackDoor BACKDOOR \u003d BackDoor.getInstance();"},{"lineNumber":49,"author":{"gitId":"-"},"content":"    private static Browser sharedBrowser;"},{"lineNumber":50,"author":{"gitId":"-"},"content":""},{"lineNumber":51,"author":{"gitId":"-"},"content":"    protected DataBundle testData;"},{"lineNumber":52,"author":{"gitId":"-"},"content":"    private Browser browser;"},{"lineNumber":53,"author":{"gitId":"-"},"content":""},{"lineNumber":54,"author":{"gitId":"-"},"content":"    @BeforeSuite"},{"lineNumber":55,"author":{"gitId":"-"},"content":"    protected void determineEnvironment(ITestContext context) {"},{"lineNumber":56,"author":{"gitId":"-"},"content":"        if (!TestProperties.isDevServer()) {"},{"lineNumber":57,"author":{"gitId":"-"},"content":"            // If testing against production server, run in single thread only"},{"lineNumber":58,"author":{"gitId":"-"},"content":"            context.getSuite().getXmlSuite().setThreadCount(1);"},{"lineNumber":59,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":60,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":61,"author":{"gitId":"-"},"content":""},{"lineNumber":62,"author":{"gitId":"-"},"content":"    @BeforeClass"},{"lineNumber":63,"author":{"gitId":"-"},"content":"    public void baseClassSetup() throws Exception {"},{"lineNumber":64,"author":{"gitId":"-"},"content":"        prepareTestData();"},{"lineNumber":65,"author":{"gitId":"-"},"content":"        prepareBrowser();"},{"lineNumber":66,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":67,"author":{"gitId":"-"},"content":""},{"lineNumber":68,"author":{"gitId":"-"},"content":"    protected void prepareBrowser() {"},{"lineNumber":69,"author":{"gitId":"-"},"content":"        if (TestProperties.isDevServer()) {"},{"lineNumber":70,"author":{"gitId":"-"},"content":"            browser \u003d new Browser();"},{"lineNumber":71,"author":{"gitId":"-"},"content":"        } else {"},{"lineNumber":72,"author":{"gitId":"-"},"content":"            // As the tests are run in single thread, in order to reduce the time wasted on browser setup/teardown,"},{"lineNumber":73,"author":{"gitId":"-"},"content":"            // use a single browser instance for all tests in the suite"},{"lineNumber":74,"author":{"gitId":"-"},"content":"            if (sharedBrowser \u003d\u003d null) {"},{"lineNumber":75,"author":{"gitId":"-"},"content":"                sharedBrowser \u003d new Browser();"},{"lineNumber":76,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":77,"author":{"gitId":"-"},"content":"            browser \u003d sharedBrowser;"},{"lineNumber":78,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":79,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":80,"author":{"gitId":"-"},"content":""},{"lineNumber":81,"author":{"gitId":"-"},"content":"    protected abstract void prepareTestData() throws Exception;"},{"lineNumber":82,"author":{"gitId":"-"},"content":""},{"lineNumber":83,"author":{"gitId":"-"},"content":"    protected abstract void testAll();"},{"lineNumber":84,"author":{"gitId":"-"},"content":""},{"lineNumber":85,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":86,"author":{"gitId":"-"},"content":"    protected String getTestDataFolder() {"},{"lineNumber":87,"author":{"gitId":"-"},"content":"        return TestProperties.TEST_DATA_FOLDER;"},{"lineNumber":88,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":89,"author":{"gitId":"-"},"content":""},{"lineNumber":90,"author":{"gitId":"-"},"content":"    protected String getTestDownloadsFolder() {"},{"lineNumber":91,"author":{"gitId":"-"},"content":"        return TestProperties.TEST_DOWNLOADS_FOLDER;"},{"lineNumber":92,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":93,"author":{"gitId":"-"},"content":""},{"lineNumber":94,"author":{"gitId":"-"},"content":"    @AfterClass"},{"lineNumber":95,"author":{"gitId":"-"},"content":"    public void baseClassTearDown(ITestContext context) {"},{"lineNumber":96,"author":{"gitId":"-"},"content":"        boolean isSuccess \u003d context.getFailedTests().getAllMethods()"},{"lineNumber":97,"author":{"gitId":"-"},"content":"                .stream()"},{"lineNumber":98,"author":{"gitId":"-"},"content":"                .noneMatch(method -\u003e method.getConstructorOrMethod().getMethod().getDeclaringClass() \u003d\u003d this.getClass());"},{"lineNumber":99,"author":{"gitId":"-"},"content":"        releaseBrowser(isSuccess);"},{"lineNumber":100,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":101,"author":{"gitId":"-"},"content":""},{"lineNumber":102,"author":{"gitId":"-"},"content":"    protected void releaseBrowser(boolean isSuccess) {"},{"lineNumber":103,"author":{"gitId":"-"},"content":"        if (browser \u003d\u003d null) {"},{"lineNumber":104,"author":{"gitId":"-"},"content":"            return;"},{"lineNumber":105,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":106,"author":{"gitId":"-"},"content":"        if (!TestProperties.isDevServer()) {"},{"lineNumber":107,"author":{"gitId":"-"},"content":"            return;"},{"lineNumber":108,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":109,"author":{"gitId":"-"},"content":"        if (isSuccess || TestProperties.CLOSE_BROWSER_ON_FAILURE) {"},{"lineNumber":110,"author":{"gitId":"-"},"content":"            browser.close();"},{"lineNumber":111,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":112,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":113,"author":{"gitId":"-"},"content":""},{"lineNumber":114,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":115,"author":{"gitId":"-"},"content":"     * Creates an {@link AppUrl} for the supplied {@code relativeUrl} parameter."},{"lineNumber":116,"author":{"gitId":"-"},"content":"     * The base URL will be the value of test.app.url in test.properties."},{"lineNumber":117,"author":{"gitId":"-"},"content":"     * {@code relativeUrl} must start with a \"/\"."},{"lineNumber":118,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":119,"author":{"gitId":"-"},"content":"    protected static AppUrl createUrl(String relativeUrl) {"},{"lineNumber":120,"author":{"gitId":"-"},"content":"        return new AppUrl(TestProperties.TEAMMATES_URL + relativeUrl);"},{"lineNumber":121,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":122,"author":{"gitId":"-"},"content":""},{"lineNumber":123,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":124,"author":{"gitId":"-"},"content":"     * Logs in a page using admin credentials (i.e. in masquerade mode)."},{"lineNumber":125,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":126,"author":{"gitId":"-"},"content":"    protected \u003cT extends AppPage\u003e T loginAdminToPage(AppUrl url, Class\u003cT\u003e typeOfPage) {"},{"lineNumber":127,"author":{"gitId":"-"},"content":"        // When not using dev server, Google blocks log in by automation."},{"lineNumber":128,"author":{"gitId":"-"},"content":"        // To log in, log in manually to teammates in your browser before running e2e tests."},{"lineNumber":129,"author":{"gitId":"-"},"content":"        // Refer to teammates.e2e.pageobjects.Browser for more information."},{"lineNumber":130,"author":{"gitId":"-"},"content":"        if (!TestProperties.isDevServer()) {"},{"lineNumber":131,"author":{"gitId":"-"},"content":"            // skip login and navigate to the desired page."},{"lineNumber":132,"author":{"gitId":"-"},"content":"            return getNewPageInstance(url, typeOfPage);"},{"lineNumber":133,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":134,"author":{"gitId":"-"},"content":""},{"lineNumber":135,"author":{"gitId":"-"},"content":"        if (browser.isAdminLoggedIn) {"},{"lineNumber":136,"author":{"gitId":"-"},"content":"            try {"},{"lineNumber":137,"author":{"gitId":"-"},"content":"                return getNewPageInstance(url, typeOfPage);"},{"lineNumber":138,"author":{"gitId":"-"},"content":"            } catch (Exception e) {"},{"lineNumber":139,"author":{"gitId":"-"},"content":"                //ignore and try to logout and login again if fail."},{"lineNumber":140,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":141,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":142,"author":{"gitId":"-"},"content":""},{"lineNumber":143,"author":{"gitId":"-"},"content":"        // logout and attempt to load the requested URL. This will be"},{"lineNumber":144,"author":{"gitId":"-"},"content":"        // redirected to a dev-server login page"},{"lineNumber":145,"author":{"gitId":"-"},"content":"        logout();"},{"lineNumber":146,"author":{"gitId":"-"},"content":"        browser.goToUrl(url.toAbsoluteString());"},{"lineNumber":147,"author":{"gitId":"-"},"content":""},{"lineNumber":148,"author":{"gitId":"-"},"content":"        // In dev server, any username is acceptable as admin"},{"lineNumber":149,"author":{"gitId":"-"},"content":"        String adminUsername \u003d \"devserver.admin.account\";"},{"lineNumber":150,"author":{"gitId":"-"},"content":""},{"lineNumber":151,"author":{"gitId":"-"},"content":"        DevServerLoginPage loginPage \u003d AppPage.getNewPageInstance(browser, DevServerLoginPage.class);"},{"lineNumber":152,"author":{"gitId":"-"},"content":"        loginPage.loginAsAdmin(adminUsername);"},{"lineNumber":153,"author":{"gitId":"-"},"content":""},{"lineNumber":154,"author":{"gitId":"-"},"content":"        return getNewPageInstance(url, typeOfPage);"},{"lineNumber":155,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":156,"author":{"gitId":"-"},"content":""},{"lineNumber":157,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":158,"author":{"gitId":"-"},"content":"     * Equivalent to clicking the \u0027logout\u0027 link in the top menu of the page."},{"lineNumber":159,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":160,"author":{"gitId":"-"},"content":"    protected void logout() {"},{"lineNumber":161,"author":{"gitId":"-"},"content":"        browser.goToUrl(createUrl(Const.WebPageURIs.LOGOUT).toAbsoluteString());"},{"lineNumber":162,"author":{"gitId":"-"},"content":"        AppPage.getNewPageInstance(browser, HomePage.class).waitForPageToLoad();"},{"lineNumber":163,"author":{"gitId":"-"},"content":"        browser.isAdminLoggedIn \u003d false;"},{"lineNumber":164,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":165,"author":{"gitId":"-"},"content":""},{"lineNumber":166,"author":{"gitId":"-"},"content":"    protected AdminHomePage loginAdmin() {"},{"lineNumber":167,"author":{"gitId":"-"},"content":"        return loginAdminToPage(createUrl(Const.WebPageURIs.ADMIN_HOME_PAGE), AdminHomePage.class);"},{"lineNumber":168,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":169,"author":{"gitId":"-"},"content":""},{"lineNumber":170,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":171,"author":{"gitId":"-"},"content":"     * Deletes file with fileName from the downloads folder."},{"lineNumber":172,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":173,"author":{"gitId":"-"},"content":"    protected void deleteDownloadsFile(String fileName) {"},{"lineNumber":174,"author":{"gitId":"-"},"content":"        String filePath \u003d getTestDownloadsFolder() + fileName;"},{"lineNumber":175,"author":{"gitId":"-"},"content":"        FileHelper.deleteFile(filePath);"},{"lineNumber":176,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":177,"author":{"gitId":"-"},"content":""},{"lineNumber":178,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":179,"author":{"gitId":"-"},"content":"     * Verifies downloaded file has correct fileName and contains expected content."},{"lineNumber":180,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":181,"author":{"gitId":"-"},"content":"    protected void verifyDownloadedFile(String expectedFileName, List\u003cString\u003e expectedContent) {"},{"lineNumber":182,"author":{"gitId":"-"},"content":"        String filePath \u003d getTestDownloadsFolder() + expectedFileName;"},{"lineNumber":183,"author":{"gitId":"-"},"content":"        int retryLimit \u003d 5;"},{"lineNumber":184,"author":{"gitId":"-"},"content":"        boolean actual \u003d Files.exists(Paths.get(filePath));"},{"lineNumber":185,"author":{"gitId":"-"},"content":"        while (!actual \u0026\u0026 retryLimit \u003e 0) {"},{"lineNumber":186,"author":{"gitId":"-"},"content":"            retryLimit--;"},{"lineNumber":187,"author":{"gitId":"-"},"content":"            ThreadHelper.waitFor(1000);"},{"lineNumber":188,"author":{"gitId":"-"},"content":"            actual \u003d Files.exists(Paths.get(filePath));"},{"lineNumber":189,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":190,"author":{"gitId":"-"},"content":"        assertTrue(actual);"},{"lineNumber":191,"author":{"gitId":"-"},"content":""},{"lineNumber":192,"author":{"gitId":"-"},"content":"        try {"},{"lineNumber":193,"author":{"gitId":"-"},"content":"            String actualContent \u003d FileHelper.readFile(filePath);"},{"lineNumber":194,"author":{"gitId":"-"},"content":"            for (String content : expectedContent) {"},{"lineNumber":195,"author":{"gitId":"-"},"content":"                assertTrue(actualContent.contains(content));"},{"lineNumber":196,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":197,"author":{"gitId":"-"},"content":"        } catch (IOException e) {"},{"lineNumber":198,"author":{"gitId":"-"},"content":"            throw new RuntimeException(e);"},{"lineNumber":199,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":200,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":201,"author":{"gitId":"-"},"content":""},{"lineNumber":202,"author":{"gitId":"-"},"content":"    protected \u003cT extends AppPage\u003e T getNewPageInstance(AppUrl url, Class\u003cT\u003e typeOfPage) {"},{"lineNumber":203,"author":{"gitId":"-"},"content":"        return AppPage.getNewPageInstance(browser, url, typeOfPage);"},{"lineNumber":204,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":205,"author":{"gitId":"-"},"content":""},{"lineNumber":206,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":207,"author":{"gitId":"-"},"content":"     * Verifies that email with subject is found in inbox."},{"lineNumber":208,"author":{"gitId":"-"},"content":"     * Email used must be an authentic gmail account."},{"lineNumber":209,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":210,"author":{"gitId":"-"},"content":"    protected void verifyEmailSent(String email, String subject) {"},{"lineNumber":211,"author":{"gitId":"-"},"content":"        if (TestProperties.isDevServer() || !TestProperties.INCLUDE_EMAIL_VERIFICATION) {"},{"lineNumber":212,"author":{"gitId":"-"},"content":"            return;"},{"lineNumber":213,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":214,"author":{"gitId":"-"},"content":"        if (!TestProperties.TEST_EMAIL.equals(email)) {"},{"lineNumber":215,"author":{"gitId":"-"},"content":"            fail(\"Email verification is allowed only on preset test email.\");"},{"lineNumber":216,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":217,"author":{"gitId":"-"},"content":"        EmailAccount emailAccount \u003d new EmailAccount(email);"},{"lineNumber":218,"author":{"gitId":"-"},"content":"        try {"},{"lineNumber":219,"author":{"gitId":"-"},"content":"            emailAccount.getUserAuthenticated();"},{"lineNumber":220,"author":{"gitId":"-"},"content":"            int retryLimit \u003d 5;"},{"lineNumber":221,"author":{"gitId":"-"},"content":"            boolean actual \u003d emailAccount.isRecentEmailWithSubjectPresent(subject, TestProperties.TEST_SENDER_EMAIL);"},{"lineNumber":222,"author":{"gitId":"-"},"content":"            while (!actual \u0026\u0026 retryLimit \u003e 0) {"},{"lineNumber":223,"author":{"gitId":"-"},"content":"                retryLimit--;"},{"lineNumber":224,"author":{"gitId":"-"},"content":"                ThreadHelper.waitFor(1000);"},{"lineNumber":225,"author":{"gitId":"-"},"content":"                actual \u003d emailAccount.isRecentEmailWithSubjectPresent(subject, TestProperties.TEST_SENDER_EMAIL);"},{"lineNumber":226,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":227,"author":{"gitId":"-"},"content":"            assertTrue(actual);"},{"lineNumber":228,"author":{"gitId":"-"},"content":"        } catch (Exception e) {"},{"lineNumber":229,"author":{"gitId":"-"},"content":"            fail(\"Failed to verify email sent:\" + e);"},{"lineNumber":230,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":231,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":232,"author":{"gitId":"-"},"content":""},{"lineNumber":233,"author":{"gitId":"Derek-Hardy"},"content":"    @Override"},{"lineNumber":234,"author":{"gitId":"Derek-Hardy"},"content":"    @SuppressWarnings(\"PMD.EmptyMethodInAbstractClassShouldBeAbstract\")"},{"lineNumber":235,"author":{"gitId":"Derek-Hardy"},"content":"    public void resetLocalDatastoreHelper() {"},{"lineNumber":236,"author":{"gitId":"Derek-Hardy"},"content":"        // Local datastore state should persist across e2e test suites"},{"lineNumber":237,"author":{"gitId":"Derek-Hardy"},"content":"    }"},{"lineNumber":238,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":239,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":240,"author":{"gitId":"-"},"content":"    @SuppressWarnings(\"PMD.EmptyMethodInAbstractClassShouldBeAbstract\")"},{"lineNumber":241,"author":{"gitId":"-"},"content":"    public void setupObjectify() {"},{"lineNumber":242,"author":{"gitId":"-"},"content":"        // Not necessary as BackDoor API is used instead"},{"lineNumber":243,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":244,"author":{"gitId":"-"},"content":""},{"lineNumber":245,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":246,"author":{"gitId":"-"},"content":"    @SuppressWarnings(\"PMD.EmptyMethodInAbstractClassShouldBeAbstract\")"},{"lineNumber":247,"author":{"gitId":"-"},"content":"    public void tearDownObjectify() {"},{"lineNumber":248,"author":{"gitId":"-"},"content":"        // Not necessary as BackDoor API is used instead"},{"lineNumber":249,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":250,"author":{"gitId":"-"},"content":""},{"lineNumber":251,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":252,"author":{"gitId":"-"},"content":"    @SuppressWarnings(\"PMD.EmptyMethodInAbstractClassShouldBeAbstract\")"},{"lineNumber":253,"author":{"gitId":"-"},"content":"    public void setUpGae() {"},{"lineNumber":254,"author":{"gitId":"-"},"content":"        // Not necessary as BackDoor API is used instead"},{"lineNumber":255,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":256,"author":{"gitId":"-"},"content":""},{"lineNumber":257,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":258,"author":{"gitId":"-"},"content":"    @SuppressWarnings(\"PMD.EmptyMethodInAbstractClassShouldBeAbstract\")"},{"lineNumber":259,"author":{"gitId":"-"},"content":"    public void tearDownGae() {"},{"lineNumber":260,"author":{"gitId":"-"},"content":"        // Not necessary as BackDoor API is used instead"},{"lineNumber":261,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":262,"author":{"gitId":"-"},"content":""},{"lineNumber":263,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":264,"author":{"gitId":"-"},"content":"    protected RetryManager getPersistenceRetryManager() {"},{"lineNumber":265,"author":{"gitId":"-"},"content":"        return new RetryManager(TestProperties.PERSISTENCE_RETRY_PERIOD_IN_S / 2);"},{"lineNumber":266,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":267,"author":{"gitId":"-"},"content":""},{"lineNumber":268,"author":{"gitId":"-"},"content":"    protected AccountAttributes getAccount(String googleId) {"},{"lineNumber":269,"author":{"gitId":"-"},"content":"        return BACKDOOR.getAccount(googleId);"},{"lineNumber":270,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":271,"author":{"gitId":"-"},"content":""},{"lineNumber":272,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":273,"author":{"gitId":"-"},"content":"    protected AccountAttributes getAccount(AccountAttributes account) {"},{"lineNumber":274,"author":{"gitId":"-"},"content":"        return getAccount(account.googleId);"},{"lineNumber":275,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":276,"author":{"gitId":"-"},"content":""},{"lineNumber":277,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":278,"author":{"gitId":"-"},"content":"    @SuppressWarnings(\"PMD.EmptyMethodInAbstractClassShouldBeAbstract\")"},{"lineNumber":279,"author":{"gitId":"-"},"content":"    protected StudentProfileAttributes getStudentProfile(StudentProfileAttributes studentProfileAttributes) {"},{"lineNumber":280,"author":{"gitId":"-"},"content":"        return null; // BACKDOOR.getStudentProfile(studentProfileAttributes.googleId);"},{"lineNumber":281,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":282,"author":{"gitId":"-"},"content":""},{"lineNumber":283,"author":{"gitId":"-"},"content":"    protected CourseAttributes getCourse(String courseId) {"},{"lineNumber":284,"author":{"gitId":"-"},"content":"        return BACKDOOR.getCourse(courseId);"},{"lineNumber":285,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":286,"author":{"gitId":"-"},"content":""},{"lineNumber":287,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":288,"author":{"gitId":"-"},"content":"    protected CourseAttributes getCourse(CourseAttributes course) {"},{"lineNumber":289,"author":{"gitId":"-"},"content":"        return getCourse(course.getId());"},{"lineNumber":290,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":291,"author":{"gitId":"-"},"content":""},{"lineNumber":292,"author":{"gitId":"-"},"content":"    protected CourseAttributes getArchivedCourse(String instructorId, String courseId) {"},{"lineNumber":293,"author":{"gitId":"-"},"content":"        return BACKDOOR.getArchivedCourse(instructorId, courseId);"},{"lineNumber":294,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":295,"author":{"gitId":"-"},"content":""},{"lineNumber":296,"author":{"gitId":"-"},"content":"    protected FeedbackQuestionAttributes getFeedbackQuestion(String courseId, String feedbackSessionName, int qnNumber) {"},{"lineNumber":297,"author":{"gitId":"-"},"content":"        return BACKDOOR.getFeedbackQuestion(courseId, feedbackSessionName, qnNumber);"},{"lineNumber":298,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":299,"author":{"gitId":"-"},"content":""},{"lineNumber":300,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":301,"author":{"gitId":"-"},"content":"    protected FeedbackQuestionAttributes getFeedbackQuestion(FeedbackQuestionAttributes fq) {"},{"lineNumber":302,"author":{"gitId":"-"},"content":"        return getFeedbackQuestion(fq.courseId, fq.feedbackSessionName, fq.questionNumber);"},{"lineNumber":303,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":304,"author":{"gitId":"-"},"content":""},{"lineNumber":305,"author":{"gitId":"-"},"content":"    protected FeedbackResponseCommentAttributes getFeedbackResponseComment(String feedbackResponseId) {"},{"lineNumber":306,"author":{"gitId":"-"},"content":"        return BACKDOOR.getFeedbackResponseComment(feedbackResponseId);"},{"lineNumber":307,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":308,"author":{"gitId":"-"},"content":""},{"lineNumber":309,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":310,"author":{"gitId":"-"},"content":"    protected FeedbackResponseCommentAttributes getFeedbackResponseComment(FeedbackResponseCommentAttributes frc) {"},{"lineNumber":311,"author":{"gitId":"-"},"content":"        return getFeedbackResponseComment(frc.feedbackResponseId);"},{"lineNumber":312,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":313,"author":{"gitId":"-"},"content":""},{"lineNumber":314,"author":{"gitId":"-"},"content":"    protected FeedbackResponseAttributes getFeedbackResponse(String feedbackQuestionId, String giver, String recipient) {"},{"lineNumber":315,"author":{"gitId":"-"},"content":"        return BACKDOOR.getFeedbackResponse(feedbackQuestionId, giver, recipient);"},{"lineNumber":316,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":317,"author":{"gitId":"-"},"content":""},{"lineNumber":318,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":319,"author":{"gitId":"-"},"content":"    protected FeedbackResponseAttributes getFeedbackResponse(FeedbackResponseAttributes fr) {"},{"lineNumber":320,"author":{"gitId":"-"},"content":"        return getFeedbackResponse(fr.feedbackQuestionId, fr.giver, fr.recipient);"},{"lineNumber":321,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":322,"author":{"gitId":"-"},"content":""},{"lineNumber":323,"author":{"gitId":"-"},"content":"    protected FeedbackSessionAttributes getFeedbackSession(String courseId, String feedbackSessionName) {"},{"lineNumber":324,"author":{"gitId":"-"},"content":"        return BACKDOOR.getFeedbackSession(courseId, feedbackSessionName);"},{"lineNumber":325,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":326,"author":{"gitId":"-"},"content":""},{"lineNumber":327,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":328,"author":{"gitId":"-"},"content":"    protected FeedbackSessionAttributes getFeedbackSession(FeedbackSessionAttributes fs) {"},{"lineNumber":329,"author":{"gitId":"-"},"content":"        return getFeedbackSession(fs.getCourseId(), fs.getFeedbackSessionName());"},{"lineNumber":330,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":331,"author":{"gitId":"-"},"content":""},{"lineNumber":332,"author":{"gitId":"-"},"content":"    protected FeedbackSessionAttributes getSoftDeletedSession(String feedbackSessionName, String instructorId) {"},{"lineNumber":333,"author":{"gitId":"-"},"content":"        return BACKDOOR.getSoftDeletedSession(feedbackSessionName, instructorId);"},{"lineNumber":334,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":335,"author":{"gitId":"-"},"content":""},{"lineNumber":336,"author":{"gitId":"-"},"content":"    protected InstructorAttributes getInstructor(String courseId, String instructorEmail) {"},{"lineNumber":337,"author":{"gitId":"-"},"content":"        return BACKDOOR.getInstructor(courseId, instructorEmail);"},{"lineNumber":338,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":339,"author":{"gitId":"-"},"content":""},{"lineNumber":340,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":341,"author":{"gitId":"-"},"content":"    protected InstructorAttributes getInstructor(InstructorAttributes instructor) {"},{"lineNumber":342,"author":{"gitId":"-"},"content":"        return getInstructor(instructor.courseId, instructor.email);"},{"lineNumber":343,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":344,"author":{"gitId":"-"},"content":""},{"lineNumber":345,"author":{"gitId":"-"},"content":"    protected String getKeyForInstructor(String courseId, String instructorEmail) {"},{"lineNumber":346,"author":{"gitId":"-"},"content":"        return getInstructor(courseId, instructorEmail).getKey();"},{"lineNumber":347,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":348,"author":{"gitId":"-"},"content":""},{"lineNumber":349,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":350,"author":{"gitId":"-"},"content":"    protected StudentAttributes getStudent(StudentAttributes student) {"},{"lineNumber":351,"author":{"gitId":"-"},"content":"        return BACKDOOR.getStudent(student.course, student.email);"},{"lineNumber":352,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":353,"author":{"gitId":"-"},"content":""},{"lineNumber":354,"author":{"gitId":"-"},"content":"    protected String getKeyForStudent(StudentAttributes student) {"},{"lineNumber":355,"author":{"gitId":"-"},"content":"        return getStudent(student).getKey();"},{"lineNumber":356,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":357,"author":{"gitId":"-"},"content":""},{"lineNumber":358,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":359,"author":{"gitId":"-"},"content":"    protected boolean doRemoveAndRestoreDataBundle(DataBundle testData) {"},{"lineNumber":360,"author":{"gitId":"-"},"content":"        try {"},{"lineNumber":361,"author":{"gitId":"-"},"content":"            BACKDOOR.removeAndRestoreDataBundle(testData);"},{"lineNumber":362,"author":{"gitId":"-"},"content":"            return true;"},{"lineNumber":363,"author":{"gitId":"-"},"content":"        } catch (HttpRequestFailedException e) {"},{"lineNumber":364,"author":{"gitId":"-"},"content":"            print(TeammatesException.toStringWithStackTrace(e));"},{"lineNumber":365,"author":{"gitId":"-"},"content":"            return false;"},{"lineNumber":366,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":367,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":368,"author":{"gitId":"-"},"content":""},{"lineNumber":369,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":370,"author":{"gitId":"-"},"content":"    protected boolean doPutDocuments(DataBundle testData) {"},{"lineNumber":371,"author":{"gitId":"-"},"content":"        try {"},{"lineNumber":372,"author":{"gitId":"-"},"content":"            BACKDOOR.putDocuments(testData);"},{"lineNumber":373,"author":{"gitId":"-"},"content":"            return true;"},{"lineNumber":374,"author":{"gitId":"-"},"content":"        } catch (HttpRequestFailedException e) {"},{"lineNumber":375,"author":{"gitId":"-"},"content":"            print(TeammatesException.toStringWithStackTrace(e));"},{"lineNumber":376,"author":{"gitId":"-"},"content":"            return false;"},{"lineNumber":377,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":378,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":379,"author":{"gitId":"-"},"content":""},{"lineNumber":380,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"Derek-Hardy":6,"-":374}},{"path":"src/main/java/teammates/common/util/Config.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.common.util;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import java.io.IOException;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import java.io.InputStream;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import java.util.Properties;"},{"lineNumber":6,"author":{"gitId":"-"},"content":""},{"lineNumber":7,"author":{"gitId":"-"},"content":"import com.google.appengine.api.utils.SystemProperty;"},{"lineNumber":8,"author":{"gitId":"-"},"content":"import com.google.apphosting.api.ApiProxy;"},{"lineNumber":9,"author":{"gitId":"-"},"content":""},{"lineNumber":10,"author":{"gitId":"-"},"content":"import teammates.common.exception.TeammatesException;"},{"lineNumber":11,"author":{"gitId":"-"},"content":""},{"lineNumber":12,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":13,"author":{"gitId":"-"},"content":" * Represents the deployment-specific configuration values of the system."},{"lineNumber":14,"author":{"gitId":"-"},"content":" * This can be used to access values in the build.properties file too."},{"lineNumber":15,"author":{"gitId":"-"},"content":" */"},{"lineNumber":16,"author":{"gitId":"-"},"content":"public final class Config {"},{"lineNumber":17,"author":{"gitId":"-"},"content":""},{"lineNumber":18,"author":{"gitId":"-"},"content":"    /** The value of the \"app.id\" in build.properties file. */"},{"lineNumber":19,"author":{"gitId":"-"},"content":"    public static final String APP_ID;"},{"lineNumber":20,"author":{"gitId":"-"},"content":""},{"lineNumber":21,"author":{"gitId":"-"},"content":"    /** The value of the \"app.region\" in build.properties file. */"},{"lineNumber":22,"author":{"gitId":"-"},"content":"    public static final String APP_REGION;"},{"lineNumber":23,"author":{"gitId":"-"},"content":""},{"lineNumber":24,"author":{"gitId":"-"},"content":"    /** The value of the \"app.version\" in build.properties file. */"},{"lineNumber":25,"author":{"gitId":"-"},"content":"    public static final String APP_VERSION;"},{"lineNumber":26,"author":{"gitId":"-"},"content":""},{"lineNumber":27,"author":{"gitId":"-"},"content":"    /** The value of the \"app.frontenddev.url\" in build.properties file. */"},{"lineNumber":28,"author":{"gitId":"-"},"content":"    public static final String APP_FRONTENDDEV_URL;"},{"lineNumber":29,"author":{"gitId":"-"},"content":""},{"lineNumber":30,"author":{"gitId":"Derek-Hardy"},"content":"    /** The value of the \"app.localdatastore.port\" in build.properties file. */"},{"lineNumber":31,"author":{"gitId":"Derek-Hardy"},"content":"    public static final String APP_LOCALDATASTORE_PORT;"},{"lineNumber":32,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":33,"author":{"gitId":"-"},"content":"    /** The value of the \"app.taskqueue.active\" in build.properties file. */"},{"lineNumber":34,"author":{"gitId":"-"},"content":"    public static final boolean TASKQUEUE_ACTIVE;"},{"lineNumber":35,"author":{"gitId":"-"},"content":""},{"lineNumber":36,"author":{"gitId":"-"},"content":"    /** The value of the \"app.production.gcs.bucketname\" in build.properties file. */"},{"lineNumber":37,"author":{"gitId":"-"},"content":"    public static final String PRODUCTION_GCS_BUCKETNAME;"},{"lineNumber":38,"author":{"gitId":"-"},"content":""},{"lineNumber":39,"author":{"gitId":"-"},"content":"    /** The value of the \"app.backup.gcs.bucketname\" in build.properties file. */"},{"lineNumber":40,"author":{"gitId":"-"},"content":"    public static final String BACKUP_GCS_BUCKETNAME;"},{"lineNumber":41,"author":{"gitId":"-"},"content":""},{"lineNumber":42,"author":{"gitId":"-"},"content":"    /** The value of the \"app.csrf.key\" in build.properties file. */"},{"lineNumber":43,"author":{"gitId":"-"},"content":"    public static final String CSRF_KEY;"},{"lineNumber":44,"author":{"gitId":"-"},"content":""},{"lineNumber":45,"author":{"gitId":"-"},"content":"    /** The value of the \"app.backdoor.key\" in build.properties file. */"},{"lineNumber":46,"author":{"gitId":"-"},"content":"    public static final String BACKDOOR_KEY;"},{"lineNumber":47,"author":{"gitId":"-"},"content":""},{"lineNumber":48,"author":{"gitId":"-"},"content":"    /** The value of the \"app.encryption.key\" in build.properties file. */"},{"lineNumber":49,"author":{"gitId":"-"},"content":"    public static final String ENCRYPTION_KEY;"},{"lineNumber":50,"author":{"gitId":"-"},"content":""},{"lineNumber":51,"author":{"gitId":"-"},"content":"    /** The value of the \"app.captcha.secretkey\" in build.properties file. */"},{"lineNumber":52,"author":{"gitId":"-"},"content":"    public static final String CAPTCHA_SECRET_KEY;"},{"lineNumber":53,"author":{"gitId":"-"},"content":""},{"lineNumber":54,"author":{"gitId":"-"},"content":"    /** The value of the \"app.crashreport.email\" in build.properties file. */"},{"lineNumber":55,"author":{"gitId":"-"},"content":"    public static final String SUPPORT_EMAIL;"},{"lineNumber":56,"author":{"gitId":"-"},"content":""},{"lineNumber":57,"author":{"gitId":"-"},"content":"    /** The value of the \"app.email.senderemail\" in build.properties file. */"},{"lineNumber":58,"author":{"gitId":"-"},"content":"    public static final String EMAIL_SENDEREMAIL;"},{"lineNumber":59,"author":{"gitId":"-"},"content":""},{"lineNumber":60,"author":{"gitId":"-"},"content":"    /** The value of the \"app.email.sendername\" in build.properties file. */"},{"lineNumber":61,"author":{"gitId":"-"},"content":"    public static final String EMAIL_SENDERNAME;"},{"lineNumber":62,"author":{"gitId":"-"},"content":""},{"lineNumber":63,"author":{"gitId":"-"},"content":"    /** The value of the \"app.email.replyto\" in build.properties file. */"},{"lineNumber":64,"author":{"gitId":"-"},"content":"    public static final String EMAIL_REPLYTO;"},{"lineNumber":65,"author":{"gitId":"-"},"content":""},{"lineNumber":66,"author":{"gitId":"-"},"content":"    /** The value of the \"app.email.service\" in build.properties file. */"},{"lineNumber":67,"author":{"gitId":"-"},"content":"    public static final String EMAIL_SERVICE;"},{"lineNumber":68,"author":{"gitId":"-"},"content":""},{"lineNumber":69,"author":{"gitId":"-"},"content":"    /** The value of the \"app.sendgrid.apikey\" in build.properties file. */"},{"lineNumber":70,"author":{"gitId":"-"},"content":"    public static final String SENDGRID_APIKEY;"},{"lineNumber":71,"author":{"gitId":"-"},"content":""},{"lineNumber":72,"author":{"gitId":"-"},"content":"    /** The value of the \"app.mailgun.apikey\" in build.properties file. */"},{"lineNumber":73,"author":{"gitId":"-"},"content":"    public static final String MAILGUN_APIKEY;"},{"lineNumber":74,"author":{"gitId":"-"},"content":""},{"lineNumber":75,"author":{"gitId":"-"},"content":"    /** The value of the \"app.mailgun.domainname\" in build.properties file. */"},{"lineNumber":76,"author":{"gitId":"-"},"content":"    public static final String MAILGUN_DOMAINNAME;"},{"lineNumber":77,"author":{"gitId":"-"},"content":""},{"lineNumber":78,"author":{"gitId":"-"},"content":"    /** The value of the \"app.mailjet.apikey\" in build.properties file. */"},{"lineNumber":79,"author":{"gitId":"-"},"content":"    public static final String MAILJET_APIKEY;"},{"lineNumber":80,"author":{"gitId":"-"},"content":""},{"lineNumber":81,"author":{"gitId":"-"},"content":"    /** The value of the \"app.mailjet.secretkey\" in build.properties file. */"},{"lineNumber":82,"author":{"gitId":"-"},"content":"    public static final String MAILJET_SECRETKEY;"},{"lineNumber":83,"author":{"gitId":"-"},"content":""},{"lineNumber":84,"author":{"gitId":"-"},"content":"    /** The value of the \"app.enable.datastore.backup\" in build.properties file. */"},{"lineNumber":85,"author":{"gitId":"-"},"content":"    public static final boolean ENABLE_DATASTORE_BACKUP;"},{"lineNumber":86,"author":{"gitId":"-"},"content":""},{"lineNumber":87,"author":{"gitId":"-"},"content":"    /** The value of the \"app.maintenance\" in build.properties file. */"},{"lineNumber":88,"author":{"gitId":"-"},"content":"    public static final boolean MAINTENANCE;"},{"lineNumber":89,"author":{"gitId":"-"},"content":""},{"lineNumber":90,"author":{"gitId":"-"},"content":"    static {"},{"lineNumber":91,"author":{"gitId":"-"},"content":"        Properties properties \u003d new Properties();"},{"lineNumber":92,"author":{"gitId":"-"},"content":"        try (InputStream buildPropStream \u003d FileHelper.getResourceAsStream(\"build.properties\")) {"},{"lineNumber":93,"author":{"gitId":"-"},"content":"            properties.load(buildPropStream);"},{"lineNumber":94,"author":{"gitId":"-"},"content":"        } catch (IOException e) {"},{"lineNumber":95,"author":{"gitId":"-"},"content":"            Assumption.fail(TeammatesException.toStringWithStackTrace(e));"},{"lineNumber":96,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":97,"author":{"gitId":"-"},"content":"        APP_ID \u003d properties.getProperty(\"app.id\");"},{"lineNumber":98,"author":{"gitId":"-"},"content":"        APP_REGION \u003d properties.getProperty(\"app.region\");"},{"lineNumber":99,"author":{"gitId":"-"},"content":"        APP_VERSION \u003d properties.getProperty(\"app.version\").replace(\"-\", \".\");"},{"lineNumber":100,"author":{"gitId":"-"},"content":"        APP_FRONTENDDEV_URL \u003d properties.getProperty(\"app.frontenddev.url\");"},{"lineNumber":101,"author":{"gitId":"Derek-Hardy"},"content":"        APP_LOCALDATASTORE_PORT \u003d properties.getProperty(\"app.localdatastore.port\");"},{"lineNumber":102,"author":{"gitId":"-"},"content":"        TASKQUEUE_ACTIVE \u003d Boolean.parseBoolean(properties.getProperty(\"app.taskqueue.active\", \"true\"));"},{"lineNumber":103,"author":{"gitId":"-"},"content":"        CSRF_KEY \u003d properties.getProperty(\"app.csrf.key\");"},{"lineNumber":104,"author":{"gitId":"-"},"content":"        BACKDOOR_KEY \u003d properties.getProperty(\"app.backdoor.key\");"},{"lineNumber":105,"author":{"gitId":"-"},"content":"        PRODUCTION_GCS_BUCKETNAME \u003d properties.getProperty(\"app.production.gcs.bucketname\");"},{"lineNumber":106,"author":{"gitId":"-"},"content":"        BACKUP_GCS_BUCKETNAME \u003d properties.getProperty(\"app.backup.gcs.bucketname\");"},{"lineNumber":107,"author":{"gitId":"-"},"content":"        ENCRYPTION_KEY \u003d properties.getProperty(\"app.encryption.key\");"},{"lineNumber":108,"author":{"gitId":"-"},"content":"        CAPTCHA_SECRET_KEY \u003d properties.getProperty(\"app.captcha.secretkey\");"},{"lineNumber":109,"author":{"gitId":"-"},"content":"        SUPPORT_EMAIL \u003d properties.getProperty(\"app.crashreport.email\");"},{"lineNumber":110,"author":{"gitId":"-"},"content":"        EMAIL_SENDEREMAIL \u003d properties.getProperty(\"app.email.senderemail\");"},{"lineNumber":111,"author":{"gitId":"-"},"content":"        EMAIL_SENDERNAME \u003d properties.getProperty(\"app.email.sendername\");"},{"lineNumber":112,"author":{"gitId":"-"},"content":"        EMAIL_REPLYTO \u003d properties.getProperty(\"app.email.replyto\");"},{"lineNumber":113,"author":{"gitId":"-"},"content":"        EMAIL_SERVICE \u003d properties.getProperty(\"app.email.service\");"},{"lineNumber":114,"author":{"gitId":"-"},"content":"        SENDGRID_APIKEY \u003d properties.getProperty(\"app.sendgrid.apikey\");"},{"lineNumber":115,"author":{"gitId":"-"},"content":"        MAILGUN_APIKEY \u003d properties.getProperty(\"app.mailgun.apikey\");"},{"lineNumber":116,"author":{"gitId":"-"},"content":"        MAILGUN_DOMAINNAME \u003d properties.getProperty(\"app.mailgun.domainname\");"},{"lineNumber":117,"author":{"gitId":"-"},"content":"        MAILJET_APIKEY \u003d properties.getProperty(\"app.mailjet.apikey\");"},{"lineNumber":118,"author":{"gitId":"-"},"content":"        MAILJET_SECRETKEY \u003d properties.getProperty(\"app.mailjet.secretkey\");"},{"lineNumber":119,"author":{"gitId":"-"},"content":"        ENABLE_DATASTORE_BACKUP \u003d Boolean.parseBoolean(properties.getProperty(\"app.enable.datastore.backup\", \"false\"));"},{"lineNumber":120,"author":{"gitId":"-"},"content":"        MAINTENANCE \u003d Boolean.parseBoolean(properties.getProperty(\"app.maintenance\", \"false\"));"},{"lineNumber":121,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":122,"author":{"gitId":"-"},"content":""},{"lineNumber":123,"author":{"gitId":"-"},"content":"    private Config() {"},{"lineNumber":124,"author":{"gitId":"-"},"content":"        // access static fields directly"},{"lineNumber":125,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":126,"author":{"gitId":"-"},"content":""},{"lineNumber":127,"author":{"gitId":"-"},"content":"    static String getBaseAppUrl() {"},{"lineNumber":128,"author":{"gitId":"-"},"content":"        ApiProxy.Environment serverEnvironment \u003d ApiProxy.getCurrentEnvironment();"},{"lineNumber":129,"author":{"gitId":"-"},"content":"        if (serverEnvironment \u003d\u003d null) {"},{"lineNumber":130,"author":{"gitId":"-"},"content":"            return null;"},{"lineNumber":131,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":132,"author":{"gitId":"-"},"content":"        String hostname \u003d (String) serverEnvironment.getAttributes()"},{"lineNumber":133,"author":{"gitId":"-"},"content":"                .get(\"com.google.appengine.runtime.default_version_hostname\");"},{"lineNumber":134,"author":{"gitId":"-"},"content":"        if (hostname \u003d\u003d null) {"},{"lineNumber":135,"author":{"gitId":"-"},"content":"            return null;"},{"lineNumber":136,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":137,"author":{"gitId":"-"},"content":"        return (isDevServer() ? \"http://\" : \"https://\") + hostname;"},{"lineNumber":138,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":139,"author":{"gitId":"-"},"content":""},{"lineNumber":140,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":141,"author":{"gitId":"-"},"content":"     * Returns true if the server is configured to be the dev server."},{"lineNumber":142,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":143,"author":{"gitId":"-"},"content":"    public static boolean isDevServer() {"},{"lineNumber":144,"author":{"gitId":"-"},"content":"        return SystemProperty.environment.value() !\u003d SystemProperty.Environment.Value.Production;"},{"lineNumber":145,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":146,"author":{"gitId":"-"},"content":""},{"lineNumber":147,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":148,"author":{"gitId":"-"},"content":"     * Returns the GAE\u0027s internal request ID of a request. This is not related to HttpServletRequest."},{"lineNumber":149,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":150,"author":{"gitId":"-"},"content":"     * @see \u003ca href\u003d\"https://cloud.google.com/appengine/docs/standard/java/how-requests-are-handled\"\u003ehttps://cloud.google.com/appengine/docs/standard/java/how-requests-are-handled\u003c/a\u003e"},{"lineNumber":151,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":152,"author":{"gitId":"-"},"content":"    public static String getRequestId() {"},{"lineNumber":153,"author":{"gitId":"-"},"content":"        ApiProxy.Environment serverEnvironment \u003d ApiProxy.getCurrentEnvironment();"},{"lineNumber":154,"author":{"gitId":"-"},"content":"        if (serverEnvironment \u003d\u003d null) {"},{"lineNumber":155,"author":{"gitId":"-"},"content":"            // This will be the case in dev server"},{"lineNumber":156,"author":{"gitId":"-"},"content":"            return \"dummyrequestid\";"},{"lineNumber":157,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":158,"author":{"gitId":"-"},"content":"        return String.valueOf(ApiProxy.getCurrentEnvironment().getAttributes()"},{"lineNumber":159,"author":{"gitId":"-"},"content":"                .get(\"com.google.appengine.runtime.request_log_id\"));"},{"lineNumber":160,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":161,"author":{"gitId":"-"},"content":""},{"lineNumber":162,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":163,"author":{"gitId":"-"},"content":"     * Creates an {@link AppUrl} for the supplied {@code relativeUrl} parameter."},{"lineNumber":164,"author":{"gitId":"-"},"content":"     * The base URL will be the application front-end URL."},{"lineNumber":165,"author":{"gitId":"-"},"content":"     * {@code relativeUrl} must start with a \"/\"."},{"lineNumber":166,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":167,"author":{"gitId":"-"},"content":"    public static AppUrl getFrontEndAppUrl(String relativeUrl) {"},{"lineNumber":168,"author":{"gitId":"-"},"content":"        if (Config.isDevServer() \u0026\u0026 APP_FRONTENDDEV_URL !\u003d null) {"},{"lineNumber":169,"author":{"gitId":"-"},"content":"            return new AppUrl(APP_FRONTENDDEV_URL + relativeUrl);"},{"lineNumber":170,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":171,"author":{"gitId":"-"},"content":""},{"lineNumber":172,"author":{"gitId":"-"},"content":"        // In production, the back-end and front-end lives under the same domain"},{"lineNumber":173,"author":{"gitId":"-"},"content":"        return getBackEndAppUrl(relativeUrl);"},{"lineNumber":174,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":175,"author":{"gitId":"-"},"content":""},{"lineNumber":176,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":177,"author":{"gitId":"-"},"content":"     * Creates an {@link AppUrl} for the supplied {@code relativeUrl} parameter."},{"lineNumber":178,"author":{"gitId":"-"},"content":"     * The base URL will be the application back-end URL."},{"lineNumber":179,"author":{"gitId":"-"},"content":"     * {@code relativeUrl} must start with a \"/\"."},{"lineNumber":180,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":181,"author":{"gitId":"-"},"content":"    private static AppUrl getBackEndAppUrl(String relativeUrl) {"},{"lineNumber":182,"author":{"gitId":"-"},"content":"        return new AppUrl(getBaseAppUrl() + relativeUrl);"},{"lineNumber":183,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":184,"author":{"gitId":"-"},"content":""},{"lineNumber":185,"author":{"gitId":"-"},"content":"    public static boolean isUsingSendgrid() {"},{"lineNumber":186,"author":{"gitId":"-"},"content":"        return \"sendgrid\".equalsIgnoreCase(EMAIL_SERVICE) \u0026\u0026 SENDGRID_APIKEY !\u003d null \u0026\u0026 !SENDGRID_APIKEY.isEmpty();"},{"lineNumber":187,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":188,"author":{"gitId":"-"},"content":""},{"lineNumber":189,"author":{"gitId":"-"},"content":"    public static boolean isUsingMailgun() {"},{"lineNumber":190,"author":{"gitId":"-"},"content":"        return \"mailgun\".equalsIgnoreCase(EMAIL_SERVICE) \u0026\u0026 MAILGUN_APIKEY !\u003d null \u0026\u0026 !MAILGUN_APIKEY.isEmpty()"},{"lineNumber":191,"author":{"gitId":"-"},"content":"                \u0026\u0026 MAILGUN_DOMAINNAME !\u003d null \u0026\u0026 !MAILGUN_DOMAINNAME.isEmpty();"},{"lineNumber":192,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":193,"author":{"gitId":"-"},"content":""},{"lineNumber":194,"author":{"gitId":"-"},"content":"    public static boolean isUsingMailjet() {"},{"lineNumber":195,"author":{"gitId":"-"},"content":"        return \"mailjet\".equalsIgnoreCase(EMAIL_SERVICE) \u0026\u0026 MAILJET_APIKEY !\u003d null \u0026\u0026 !MAILJET_APIKEY.isEmpty()"},{"lineNumber":196,"author":{"gitId":"-"},"content":"                \u0026\u0026 MAILJET_SECRETKEY !\u003d null \u0026\u0026 !MAILJET_SECRETKEY.isEmpty();"},{"lineNumber":197,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":198,"author":{"gitId":"-"},"content":""},{"lineNumber":199,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"Derek-Hardy":4,"-":195}},{"path":"src/main/java/teammates/storage/api/EntitiesDb.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.storage.api;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import static com.googlecode.objectify.ObjectifyService.ofy;"},{"lineNumber":4,"author":{"gitId":"-"},"content":""},{"lineNumber":5,"author":{"gitId":"-"},"content":"import java.util.ArrayList;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import java.util.Collection;"},{"lineNumber":7,"author":{"gitId":"-"},"content":"import java.util.LinkedList;"},{"lineNumber":8,"author":{"gitId":"-"},"content":"import java.util.List;"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import java.util.Optional;"},{"lineNumber":10,"author":{"gitId":"-"},"content":""},{"lineNumber":11,"author":{"gitId":"-"},"content":"import com.google.appengine.api.search.Document;"},{"lineNumber":12,"author":{"gitId":"-"},"content":"import com.google.appengine.api.search.Results;"},{"lineNumber":13,"author":{"gitId":"-"},"content":"import com.google.appengine.api.search.ScoredDocument;"},{"lineNumber":14,"author":{"gitId":"-"},"content":"import com.google.appengine.api.search.SearchQueryException;"},{"lineNumber":15,"author":{"gitId":"-"},"content":"import com.google.common.base.Objects;"},{"lineNumber":16,"author":{"gitId":"-"},"content":"import com.googlecode.objectify.Key;"},{"lineNumber":17,"author":{"gitId":"-"},"content":"import com.googlecode.objectify.cmd.LoadType;"},{"lineNumber":18,"author":{"gitId":"-"},"content":""},{"lineNumber":19,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.EntityAttributes;"},{"lineNumber":20,"author":{"gitId":"-"},"content":"import teammates.common.exception.EntityAlreadyExistsException;"},{"lineNumber":21,"author":{"gitId":"-"},"content":"import teammates.common.exception.InvalidParametersException;"},{"lineNumber":22,"author":{"gitId":"-"},"content":"import teammates.common.util.Assumption;"},{"lineNumber":23,"author":{"gitId":"-"},"content":"import teammates.common.util.JsonUtils;"},{"lineNumber":24,"author":{"gitId":"-"},"content":"import teammates.common.util.Logger;"},{"lineNumber":25,"author":{"gitId":"-"},"content":"import teammates.storage.entity.BaseEntity;"},{"lineNumber":26,"author":{"gitId":"-"},"content":"import teammates.storage.search.SearchDocument;"},{"lineNumber":27,"author":{"gitId":"-"},"content":"import teammates.storage.search.SearchManager;"},{"lineNumber":28,"author":{"gitId":"-"},"content":"import teammates.storage.search.SearchQuery;"},{"lineNumber":29,"author":{"gitId":"-"},"content":""},{"lineNumber":30,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":31,"author":{"gitId":"-"},"content":" * Base class for all classes performing CRUD operations against the Datastore."},{"lineNumber":32,"author":{"gitId":"-"},"content":" *"},{"lineNumber":33,"author":{"gitId":"-"},"content":" * @param \u003cE\u003e Specific entity class"},{"lineNumber":34,"author":{"gitId":"-"},"content":" * @param \u003cA\u003e Specific attributes class"},{"lineNumber":35,"author":{"gitId":"-"},"content":" */"},{"lineNumber":36,"author":{"gitId":"-"},"content":"abstract class EntitiesDb\u003cE extends BaseEntity, A extends EntityAttributes\u003cE\u003e\u003e {"},{"lineNumber":37,"author":{"gitId":"-"},"content":""},{"lineNumber":38,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":39,"author":{"gitId":"-"},"content":"     * Error message when trying to create entity that already exist."},{"lineNumber":40,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":41,"author":{"gitId":"-"},"content":"    static final String ERROR_CREATE_ENTITY_ALREADY_EXISTS \u003d \"Trying to create an entity that exists: %s\";"},{"lineNumber":42,"author":{"gitId":"-"},"content":""},{"lineNumber":43,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":44,"author":{"gitId":"-"},"content":"     * Error message when trying to update entity that does not exist."},{"lineNumber":45,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":46,"author":{"gitId":"-"},"content":"    static final String ERROR_UPDATE_NON_EXISTENT \u003d \"Trying to update non-existent Entity: \";"},{"lineNumber":47,"author":{"gitId":"-"},"content":""},{"lineNumber":48,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":49,"author":{"gitId":"-"},"content":"     * Info message when entity is not saved because it does not change."},{"lineNumber":50,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":51,"author":{"gitId":"-"},"content":"    static final String OPTIMIZED_SAVING_POLICY_APPLIED \u003d"},{"lineNumber":52,"author":{"gitId":"-"},"content":"            \"Saving request is not issued because entity %s does not change by the update (%s)\";"},{"lineNumber":53,"author":{"gitId":"-"},"content":""},{"lineNumber":54,"author":{"gitId":"-"},"content":"    static final Logger log \u003d Logger.getLogger();"},{"lineNumber":55,"author":{"gitId":"-"},"content":""},{"lineNumber":56,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":57,"author":{"gitId":"-"},"content":"     * Creates the entity in the Datastore."},{"lineNumber":58,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":59,"author":{"gitId":"-"},"content":"     * @return created entity"},{"lineNumber":60,"author":{"gitId":"-"},"content":"     * @throws InvalidParametersException if the entity to create is invalid"},{"lineNumber":61,"author":{"gitId":"-"},"content":"     * @throws EntityAlreadyExistsException if the entity to create already exists"},{"lineNumber":62,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":63,"author":{"gitId":"-"},"content":"    public A createEntity(A entityToCreate) throws InvalidParametersException, EntityAlreadyExistsException {"},{"lineNumber":64,"author":{"gitId":"-"},"content":"        return createEntity(entityToCreate, true);"},{"lineNumber":65,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":66,"author":{"gitId":"-"},"content":""},{"lineNumber":67,"author":{"gitId":"-"},"content":"    private A createEntity(A entityToAdd, boolean shouldCheckExistence)"},{"lineNumber":68,"author":{"gitId":"-"},"content":"            throws InvalidParametersException, EntityAlreadyExistsException {"},{"lineNumber":69,"author":{"gitId":"-"},"content":"        Assumption.assertNotNull(entityToAdd);"},{"lineNumber":70,"author":{"gitId":"-"},"content":""},{"lineNumber":71,"author":{"gitId":"-"},"content":"        entityToAdd.sanitizeForSaving();"},{"lineNumber":72,"author":{"gitId":"-"},"content":""},{"lineNumber":73,"author":{"gitId":"-"},"content":"        if (!entityToAdd.isValid()) {"},{"lineNumber":74,"author":{"gitId":"-"},"content":"            throw new InvalidParametersException(entityToAdd.getInvalidityInfo());"},{"lineNumber":75,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":76,"author":{"gitId":"-"},"content":""},{"lineNumber":77,"author":{"gitId":"-"},"content":"        if (shouldCheckExistence \u0026\u0026 hasExistingEntities(entityToAdd)) {"},{"lineNumber":78,"author":{"gitId":"-"},"content":"            String error \u003d String.format(ERROR_CREATE_ENTITY_ALREADY_EXISTS, entityToAdd.toString());"},{"lineNumber":79,"author":{"gitId":"-"},"content":"            throw new EntityAlreadyExistsException(error);"},{"lineNumber":80,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":81,"author":{"gitId":"-"},"content":""},{"lineNumber":82,"author":{"gitId":"-"},"content":"        E entity \u003d entityToAdd.toEntity();"},{"lineNumber":83,"author":{"gitId":"-"},"content":""},{"lineNumber":84,"author":{"gitId":"-"},"content":"        ofy().save().entity(entity).now();"},{"lineNumber":85,"author":{"gitId":"-"},"content":"        log.info(\"Entity created: \" + JsonUtils.toJson(entityToAdd));"},{"lineNumber":86,"author":{"gitId":"-"},"content":""},{"lineNumber":87,"author":{"gitId":"-"},"content":"        return makeAttributes(entity);"},{"lineNumber":88,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":89,"author":{"gitId":"-"},"content":""},{"lineNumber":90,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":91,"author":{"gitId":"-"},"content":"     * Checks whether there are existing entities in the Datastore."},{"lineNumber":92,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":93,"author":{"gitId":"-"},"content":"    abstract boolean hasExistingEntities(A entityToCreate);"},{"lineNumber":94,"author":{"gitId":"-"},"content":""},{"lineNumber":95,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":96,"author":{"gitId":"-"},"content":"     * Puts an entity in the datastore without existence checking."},{"lineNumber":97,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":98,"author":{"gitId":"-"},"content":"     * \u003cp\u003eThe document of the associated entity (if applicable) WILL NOT be updated."},{"lineNumber":99,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":100,"author":{"gitId":"-"},"content":"     * @return created entity"},{"lineNumber":101,"author":{"gitId":"-"},"content":"     * @throws InvalidParametersException if entity to put is not valid"},{"lineNumber":102,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":103,"author":{"gitId":"-"},"content":"    public A putEntity(A entityToAdd) throws InvalidParametersException {"},{"lineNumber":104,"author":{"gitId":"-"},"content":"        try {"},{"lineNumber":105,"author":{"gitId":"-"},"content":"            return createEntity(entityToAdd, false);"},{"lineNumber":106,"author":{"gitId":"-"},"content":"        } catch (EntityAlreadyExistsException e) {"},{"lineNumber":107,"author":{"gitId":"-"},"content":"            Assumption.fail(\"Unreachable branch\");"},{"lineNumber":108,"author":{"gitId":"-"},"content":"            return null;"},{"lineNumber":109,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":110,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":111,"author":{"gitId":"-"},"content":""},{"lineNumber":112,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":113,"author":{"gitId":"-"},"content":"     * Puts a collection of entity in the datastore without existence checking."},{"lineNumber":114,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":115,"author":{"gitId":"-"},"content":"     * \u003cp\u003eThe documents of the associated entities (if applicable) WILL NOT be updated."},{"lineNumber":116,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":117,"author":{"gitId":"-"},"content":"     * @return created entities"},{"lineNumber":118,"author":{"gitId":"-"},"content":"     * @throws InvalidParametersException if any of entity to add is not valid"},{"lineNumber":119,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":120,"author":{"gitId":"-"},"content":"    public List\u003cA\u003e putEntities(Collection\u003cA\u003e entitiesToAdd) throws InvalidParametersException {"},{"lineNumber":121,"author":{"gitId":"-"},"content":"        Assumption.assertNotNull(entitiesToAdd);"},{"lineNumber":122,"author":{"gitId":"-"},"content":""},{"lineNumber":123,"author":{"gitId":"-"},"content":"        List\u003cE\u003e entities \u003d new ArrayList\u003c\u003e();"},{"lineNumber":124,"author":{"gitId":"-"},"content":""},{"lineNumber":125,"author":{"gitId":"-"},"content":"        for (A entityToAdd : entitiesToAdd) {"},{"lineNumber":126,"author":{"gitId":"-"},"content":"            entityToAdd.sanitizeForSaving();"},{"lineNumber":127,"author":{"gitId":"-"},"content":""},{"lineNumber":128,"author":{"gitId":"-"},"content":"            if (!entityToAdd.isValid()) {"},{"lineNumber":129,"author":{"gitId":"-"},"content":"                throw new InvalidParametersException(entityToAdd.getInvalidityInfo());"},{"lineNumber":130,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":131,"author":{"gitId":"-"},"content":""},{"lineNumber":132,"author":{"gitId":"-"},"content":"            E entity \u003d entityToAdd.toEntity();"},{"lineNumber":133,"author":{"gitId":"-"},"content":"            entities.add(entity);"},{"lineNumber":134,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":135,"author":{"gitId":"-"},"content":""},{"lineNumber":136,"author":{"gitId":"-"},"content":"        for (A attributes : entitiesToAdd) {"},{"lineNumber":137,"author":{"gitId":"-"},"content":"            log.info(\"Entity created: \" + JsonUtils.toJson(attributes));"},{"lineNumber":138,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":139,"author":{"gitId":"-"},"content":"        ofy().save().entities(entities).now();"},{"lineNumber":140,"author":{"gitId":"-"},"content":""},{"lineNumber":141,"author":{"gitId":"-"},"content":"        return makeAttributes(entities);"},{"lineNumber":142,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":143,"author":{"gitId":"-"},"content":""},{"lineNumber":144,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":145,"author":{"gitId":"-"},"content":"     * Checks whether two values are the same."},{"lineNumber":146,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":147,"author":{"gitId":"-"},"content":"    \u003cT\u003e boolean hasSameValue(T oldValue, T newValue) {"},{"lineNumber":148,"author":{"gitId":"-"},"content":"        return Objects.equal(oldValue, newValue);"},{"lineNumber":149,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":150,"author":{"gitId":"-"},"content":""},{"lineNumber":151,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":152,"author":{"gitId":"-"},"content":"     * Saves an entity."},{"lineNumber":153,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":154,"author":{"gitId":"-"},"content":"    void saveEntity(E entityToSave) {"},{"lineNumber":155,"author":{"gitId":"-"},"content":"        Assumption.assertNotNull(entityToSave);"},{"lineNumber":156,"author":{"gitId":"-"},"content":""},{"lineNumber":157,"author":{"gitId":"-"},"content":"        log.info(\"Entity saved: \" + JsonUtils.toJson(entityToSave));"},{"lineNumber":158,"author":{"gitId":"-"},"content":""},{"lineNumber":159,"author":{"gitId":"-"},"content":"        ofy().save().entity(entityToSave).now();"},{"lineNumber":160,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":161,"author":{"gitId":"-"},"content":""},{"lineNumber":162,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":163,"author":{"gitId":"-"},"content":"     * Saves a collection of entities."},{"lineNumber":164,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":165,"author":{"gitId":"-"},"content":"    void saveEntities(Collection\u003cE\u003e entitiesToSave) {"},{"lineNumber":166,"author":{"gitId":"-"},"content":"        for (E entityToSave : entitiesToSave) {"},{"lineNumber":167,"author":{"gitId":"-"},"content":"            log.info(\"Entity saved: \" + JsonUtils.toJson(entityToSave));"},{"lineNumber":168,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":169,"author":{"gitId":"-"},"content":""},{"lineNumber":170,"author":{"gitId":"-"},"content":"        ofy().save().entities(entitiesToSave).now();"},{"lineNumber":171,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":172,"author":{"gitId":"-"},"content":""},{"lineNumber":173,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":174,"author":{"gitId":"-"},"content":"     * Deletes entity by key."},{"lineNumber":175,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":176,"author":{"gitId":"-"},"content":"    void deleteEntity(Key\u003c?\u003e... keys) {"},{"lineNumber":177,"author":{"gitId":"-"},"content":"        Assumption.assertNotNull((Object) keys);"},{"lineNumber":178,"author":{"gitId":"-"},"content":"        Assumption.assertNotNull((Object[]) keys);"},{"lineNumber":179,"author":{"gitId":"-"},"content":""},{"lineNumber":180,"author":{"gitId":"-"},"content":"        for (Key\u003c?\u003e key : keys) {"},{"lineNumber":181,"author":{"gitId":"-"},"content":"            log.info(String.format(\"Delete entity %s of key (id: %d, name: %s)\","},{"lineNumber":182,"author":{"gitId":"Derek-Hardy"},"content":"                    key.getKind(), key.getRaw().getId(), key.getName()));"},{"lineNumber":183,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":184,"author":{"gitId":"-"},"content":"        ofy().delete().keys(keys).now();"},{"lineNumber":185,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":186,"author":{"gitId":"-"},"content":""},{"lineNumber":187,"author":{"gitId":"-"},"content":"    abstract LoadType\u003cE\u003e load();"},{"lineNumber":188,"author":{"gitId":"-"},"content":""},{"lineNumber":189,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":190,"author":{"gitId":"-"},"content":"     * Converts from entity to attributes."},{"lineNumber":191,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":192,"author":{"gitId":"-"},"content":"    abstract A makeAttributes(E entity);"},{"lineNumber":193,"author":{"gitId":"-"},"content":""},{"lineNumber":194,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":195,"author":{"gitId":"-"},"content":"     * Converts a collection of entities to a list of attributes."},{"lineNumber":196,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":197,"author":{"gitId":"-"},"content":"    List\u003cA\u003e makeAttributes(Collection\u003cE\u003e entities) {"},{"lineNumber":198,"author":{"gitId":"-"},"content":"        List\u003cA\u003e attributes \u003d new LinkedList\u003c\u003e();"},{"lineNumber":199,"author":{"gitId":"-"},"content":"        for (E entity : entities) {"},{"lineNumber":200,"author":{"gitId":"-"},"content":"            attributes.add(makeAttributes(entity));"},{"lineNumber":201,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":202,"author":{"gitId":"-"},"content":"        return attributes;"},{"lineNumber":203,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":204,"author":{"gitId":"-"},"content":""},{"lineNumber":205,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":206,"author":{"gitId":"-"},"content":"     * Converts from entity to attributes."},{"lineNumber":207,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":208,"author":{"gitId":"-"},"content":"     * @return null if the original entity is null"},{"lineNumber":209,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":210,"author":{"gitId":"-"},"content":"    A makeAttributesOrNull(E entity) {"},{"lineNumber":211,"author":{"gitId":"-"},"content":"        if (entity !\u003d null) {"},{"lineNumber":212,"author":{"gitId":"-"},"content":"            return makeAttributes(entity);"},{"lineNumber":213,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":214,"author":{"gitId":"-"},"content":"        return null;"},{"lineNumber":215,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":216,"author":{"gitId":"-"},"content":""},{"lineNumber":217,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":218,"author":{"gitId":"-"},"content":"     * Creates a key from a web safe string."},{"lineNumber":219,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":220,"author":{"gitId":"-"},"content":"    Optional\u003cKey\u003cE\u003e\u003e makeKeyFromWebSafeString(String webSafeString) {"},{"lineNumber":221,"author":{"gitId":"-"},"content":"        if (webSafeString \u003d\u003d null) {"},{"lineNumber":222,"author":{"gitId":"-"},"content":"            return Optional.empty();"},{"lineNumber":223,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":224,"author":{"gitId":"-"},"content":"        try {"},{"lineNumber":225,"author":{"gitId":"-"},"content":"            return Optional.of(Key.create(webSafeString));"},{"lineNumber":226,"author":{"gitId":"-"},"content":"        } catch (IllegalArgumentException e) {"},{"lineNumber":227,"author":{"gitId":"-"},"content":"            return Optional.empty();"},{"lineNumber":228,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":229,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":230,"author":{"gitId":"-"},"content":""},{"lineNumber":231,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":232,"author":{"gitId":"-"},"content":"     * Puts document(s) into the search engine."},{"lineNumber":233,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":234,"author":{"gitId":"-"},"content":"    void putDocument(String indexName, SearchDocument... documents) {"},{"lineNumber":235,"author":{"gitId":"-"},"content":"        List\u003cDocument\u003e searchDocuments \u003d new ArrayList\u003c\u003e();"},{"lineNumber":236,"author":{"gitId":"-"},"content":"        for (SearchDocument document : documents) {"},{"lineNumber":237,"author":{"gitId":"-"},"content":"            try {"},{"lineNumber":238,"author":{"gitId":"-"},"content":"                searchDocuments.add(document.build());"},{"lineNumber":239,"author":{"gitId":"-"},"content":"            } catch (Exception e) {"},{"lineNumber":240,"author":{"gitId":"-"},"content":"                log.severe(\"Fail to build search document in \" + indexName + \" for \" + document);"},{"lineNumber":241,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":242,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":243,"author":{"gitId":"-"},"content":"        try {"},{"lineNumber":244,"author":{"gitId":"-"},"content":"            SearchManager.putDocuments(indexName, searchDocuments);"},{"lineNumber":245,"author":{"gitId":"-"},"content":"        } catch (Exception e) {"},{"lineNumber":246,"author":{"gitId":"-"},"content":"            log.severe(\"Failed to batch put searchable documents in \" + indexName + \" for \" + searchDocuments);"},{"lineNumber":247,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":248,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":249,"author":{"gitId":"-"},"content":""},{"lineNumber":250,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":251,"author":{"gitId":"-"},"content":"     * Searches documents with query."},{"lineNumber":252,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":253,"author":{"gitId":"-"},"content":"    Results\u003cScoredDocument\u003e searchDocuments(String indexName, SearchQuery query) {"},{"lineNumber":254,"author":{"gitId":"-"},"content":"        try {"},{"lineNumber":255,"author":{"gitId":"-"},"content":"            if (query.getFilterSize() \u003e 0) {"},{"lineNumber":256,"author":{"gitId":"-"},"content":"                return SearchManager.searchDocuments(indexName, query.toQuery());"},{"lineNumber":257,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":258,"author":{"gitId":"-"},"content":"            return null;"},{"lineNumber":259,"author":{"gitId":"-"},"content":"        } catch (SearchQueryException e) {"},{"lineNumber":260,"author":{"gitId":"-"},"content":"            log.info(\"Unsupported query for this query string: \" + query.toString());"},{"lineNumber":261,"author":{"gitId":"-"},"content":"            return null;"},{"lineNumber":262,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":263,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":264,"author":{"gitId":"-"},"content":""},{"lineNumber":265,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":266,"author":{"gitId":"-"},"content":"     * Deletes document by documentId(s)."},{"lineNumber":267,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":268,"author":{"gitId":"-"},"content":"    void deleteDocument(String indexName, String... documentIds) {"},{"lineNumber":269,"author":{"gitId":"-"},"content":"        try {"},{"lineNumber":270,"author":{"gitId":"-"},"content":"            SearchManager.deleteDocument(indexName, documentIds);"},{"lineNumber":271,"author":{"gitId":"-"},"content":"        } catch (Exception e) {"},{"lineNumber":272,"author":{"gitId":"-"},"content":"            log.info(\"Unable to delete document in the index: \" + indexName"},{"lineNumber":273,"author":{"gitId":"-"},"content":"                    + \" with document Ids \" + String.join(\", \", documentIds));"},{"lineNumber":274,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":275,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":276,"author":{"gitId":"-"},"content":""},{"lineNumber":277,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"Derek-Hardy":1,"-":276}},{"path":"src/main/java/teammates/storage/api/InstructorsDb.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.storage.api;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import static com.googlecode.objectify.ObjectifyService.ofy;"},{"lineNumber":4,"author":{"gitId":"-"},"content":""},{"lineNumber":5,"author":{"gitId":"-"},"content":"import java.util.ArrayList;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import java.util.List;"},{"lineNumber":7,"author":{"gitId":"-"},"content":""},{"lineNumber":8,"author":{"gitId":"-"},"content":"import com.google.appengine.api.search.Results;"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import com.google.appengine.api.search.ScoredDocument;"},{"lineNumber":10,"author":{"gitId":"-"},"content":"import com.googlecode.objectify.Key;"},{"lineNumber":11,"author":{"gitId":"-"},"content":"import com.googlecode.objectify.cmd.LoadType;"},{"lineNumber":12,"author":{"gitId":"-"},"content":""},{"lineNumber":13,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.AttributesDeletionQuery;"},{"lineNumber":14,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.InstructorSearchResultBundle;"},{"lineNumber":15,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.attributes.InstructorAttributes;"},{"lineNumber":16,"author":{"gitId":"-"},"content":"import teammates.common.exception.EntityAlreadyExistsException;"},{"lineNumber":17,"author":{"gitId":"-"},"content":"import teammates.common.exception.EntityDoesNotExistException;"},{"lineNumber":18,"author":{"gitId":"-"},"content":"import teammates.common.exception.InvalidParametersException;"},{"lineNumber":19,"author":{"gitId":"-"},"content":"import teammates.common.util.Assumption;"},{"lineNumber":20,"author":{"gitId":"-"},"content":"import teammates.common.util.Const;"},{"lineNumber":21,"author":{"gitId":"-"},"content":"import teammates.common.util.StringHelper;"},{"lineNumber":22,"author":{"gitId":"-"},"content":"import teammates.storage.entity.Instructor;"},{"lineNumber":23,"author":{"gitId":"-"},"content":"import teammates.storage.search.InstructorSearchDocument;"},{"lineNumber":24,"author":{"gitId":"-"},"content":"import teammates.storage.search.InstructorSearchQuery;"},{"lineNumber":25,"author":{"gitId":"-"},"content":"import teammates.storage.search.SearchDocument;"},{"lineNumber":26,"author":{"gitId":"-"},"content":""},{"lineNumber":27,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":28,"author":{"gitId":"-"},"content":" * Handles CRUD operations for instructors."},{"lineNumber":29,"author":{"gitId":"-"},"content":" *"},{"lineNumber":30,"author":{"gitId":"-"},"content":" * @see Instructor"},{"lineNumber":31,"author":{"gitId":"-"},"content":" * @see InstructorAttributes"},{"lineNumber":32,"author":{"gitId":"-"},"content":" */"},{"lineNumber":33,"author":{"gitId":"-"},"content":"public class InstructorsDb extends EntitiesDb\u003cInstructor, InstructorAttributes\u003e {"},{"lineNumber":34,"author":{"gitId":"-"},"content":""},{"lineNumber":35,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":36,"author":{"gitId":"-"},"content":"     * Creates or updates search document for the given instructor."},{"lineNumber":37,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":38,"author":{"gitId":"-"},"content":"    public void putDocument(InstructorAttributes instructorParam) {"},{"lineNumber":39,"author":{"gitId":"-"},"content":"        InstructorAttributes instructor \u003d instructorParam;"},{"lineNumber":40,"author":{"gitId":"-"},"content":"        if (instructor.key \u003d\u003d null) {"},{"lineNumber":41,"author":{"gitId":"-"},"content":"            instructor \u003d this.getInstructorForEmail(instructor.courseId, instructor.email);"},{"lineNumber":42,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":43,"author":{"gitId":"-"},"content":"        // defensive coding for legacy data"},{"lineNumber":44,"author":{"gitId":"-"},"content":"        if (instructor.key !\u003d null) {"},{"lineNumber":45,"author":{"gitId":"-"},"content":"            putDocument(Const.SearchIndex.INSTRUCTOR, new InstructorSearchDocument(instructor));"},{"lineNumber":46,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":47,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":48,"author":{"gitId":"-"},"content":""},{"lineNumber":49,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":50,"author":{"gitId":"-"},"content":"     * Batch creates or updates search documents for the given instructors."},{"lineNumber":51,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":52,"author":{"gitId":"-"},"content":"    public void putDocuments(List\u003cInstructorAttributes\u003e instructorParams) {"},{"lineNumber":53,"author":{"gitId":"-"},"content":"        List\u003cSearchDocument\u003e instructorDocuments \u003d new ArrayList\u003c\u003e();"},{"lineNumber":54,"author":{"gitId":"-"},"content":"        for (InstructorAttributes instructor : instructorParams) {"},{"lineNumber":55,"author":{"gitId":"-"},"content":"            InstructorAttributes inst \u003d instructor.key \u003d\u003d null"},{"lineNumber":56,"author":{"gitId":"-"},"content":"                    ? getInstructorForEmail(instructor.courseId, instructor.email)"},{"lineNumber":57,"author":{"gitId":"-"},"content":"                    : instructor;"},{"lineNumber":58,"author":{"gitId":"-"},"content":"            // defensive coding for legacy data"},{"lineNumber":59,"author":{"gitId":"-"},"content":"            if (inst.key !\u003d null) {"},{"lineNumber":60,"author":{"gitId":"-"},"content":"                instructorDocuments.add(new InstructorSearchDocument(inst));"},{"lineNumber":61,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":62,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":63,"author":{"gitId":"-"},"content":"        putDocument(Const.SearchIndex.INSTRUCTOR, instructorDocuments.toArray(new SearchDocument[0]));"},{"lineNumber":64,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":65,"author":{"gitId":"-"},"content":""},{"lineNumber":66,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":67,"author":{"gitId":"-"},"content":"     * Removes search document for the given instructor by using {@code encryptedRegistrationKey}."},{"lineNumber":68,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":69,"author":{"gitId":"-"},"content":"     * \u003cp\u003eSee {@link InstructorSearchDocument} for more details.\u003c/p\u003e"},{"lineNumber":70,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":71,"author":{"gitId":"-"},"content":"    public void deleteDocumentByEncryptedInstructorKey(String encryptedRegistrationKey) {"},{"lineNumber":72,"author":{"gitId":"-"},"content":"        deleteDocument(Const.SearchIndex.INSTRUCTOR, encryptedRegistrationKey);"},{"lineNumber":73,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":74,"author":{"gitId":"-"},"content":""},{"lineNumber":75,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":76,"author":{"gitId":"-"},"content":"     * Searches all instructors in the system."},{"lineNumber":77,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":78,"author":{"gitId":"-"},"content":"     * \u003cp\u003eThis method should be used by admin only since the searching does not restrict the"},{"lineNumber":79,"author":{"gitId":"-"},"content":"     * visibility according to the logged-in user\u0027s google ID. This is used by admin to"},{"lineNumber":80,"author":{"gitId":"-"},"content":"     * search instructors in the whole system."},{"lineNumber":81,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":82,"author":{"gitId":"-"},"content":"    public InstructorSearchResultBundle searchInstructorsInWholeSystem(String queryString) {"},{"lineNumber":83,"author":{"gitId":"-"},"content":""},{"lineNumber":84,"author":{"gitId":"-"},"content":"        if (queryString.trim().isEmpty()) {"},{"lineNumber":85,"author":{"gitId":"-"},"content":"            return new InstructorSearchResultBundle();"},{"lineNumber":86,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":87,"author":{"gitId":"-"},"content":""},{"lineNumber":88,"author":{"gitId":"-"},"content":"        Results\u003cScoredDocument\u003e results \u003d searchDocuments(Const.SearchIndex.INSTRUCTOR,"},{"lineNumber":89,"author":{"gitId":"-"},"content":"                                                          new InstructorSearchQuery(queryString));"},{"lineNumber":90,"author":{"gitId":"-"},"content":""},{"lineNumber":91,"author":{"gitId":"-"},"content":"        return InstructorSearchDocument.fromResults(results);"},{"lineNumber":92,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":93,"author":{"gitId":"-"},"content":""},{"lineNumber":94,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":95,"author":{"gitId":"-"},"content":"     * Creates an instructor."},{"lineNumber":96,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":97,"author":{"gitId":"-"},"content":"     * @return the created instructor"},{"lineNumber":98,"author":{"gitId":"-"},"content":"     * @throws InvalidParametersException if the instructor is not valid"},{"lineNumber":99,"author":{"gitId":"-"},"content":"     * @throws EntityAlreadyExistsException if the instructor already exists in the Datastore"},{"lineNumber":100,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":101,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":102,"author":{"gitId":"-"},"content":"    public InstructorAttributes createEntity(InstructorAttributes instructorToAdd)"},{"lineNumber":103,"author":{"gitId":"-"},"content":"            throws InvalidParametersException, EntityAlreadyExistsException {"},{"lineNumber":104,"author":{"gitId":"-"},"content":"        InstructorAttributes createdInstructor \u003d super.createEntity(instructorToAdd);"},{"lineNumber":105,"author":{"gitId":"-"},"content":"        putDocument(createdInstructor);"},{"lineNumber":106,"author":{"gitId":"-"},"content":""},{"lineNumber":107,"author":{"gitId":"-"},"content":"        return createdInstructor;"},{"lineNumber":108,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":109,"author":{"gitId":"-"},"content":""},{"lineNumber":110,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":111,"author":{"gitId":"-"},"content":"     * Gets an instructor by unique constraint courseId-email."},{"lineNumber":112,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":113,"author":{"gitId":"-"},"content":"    public InstructorAttributes getInstructorForEmail(String courseId, String email) {"},{"lineNumber":114,"author":{"gitId":"-"},"content":"        Assumption.assertNotNull(email);"},{"lineNumber":115,"author":{"gitId":"-"},"content":"        Assumption.assertNotNull(courseId);"},{"lineNumber":116,"author":{"gitId":"-"},"content":""},{"lineNumber":117,"author":{"gitId":"-"},"content":"        return makeAttributesOrNull(getInstructorEntityForEmail(courseId, email));"},{"lineNumber":118,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":119,"author":{"gitId":"-"},"content":""},{"lineNumber":120,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":121,"author":{"gitId":"-"},"content":"     * Gets an instructor by unique ID."},{"lineNumber":122,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":123,"author":{"gitId":"-"},"content":"    public InstructorAttributes getInstructorById(String courseId, String email) {"},{"lineNumber":124,"author":{"gitId":"-"},"content":"        Assumption.assertNotNull(email);"},{"lineNumber":125,"author":{"gitId":"-"},"content":"        Assumption.assertNotNull(courseId);"},{"lineNumber":126,"author":{"gitId":"-"},"content":""},{"lineNumber":127,"author":{"gitId":"-"},"content":"        return makeAttributesOrNull(getInstructorEntityById(courseId, email));"},{"lineNumber":128,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":129,"author":{"gitId":"-"},"content":""},{"lineNumber":130,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":131,"author":{"gitId":"-"},"content":"     * Gets an instructor by unique constraint courseId-googleId."},{"lineNumber":132,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":133,"author":{"gitId":"-"},"content":"    public InstructorAttributes getInstructorForGoogleId(String courseId, String googleId) {"},{"lineNumber":134,"author":{"gitId":"-"},"content":"        Assumption.assertNotNull(googleId);"},{"lineNumber":135,"author":{"gitId":"-"},"content":"        Assumption.assertNotNull(courseId);"},{"lineNumber":136,"author":{"gitId":"-"},"content":""},{"lineNumber":137,"author":{"gitId":"-"},"content":"        return makeAttributesOrNull(getInstructorEntityForGoogleId(courseId, googleId));"},{"lineNumber":138,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":139,"author":{"gitId":"-"},"content":""},{"lineNumber":140,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":141,"author":{"gitId":"-"},"content":"     * Gets an instructor by unique constraint encryptedKey."},{"lineNumber":142,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":143,"author":{"gitId":"-"},"content":"    public InstructorAttributes getInstructorForRegistrationKey(String encryptedKey) {"},{"lineNumber":144,"author":{"gitId":"-"},"content":"        Assumption.assertNotNull(encryptedKey);"},{"lineNumber":145,"author":{"gitId":"-"},"content":""},{"lineNumber":146,"author":{"gitId":"-"},"content":"        String decryptedKey;"},{"lineNumber":147,"author":{"gitId":"-"},"content":"        try {"},{"lineNumber":148,"author":{"gitId":"-"},"content":"            decryptedKey \u003d StringHelper.decrypt(encryptedKey.trim());"},{"lineNumber":149,"author":{"gitId":"-"},"content":"        } catch (InvalidParametersException e) {"},{"lineNumber":150,"author":{"gitId":"-"},"content":"            return null;"},{"lineNumber":151,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":152,"author":{"gitId":"-"},"content":""},{"lineNumber":153,"author":{"gitId":"-"},"content":"        return makeAttributesOrNull(getInstructorEntityForRegistrationKey(decryptedKey));"},{"lineNumber":154,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":155,"author":{"gitId":"-"},"content":""},{"lineNumber":156,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":157,"author":{"gitId":"-"},"content":"     * Gets all instructors associated with a googleId."},{"lineNumber":158,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":159,"author":{"gitId":"-"},"content":"     * @param omitArchived whether archived instructors should be omitted or not"},{"lineNumber":160,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":161,"author":{"gitId":"-"},"content":"    public List\u003cInstructorAttributes\u003e getInstructorsForGoogleId(String googleId, boolean omitArchived) {"},{"lineNumber":162,"author":{"gitId":"-"},"content":"        Assumption.assertNotNull(googleId);"},{"lineNumber":163,"author":{"gitId":"-"},"content":""},{"lineNumber":164,"author":{"gitId":"-"},"content":"        return makeAttributes(getInstructorEntitiesForGoogleId(googleId, omitArchived));"},{"lineNumber":165,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":166,"author":{"gitId":"-"},"content":""},{"lineNumber":167,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":168,"author":{"gitId":"-"},"content":"     * Gets all instructors of a course."},{"lineNumber":169,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":170,"author":{"gitId":"-"},"content":"    public List\u003cInstructorAttributes\u003e getInstructorsForCourse(String courseId) {"},{"lineNumber":171,"author":{"gitId":"-"},"content":"        Assumption.assertNotNull(courseId);"},{"lineNumber":172,"author":{"gitId":"-"},"content":""},{"lineNumber":173,"author":{"gitId":"-"},"content":"        return makeAttributes(getInstructorEntitiesForCourse(courseId));"},{"lineNumber":174,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":175,"author":{"gitId":"-"},"content":""},{"lineNumber":176,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":177,"author":{"gitId":"-"},"content":"     * Gets all instructors that will be displayed to students of a course."},{"lineNumber":178,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":179,"author":{"gitId":"-"},"content":"    public List\u003cInstructorAttributes\u003e getInstructorsDisplayedToStudents(String courseId) {"},{"lineNumber":180,"author":{"gitId":"-"},"content":"        Assumption.assertNotNull(courseId);"},{"lineNumber":181,"author":{"gitId":"-"},"content":""},{"lineNumber":182,"author":{"gitId":"-"},"content":"        return makeAttributes(getInstructorEntitiesThatAreDisplayedInCourse(courseId));"},{"lineNumber":183,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":184,"author":{"gitId":"-"},"content":""},{"lineNumber":185,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":186,"author":{"gitId":"-"},"content":"     * Updates an instructor by {@link InstructorAttributes.UpdateOptionsWithGoogleId}."},{"lineNumber":187,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":188,"author":{"gitId":"-"},"content":"     * @return updated instructor"},{"lineNumber":189,"author":{"gitId":"-"},"content":"     * @throws InvalidParametersException if attributes to update are not valid"},{"lineNumber":190,"author":{"gitId":"-"},"content":"     * @throws EntityDoesNotExistException if the instructor cannot be found"},{"lineNumber":191,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":192,"author":{"gitId":"-"},"content":"    public InstructorAttributes updateInstructorByGoogleId(InstructorAttributes.UpdateOptionsWithGoogleId updateOptions)"},{"lineNumber":193,"author":{"gitId":"-"},"content":"            throws InvalidParametersException, EntityDoesNotExistException {"},{"lineNumber":194,"author":{"gitId":"-"},"content":"        Assumption.assertNotNull(updateOptions);"},{"lineNumber":195,"author":{"gitId":"-"},"content":""},{"lineNumber":196,"author":{"gitId":"-"},"content":"        Instructor instructor \u003d getInstructorEntityForGoogleId(updateOptions.getCourseId(), updateOptions.getGoogleId());"},{"lineNumber":197,"author":{"gitId":"-"},"content":"        if (instructor \u003d\u003d null) {"},{"lineNumber":198,"author":{"gitId":"-"},"content":"            throw new EntityDoesNotExistException(ERROR_UPDATE_NON_EXISTENT + updateOptions);"},{"lineNumber":199,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":200,"author":{"gitId":"-"},"content":""},{"lineNumber":201,"author":{"gitId":"-"},"content":"        InstructorAttributes newAttributes \u003d makeAttributes(instructor);"},{"lineNumber":202,"author":{"gitId":"-"},"content":"        newAttributes.update(updateOptions);"},{"lineNumber":203,"author":{"gitId":"-"},"content":""},{"lineNumber":204,"author":{"gitId":"-"},"content":"        newAttributes.sanitizeForSaving();"},{"lineNumber":205,"author":{"gitId":"-"},"content":"        if (!newAttributes.isValid()) {"},{"lineNumber":206,"author":{"gitId":"-"},"content":"            throw new InvalidParametersException(newAttributes.getInvalidityInfo());"},{"lineNumber":207,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":208,"author":{"gitId":"-"},"content":""},{"lineNumber":209,"author":{"gitId":"-"},"content":"        // update only if change"},{"lineNumber":210,"author":{"gitId":"-"},"content":"        boolean hasSameAttributes \u003d"},{"lineNumber":211,"author":{"gitId":"-"},"content":"                this.\u003cString\u003ehasSameValue(instructor.getName(), newAttributes.getName())"},{"lineNumber":212,"author":{"gitId":"-"},"content":"                \u0026\u0026 this.\u003cString\u003ehasSameValue(instructor.getEmail(), newAttributes.getEmail())"},{"lineNumber":213,"author":{"gitId":"-"},"content":"                \u0026\u0026 this.\u003cBoolean\u003ehasSameValue(instructor.getIsArchived(), newAttributes.isArchived())"},{"lineNumber":214,"author":{"gitId":"-"},"content":"                \u0026\u0026 this.\u003cString\u003ehasSameValue(instructor.getRole(), newAttributes.getRole())"},{"lineNumber":215,"author":{"gitId":"-"},"content":"                \u0026\u0026 this.\u003cBoolean\u003ehasSameValue(instructor.isDisplayedToStudents(), newAttributes.isDisplayedToStudents())"},{"lineNumber":216,"author":{"gitId":"-"},"content":"                \u0026\u0026 this.\u003cString\u003ehasSameValue(instructor.getDisplayedName(), newAttributes.getDisplayedName())"},{"lineNumber":217,"author":{"gitId":"-"},"content":"                \u0026\u0026 this.\u003cString\u003ehasSameValue("},{"lineNumber":218,"author":{"gitId":"-"},"content":"                        instructor.getInstructorPrivilegesAsText(), newAttributes.getTextFromInstructorPrivileges());"},{"lineNumber":219,"author":{"gitId":"-"},"content":"        if (hasSameAttributes) {"},{"lineNumber":220,"author":{"gitId":"-"},"content":"            log.info(String.format("},{"lineNumber":221,"author":{"gitId":"-"},"content":"                    OPTIMIZED_SAVING_POLICY_APPLIED, Instructor.class.getSimpleName(), updateOptions));"},{"lineNumber":222,"author":{"gitId":"-"},"content":"            return newAttributes;"},{"lineNumber":223,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":224,"author":{"gitId":"-"},"content":""},{"lineNumber":225,"author":{"gitId":"-"},"content":"        instructor.setName(newAttributes.name);"},{"lineNumber":226,"author":{"gitId":"-"},"content":"        instructor.setEmail(newAttributes.email);"},{"lineNumber":227,"author":{"gitId":"-"},"content":"        instructor.setIsArchived(newAttributes.isArchived);"},{"lineNumber":228,"author":{"gitId":"-"},"content":"        instructor.setRole(newAttributes.role);"},{"lineNumber":229,"author":{"gitId":"-"},"content":"        instructor.setIsDisplayedToStudents(newAttributes.isDisplayedToStudents);"},{"lineNumber":230,"author":{"gitId":"-"},"content":"        instructor.setDisplayedName(newAttributes.displayedName);"},{"lineNumber":231,"author":{"gitId":"-"},"content":"        instructor.setInstructorPrivilegeAsText(newAttributes.getTextFromInstructorPrivileges());"},{"lineNumber":232,"author":{"gitId":"-"},"content":""},{"lineNumber":233,"author":{"gitId":"-"},"content":"        saveEntity(instructor);"},{"lineNumber":234,"author":{"gitId":"-"},"content":""},{"lineNumber":235,"author":{"gitId":"-"},"content":"        newAttributes \u003d makeAttributes(instructor);"},{"lineNumber":236,"author":{"gitId":"-"},"content":"        putDocument(newAttributes);"},{"lineNumber":237,"author":{"gitId":"-"},"content":""},{"lineNumber":238,"author":{"gitId":"-"},"content":"        return newAttributes;"},{"lineNumber":239,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":240,"author":{"gitId":"-"},"content":""},{"lineNumber":241,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":242,"author":{"gitId":"-"},"content":"     * Updates an instructor by {@link InstructorAttributes.UpdateOptionsWithEmail}."},{"lineNumber":243,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":244,"author":{"gitId":"-"},"content":"     * @return updated instructor"},{"lineNumber":245,"author":{"gitId":"-"},"content":"     * @throws InvalidParametersException if attributes to update are not valid"},{"lineNumber":246,"author":{"gitId":"-"},"content":"     * @throws EntityDoesNotExistException if the instructor cannot be found"},{"lineNumber":247,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":248,"author":{"gitId":"-"},"content":"    public InstructorAttributes updateInstructorByEmail(InstructorAttributes.UpdateOptionsWithEmail updateOptions)"},{"lineNumber":249,"author":{"gitId":"-"},"content":"            throws InvalidParametersException, EntityDoesNotExistException {"},{"lineNumber":250,"author":{"gitId":"-"},"content":"        Assumption.assertNotNull(updateOptions);"},{"lineNumber":251,"author":{"gitId":"-"},"content":""},{"lineNumber":252,"author":{"gitId":"-"},"content":"        Instructor instructor \u003d getInstructorEntityForEmail(updateOptions.getCourseId(), updateOptions.getEmail());"},{"lineNumber":253,"author":{"gitId":"-"},"content":"        if (instructor \u003d\u003d null) {"},{"lineNumber":254,"author":{"gitId":"-"},"content":"            throw new EntityDoesNotExistException(ERROR_UPDATE_NON_EXISTENT + updateOptions);"},{"lineNumber":255,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":256,"author":{"gitId":"-"},"content":""},{"lineNumber":257,"author":{"gitId":"-"},"content":"        InstructorAttributes newAttributes \u003d makeAttributes(instructor);"},{"lineNumber":258,"author":{"gitId":"-"},"content":"        newAttributes.update(updateOptions);"},{"lineNumber":259,"author":{"gitId":"-"},"content":""},{"lineNumber":260,"author":{"gitId":"-"},"content":"        newAttributes.sanitizeForSaving();"},{"lineNumber":261,"author":{"gitId":"-"},"content":"        if (!newAttributes.isValid()) {"},{"lineNumber":262,"author":{"gitId":"-"},"content":"            throw new InvalidParametersException(newAttributes.getInvalidityInfo());"},{"lineNumber":263,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":264,"author":{"gitId":"-"},"content":""},{"lineNumber":265,"author":{"gitId":"-"},"content":"        // update only if change"},{"lineNumber":266,"author":{"gitId":"-"},"content":"        boolean hasSameAttributes \u003d"},{"lineNumber":267,"author":{"gitId":"-"},"content":"                this.\u003cString\u003ehasSameValue(instructor.getName(), newAttributes.getName())"},{"lineNumber":268,"author":{"gitId":"-"},"content":"                \u0026\u0026 this.\u003cString\u003ehasSameValue(instructor.getGoogleId(), newAttributes.getGoogleId())"},{"lineNumber":269,"author":{"gitId":"-"},"content":"                \u0026\u0026 this.\u003cBoolean\u003ehasSameValue(instructor.getIsArchived(), newAttributes.isArchived())"},{"lineNumber":270,"author":{"gitId":"-"},"content":"                \u0026\u0026 this.\u003cString\u003ehasSameValue(instructor.getRole(), newAttributes.getRole())"},{"lineNumber":271,"author":{"gitId":"-"},"content":"                \u0026\u0026 this.\u003cBoolean\u003ehasSameValue(instructor.isDisplayedToStudents(), newAttributes.isDisplayedToStudents())"},{"lineNumber":272,"author":{"gitId":"-"},"content":"                \u0026\u0026 this.\u003cString\u003ehasSameValue(instructor.getDisplayedName(), newAttributes.getDisplayedName())"},{"lineNumber":273,"author":{"gitId":"-"},"content":"                \u0026\u0026 this.\u003cString\u003ehasSameValue("},{"lineNumber":274,"author":{"gitId":"-"},"content":"                        instructor.getInstructorPrivilegesAsText(), newAttributes.getTextFromInstructorPrivileges());"},{"lineNumber":275,"author":{"gitId":"-"},"content":"        if (hasSameAttributes) {"},{"lineNumber":276,"author":{"gitId":"-"},"content":"            log.info(String.format(OPTIMIZED_SAVING_POLICY_APPLIED, Instructor.class.getSimpleName(), updateOptions));"},{"lineNumber":277,"author":{"gitId":"-"},"content":"            return newAttributes;"},{"lineNumber":278,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":279,"author":{"gitId":"-"},"content":""},{"lineNumber":280,"author":{"gitId":"-"},"content":"        instructor.setGoogleId(newAttributes.googleId);"},{"lineNumber":281,"author":{"gitId":"-"},"content":"        instructor.setName(newAttributes.name);"},{"lineNumber":282,"author":{"gitId":"-"},"content":"        instructor.setIsArchived(newAttributes.isArchived);"},{"lineNumber":283,"author":{"gitId":"-"},"content":"        instructor.setRole(newAttributes.role);"},{"lineNumber":284,"author":{"gitId":"-"},"content":"        instructor.setIsDisplayedToStudents(newAttributes.isDisplayedToStudents);"},{"lineNumber":285,"author":{"gitId":"-"},"content":"        instructor.setDisplayedName(newAttributes.displayedName);"},{"lineNumber":286,"author":{"gitId":"-"},"content":"        instructor.setInstructorPrivilegeAsText(newAttributes.getTextFromInstructorPrivileges());"},{"lineNumber":287,"author":{"gitId":"-"},"content":""},{"lineNumber":288,"author":{"gitId":"-"},"content":"        saveEntity(instructor);"},{"lineNumber":289,"author":{"gitId":"-"},"content":""},{"lineNumber":290,"author":{"gitId":"-"},"content":"        newAttributes \u003d makeAttributes(instructor);"},{"lineNumber":291,"author":{"gitId":"-"},"content":"        putDocument(newAttributes);"},{"lineNumber":292,"author":{"gitId":"-"},"content":""},{"lineNumber":293,"author":{"gitId":"-"},"content":"        return newAttributes;"},{"lineNumber":294,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":295,"author":{"gitId":"-"},"content":""},{"lineNumber":296,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":297,"author":{"gitId":"-"},"content":"     * Deletes the instructor specified by courseId and email."},{"lineNumber":298,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":299,"author":{"gitId":"-"},"content":"     * \u003cp\u003eFails silently if the student does not exist."},{"lineNumber":300,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":301,"author":{"gitId":"-"},"content":"    public void deleteInstructor(String courseId, String email) {"},{"lineNumber":302,"author":{"gitId":"-"},"content":"        Assumption.assertNotNull(email);"},{"lineNumber":303,"author":{"gitId":"-"},"content":"        Assumption.assertNotNull(courseId);"},{"lineNumber":304,"author":{"gitId":"-"},"content":""},{"lineNumber":305,"author":{"gitId":"-"},"content":"        Instructor instructorToDelete \u003d getInstructorEntityForEmail(courseId, email);"},{"lineNumber":306,"author":{"gitId":"-"},"content":""},{"lineNumber":307,"author":{"gitId":"-"},"content":"        if (instructorToDelete \u003d\u003d null) {"},{"lineNumber":308,"author":{"gitId":"-"},"content":"            return;"},{"lineNumber":309,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":310,"author":{"gitId":"-"},"content":""},{"lineNumber":311,"author":{"gitId":"-"},"content":"        deleteDocumentByEncryptedInstructorKey(StringHelper.encrypt(instructorToDelete.getRegistrationKey()));"},{"lineNumber":312,"author":{"gitId":"-"},"content":""},{"lineNumber":313,"author":{"gitId":"-"},"content":"        deleteEntity(Key.create(Instructor.class, instructorToDelete.getUniqueId()));"},{"lineNumber":314,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":315,"author":{"gitId":"-"},"content":""},{"lineNumber":316,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":317,"author":{"gitId":"-"},"content":"     * Deletes instructors using {@link AttributesDeletionQuery}."},{"lineNumber":318,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":319,"author":{"gitId":"-"},"content":"    public void deleteInstructors(AttributesDeletionQuery query) {"},{"lineNumber":320,"author":{"gitId":"-"},"content":"        Assumption.assertNotNull(query);"},{"lineNumber":321,"author":{"gitId":"-"},"content":""},{"lineNumber":322,"author":{"gitId":"-"},"content":"        if (query.isCourseIdPresent()) {"},{"lineNumber":323,"author":{"gitId":"-"},"content":"            List\u003cInstructor\u003e instructorsToDelete \u003d load().filter(\"courseId \u003d\", query.getCourseId()).list();"},{"lineNumber":324,"author":{"gitId":"-"},"content":"            deleteDocument(Const.SearchIndex.INSTRUCTOR,"},{"lineNumber":325,"author":{"gitId":"-"},"content":"                    instructorsToDelete.stream()"},{"lineNumber":326,"author":{"gitId":"-"},"content":"                            .map(i -\u003e StringHelper.encrypt(i.getRegistrationKey()))"},{"lineNumber":327,"author":{"gitId":"-"},"content":"                            .toArray(String[]::new));"},{"lineNumber":328,"author":{"gitId":"-"},"content":""},{"lineNumber":329,"author":{"gitId":"-"},"content":"            deleteEntity(instructorsToDelete.stream()"},{"lineNumber":330,"author":{"gitId":"-"},"content":"                    .map(s -\u003e Key.create(Instructor.class, s.getUniqueId()))"},{"lineNumber":331,"author":{"gitId":"-"},"content":"                    .toArray(Key[]::new));"},{"lineNumber":332,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":333,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":334,"author":{"gitId":"-"},"content":""},{"lineNumber":335,"author":{"gitId":"-"},"content":"    private Instructor getInstructorEntityForGoogleId(String courseId, String googleId) {"},{"lineNumber":336,"author":{"gitId":"-"},"content":"        return load()"},{"lineNumber":337,"author":{"gitId":"-"},"content":"                .filter(\"courseId \u003d\", courseId)"},{"lineNumber":338,"author":{"gitId":"-"},"content":"                .filter(\"googleId \u003d\", googleId)"},{"lineNumber":339,"author":{"gitId":"-"},"content":"                .first().now();"},{"lineNumber":340,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":341,"author":{"gitId":"-"},"content":""},{"lineNumber":342,"author":{"gitId":"-"},"content":"    private Instructor getInstructorEntityForEmail(String courseId, String email) {"},{"lineNumber":343,"author":{"gitId":"-"},"content":"        return load()"},{"lineNumber":344,"author":{"gitId":"-"},"content":"                .filter(\"courseId \u003d\", courseId)"},{"lineNumber":345,"author":{"gitId":"-"},"content":"                .filter(\"email \u003d\", email)"},{"lineNumber":346,"author":{"gitId":"-"},"content":"                .first().now();"},{"lineNumber":347,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":348,"author":{"gitId":"-"},"content":""},{"lineNumber":349,"author":{"gitId":"-"},"content":"    private Instructor getInstructorEntityById(String courseId, String email) {"},{"lineNumber":350,"author":{"gitId":"-"},"content":"        return load().id(Instructor.generateId(email, courseId)).now();"},{"lineNumber":351,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":352,"author":{"gitId":"-"},"content":""},{"lineNumber":353,"author":{"gitId":"-"},"content":"    private List\u003cInstructor\u003e getInstructorEntitiesThatAreDisplayedInCourse(String courseId) {"},{"lineNumber":354,"author":{"gitId":"-"},"content":"        return load()"},{"lineNumber":355,"author":{"gitId":"-"},"content":"                .filter(\"courseId \u003d\", courseId)"},{"lineNumber":356,"author":{"gitId":"-"},"content":"                .filter(\"isDisplayedToStudents \u003d\", true)"},{"lineNumber":357,"author":{"gitId":"-"},"content":"                .list();"},{"lineNumber":358,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":359,"author":{"gitId":"-"},"content":""},{"lineNumber":360,"author":{"gitId":"-"},"content":"    private Instructor getInstructorEntityForRegistrationKey(String key) {"},{"lineNumber":361,"author":{"gitId":"-"},"content":"        return load().filter(\"registrationKey \u003d\", key).first().now();"},{"lineNumber":362,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":363,"author":{"gitId":"-"},"content":""},{"lineNumber":364,"author":{"gitId":"-"},"content":"    private List\u003cInstructor\u003e getInstructorEntitiesForGoogleId(String googleId) {"},{"lineNumber":365,"author":{"gitId":"-"},"content":"        return load().filter(\"googleId \u003d\", googleId).list();"},{"lineNumber":366,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":367,"author":{"gitId":"-"},"content":""},{"lineNumber":368,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":369,"author":{"gitId":"-"},"content":"     * Omits instructors with isArchived \u003d\u003d omitArchived."},{"lineNumber":370,"author":{"gitId":"-"},"content":"     * This means that the corresponding course is archived by the instructor."},{"lineNumber":371,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":372,"author":{"gitId":"-"},"content":"    private List\u003cInstructor\u003e getInstructorEntitiesForGoogleId(String googleId, boolean omitArchived) {"},{"lineNumber":373,"author":{"gitId":"-"},"content":"        if (omitArchived) {"},{"lineNumber":374,"author":{"gitId":"-"},"content":"            return load()"},{"lineNumber":375,"author":{"gitId":"-"},"content":"                    .filter(\"googleId \u003d\", googleId)"},{"lineNumber":376,"author":{"gitId":"Derek-Hardy"},"content":"                    .filter(\"isArchived \u003d\", false)"},{"lineNumber":377,"author":{"gitId":"-"},"content":"                    .list();"},{"lineNumber":378,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":379,"author":{"gitId":"-"},"content":"        return getInstructorEntitiesForGoogleId(googleId);"},{"lineNumber":380,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":381,"author":{"gitId":"-"},"content":""},{"lineNumber":382,"author":{"gitId":"-"},"content":"    private List\u003cInstructor\u003e getInstructorEntitiesForCourse(String courseId) {"},{"lineNumber":383,"author":{"gitId":"-"},"content":"        return load().filter(\"courseId \u003d\", courseId).list();"},{"lineNumber":384,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":385,"author":{"gitId":"-"},"content":""},{"lineNumber":386,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":387,"author":{"gitId":"-"},"content":"    LoadType\u003cInstructor\u003e load() {"},{"lineNumber":388,"author":{"gitId":"-"},"content":"        return ofy().load().type(Instructor.class);"},{"lineNumber":389,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":390,"author":{"gitId":"-"},"content":""},{"lineNumber":391,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":392,"author":{"gitId":"-"},"content":"    boolean hasExistingEntities(InstructorAttributes entityToCreate) {"},{"lineNumber":393,"author":{"gitId":"-"},"content":"        // cannot use direct key query as email of an instructor can be changed"},{"lineNumber":394,"author":{"gitId":"-"},"content":"        return !load()"},{"lineNumber":395,"author":{"gitId":"-"},"content":"                .filter(\"courseId \u003d\", entityToCreate.getCourseId())"},{"lineNumber":396,"author":{"gitId":"-"},"content":"                .filter(\"email \u003d\", entityToCreate.getEmail())"},{"lineNumber":397,"author":{"gitId":"-"},"content":"                .keys()"},{"lineNumber":398,"author":{"gitId":"-"},"content":"                .list()"},{"lineNumber":399,"author":{"gitId":"-"},"content":"                .isEmpty();"},{"lineNumber":400,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":401,"author":{"gitId":"-"},"content":""},{"lineNumber":402,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":403,"author":{"gitId":"-"},"content":"    InstructorAttributes makeAttributes(Instructor entity) {"},{"lineNumber":404,"author":{"gitId":"-"},"content":"        Assumption.assertNotNull(entity);"},{"lineNumber":405,"author":{"gitId":"-"},"content":""},{"lineNumber":406,"author":{"gitId":"-"},"content":"        return InstructorAttributes.valueOf(entity);"},{"lineNumber":407,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":408,"author":{"gitId":"-"},"content":""},{"lineNumber":409,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"Derek-Hardy":1,"-":408}},{"path":"src/main/java/teammates/storage/api/OfyHelper.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.storage.api;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import javax.servlet.ServletContextEvent;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import javax.servlet.ServletContextListener;"},{"lineNumber":5,"author":{"gitId":"-"},"content":""},{"lineNumber":6,"author":{"gitId":"Derek-Hardy"},"content":"import com.google.cloud.datastore.DatastoreOptions;"},{"lineNumber":7,"author":{"gitId":"Derek-Hardy"},"content":"import com.googlecode.objectify.ObjectifyFactory;"},{"lineNumber":8,"author":{"gitId":"-"},"content":"import com.googlecode.objectify.ObjectifyService;"},{"lineNumber":9,"author":{"gitId":"-"},"content":""},{"lineNumber":10,"author":{"gitId":"Derek-Hardy"},"content":"import teammates.common.util.Config;"},{"lineNumber":11,"author":{"gitId":"-"},"content":"import teammates.storage.entity.Account;"},{"lineNumber":12,"author":{"gitId":"-"},"content":"import teammates.storage.entity.BaseEntity;"},{"lineNumber":13,"author":{"gitId":"-"},"content":"import teammates.storage.entity.Course;"},{"lineNumber":14,"author":{"gitId":"-"},"content":"import teammates.storage.entity.CourseStudent;"},{"lineNumber":15,"author":{"gitId":"-"},"content":"import teammates.storage.entity.FeedbackQuestion;"},{"lineNumber":16,"author":{"gitId":"-"},"content":"import teammates.storage.entity.FeedbackResponse;"},{"lineNumber":17,"author":{"gitId":"-"},"content":"import teammates.storage.entity.FeedbackResponseComment;"},{"lineNumber":18,"author":{"gitId":"-"},"content":"import teammates.storage.entity.FeedbackSession;"},{"lineNumber":19,"author":{"gitId":"-"},"content":"import teammates.storage.entity.Instructor;"},{"lineNumber":20,"author":{"gitId":"-"},"content":"import teammates.storage.entity.StudentProfile;"},{"lineNumber":21,"author":{"gitId":"-"},"content":""},{"lineNumber":22,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":23,"author":{"gitId":"-"},"content":" * Setup in web.xml to register Objectify at application startup."},{"lineNumber":24,"author":{"gitId":"-"},"content":" **/"},{"lineNumber":25,"author":{"gitId":"-"},"content":"public class OfyHelper implements ServletContextListener {"},{"lineNumber":26,"author":{"gitId":"-"},"content":""},{"lineNumber":27,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":28,"author":{"gitId":"-"},"content":"     * Register entity classes in Objectify service."},{"lineNumber":29,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":30,"author":{"gitId":"-"},"content":"    public static void registerEntityClasses() {"},{"lineNumber":31,"author":{"gitId":"-"},"content":"        ObjectifyService.register(Account.class);"},{"lineNumber":32,"author":{"gitId":"-"},"content":"        ObjectifyService.register(Course.class);"},{"lineNumber":33,"author":{"gitId":"-"},"content":"        ObjectifyService.register(CourseStudent.class);"},{"lineNumber":34,"author":{"gitId":"-"},"content":"        ObjectifyService.register(FeedbackQuestion.class);"},{"lineNumber":35,"author":{"gitId":"-"},"content":"        ObjectifyService.register(FeedbackResponse.class);"},{"lineNumber":36,"author":{"gitId":"-"},"content":"        ObjectifyService.register(FeedbackResponseComment.class);"},{"lineNumber":37,"author":{"gitId":"-"},"content":"        ObjectifyService.register(FeedbackSession.class);"},{"lineNumber":38,"author":{"gitId":"-"},"content":"        ObjectifyService.register(Instructor.class);"},{"lineNumber":39,"author":{"gitId":"-"},"content":"        ObjectifyService.register(StudentProfile.class);"},{"lineNumber":40,"author":{"gitId":"-"},"content":"        // enable the ability to use java.time.Instant to issue query"},{"lineNumber":41,"author":{"gitId":"-"},"content":"        ObjectifyService.factory().getTranslators().add(new BaseEntity.InstantTranslatorFactory());"},{"lineNumber":42,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":43,"author":{"gitId":"-"},"content":""},{"lineNumber":44,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":45,"author":{"gitId":"-"},"content":"    public void contextInitialized(ServletContextEvent event) {"},{"lineNumber":46,"author":{"gitId":"-"},"content":"        // Invoked by GAE at application startup."},{"lineNumber":47,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":48,"author":{"gitId":"Derek-Hardy"},"content":"        // PRODUCTION"},{"lineNumber":49,"author":{"gitId":"Derek-Hardy"},"content":"        //ObjectifyService.init();"},{"lineNumber":50,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":51,"author":{"gitId":"Derek-Hardy"},"content":"        // TEST"},{"lineNumber":52,"author":{"gitId":"Derek-Hardy"},"content":"        ObjectifyService.init(new ObjectifyFactory("},{"lineNumber":53,"author":{"gitId":"Derek-Hardy"},"content":"                DatastoreOptions.newBuilder()"},{"lineNumber":54,"author":{"gitId":"Derek-Hardy"},"content":"                        .setHost(\"http://localhost:\" + Config.APP_LOCALDATASTORE_PORT)"},{"lineNumber":55,"author":{"gitId":"Derek-Hardy"},"content":"                        .setProjectId(Config.APP_ID)"},{"lineNumber":56,"author":{"gitId":"Derek-Hardy"},"content":"                        .build()"},{"lineNumber":57,"author":{"gitId":"Derek-Hardy"},"content":"                        .getService()"},{"lineNumber":58,"author":{"gitId":"Derek-Hardy"},"content":"        ));"},{"lineNumber":59,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":60,"author":{"gitId":"-"},"content":"        registerEntityClasses();"},{"lineNumber":61,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":62,"author":{"gitId":"-"},"content":""},{"lineNumber":63,"author":{"gitId":"-"},"content":"    @Override"},{"lineNumber":64,"author":{"gitId":"-"},"content":"    public void contextDestroyed(ServletContextEvent event) {"},{"lineNumber":65,"author":{"gitId":"-"},"content":"        // GAE does not currently invoke this method."},{"lineNumber":66,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":67,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"Derek-Hardy":16,"-":51}},{"path":"src/main/java/teammates/storage/entity/BaseEntity.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.storage.entity;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import java.time.Instant;"},{"lineNumber":4,"author":{"gitId":"-"},"content":""},{"lineNumber":5,"author":{"gitId":"Derek-Hardy"},"content":"import com.google.cloud.Timestamp;"},{"lineNumber":6,"author":{"gitId":"Derek-Hardy"},"content":"import com.google.cloud.datastore.TimestampValue;"},{"lineNumber":7,"author":{"gitId":"Derek-Hardy"},"content":"import com.google.cloud.datastore.Value;"},{"lineNumber":8,"author":{"gitId":"Derek-Hardy"},"content":"import com.google.cloud.datastore.ValueType;"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import com.googlecode.objectify.impl.Path;"},{"lineNumber":10,"author":{"gitId":"-"},"content":"import com.googlecode.objectify.impl.translate.CreateContext;"},{"lineNumber":11,"author":{"gitId":"-"},"content":"import com.googlecode.objectify.impl.translate.LoadContext;"},{"lineNumber":12,"author":{"gitId":"-"},"content":"import com.googlecode.objectify.impl.translate.SaveContext;"},{"lineNumber":13,"author":{"gitId":"-"},"content":"import com.googlecode.objectify.impl.translate.TypeKey;"},{"lineNumber":14,"author":{"gitId":"-"},"content":"import com.googlecode.objectify.impl.translate.ValueTranslator;"},{"lineNumber":15,"author":{"gitId":"-"},"content":"import com.googlecode.objectify.impl.translate.ValueTranslatorFactory;"},{"lineNumber":16,"author":{"gitId":"-"},"content":""},{"lineNumber":17,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":18,"author":{"gitId":"-"},"content":" * Base class for all entities persisted to the Datastore."},{"lineNumber":19,"author":{"gitId":"-"},"content":" */"},{"lineNumber":20,"author":{"gitId":"-"},"content":"public class BaseEntity {"},{"lineNumber":21,"author":{"gitId":"-"},"content":""},{"lineNumber":22,"author":{"gitId":"-"},"content":"    BaseEntity() {"},{"lineNumber":23,"author":{"gitId":"-"},"content":"        // instantiate as child classes"},{"lineNumber":24,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":25,"author":{"gitId":"-"},"content":""},{"lineNumber":26,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":27,"author":{"gitId":"Derek-Hardy"},"content":"     * Translates between `java.time.Instant` in entity class and `ValueType.TIMESTAMP` in Google Cloud Datastore."},{"lineNumber":28,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":29,"author":{"gitId":"Derek-Hardy"},"content":"     * \u003cp\u003eSee \u003ca href\u003d\"https://github.com/objectify/objectify/blob/v6/src/main/java/com/googlecode/objectify/annotation/Translate.java\"\u003e@Translate annotation\u003c/a\u003e,"},{"lineNumber":30,"author":{"gitId":"Derek-Hardy"},"content":"     * \u003ca href\u003d\"https://github.com/objectify/objectify/blob/v6/src/main/java/com/googlecode/objectify/impl/translate/ValueTranslator.java\"\u003eValueTranslator\u003c/a\u003e"},{"lineNumber":31,"author":{"gitId":"Derek-Hardy"},"content":"     * and \u003ca href\u003d\"https://github.com/objectify/objectify/blob/v6/src/main/java/com/googlecode/objectify/impl/translate/ValueTranslatorFactory.java\"\u003eValueTranslatorFactory\u003c/a\u003e\u003c/p\u003e"},{"lineNumber":32,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":33,"author":{"gitId":"Derek-Hardy"},"content":"    public static class InstantTranslatorFactory extends ValueTranslatorFactory\u003cInstant, Timestamp\u003e {"},{"lineNumber":34,"author":{"gitId":"-"},"content":""},{"lineNumber":35,"author":{"gitId":"-"},"content":"        public InstantTranslatorFactory() {"},{"lineNumber":36,"author":{"gitId":"-"},"content":"            super(Instant.class);"},{"lineNumber":37,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":38,"author":{"gitId":"-"},"content":""},{"lineNumber":39,"author":{"gitId":"-"},"content":"        @Override"},{"lineNumber":40,"author":{"gitId":"Derek-Hardy"},"content":"        protected ValueTranslator\u003cInstant, Timestamp\u003e createValueTranslator(TypeKey\u003cInstant\u003e tk,"},{"lineNumber":41,"author":{"gitId":"Derek-Hardy"},"content":"                                                                            CreateContext ctx, Path path) {"},{"lineNumber":42,"author":{"gitId":"Derek-Hardy"},"content":"            return new ValueTranslator\u003cInstant, Timestamp\u003e(ValueType.TIMESTAMP) {"},{"lineNumber":43,"author":{"gitId":"-"},"content":"                @Override"},{"lineNumber":44,"author":{"gitId":"Derek-Hardy"},"content":"                protected Instant loadValue(Value\u003cTimestamp\u003e value, LoadContext ctx, Path path) {"},{"lineNumber":45,"author":{"gitId":"Derek-Hardy"},"content":"                    return value \u003d\u003d null ? null : value.get().toDate().toInstant();"},{"lineNumber":46,"author":{"gitId":"-"},"content":"                }"},{"lineNumber":47,"author":{"gitId":"-"},"content":""},{"lineNumber":48,"author":{"gitId":"-"},"content":"                @Override"},{"lineNumber":49,"author":{"gitId":"Derek-Hardy"},"content":"                protected Value\u003cTimestamp\u003e saveValue(Instant value, SaveContext ctx, Path path) {"},{"lineNumber":50,"author":{"gitId":"Derek-Hardy"},"content":"                    return value \u003d\u003d null ? null : TimestampValue.of(Timestamp.of(java.util.Date.from(value)));"},{"lineNumber":51,"author":{"gitId":"-"},"content":"                }"},{"lineNumber":52,"author":{"gitId":"-"},"content":"            };"},{"lineNumber":53,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":54,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":55,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"Derek-Hardy":16,"-":39}},{"path":"src/main/java/teammates/storage/entity/FeedbackQuestion.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.storage.entity;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"-"},"content":"import java.time.Instant;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import java.util.ArrayList;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import java.util.List;"},{"lineNumber":6,"author":{"gitId":"-"},"content":""},{"lineNumber":7,"author":{"gitId":"-"},"content":"import com.google.appengine.api.datastore.Text;"},{"lineNumber":8,"author":{"gitId":"-"},"content":"import com.googlecode.objectify.Key;"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import com.googlecode.objectify.annotation.Entity;"},{"lineNumber":10,"author":{"gitId":"-"},"content":"import com.googlecode.objectify.annotation.Id;"},{"lineNumber":11,"author":{"gitId":"-"},"content":"import com.googlecode.objectify.annotation.Index;"},{"lineNumber":12,"author":{"gitId":"-"},"content":"import com.googlecode.objectify.annotation.OnSave;"},{"lineNumber":13,"author":{"gitId":"-"},"content":"import com.googlecode.objectify.annotation.Translate;"},{"lineNumber":14,"author":{"gitId":"-"},"content":"import com.googlecode.objectify.annotation.Unindex;"},{"lineNumber":15,"author":{"gitId":"-"},"content":""},{"lineNumber":16,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.FeedbackParticipantType;"},{"lineNumber":17,"author":{"gitId":"-"},"content":"import teammates.common.datatransfer.questions.FeedbackQuestionType;"},{"lineNumber":18,"author":{"gitId":"-"},"content":"import teammates.common.util.Const;"},{"lineNumber":19,"author":{"gitId":"-"},"content":""},{"lineNumber":20,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":21,"author":{"gitId":"-"},"content":" * Represents a feedback question."},{"lineNumber":22,"author":{"gitId":"-"},"content":" */"},{"lineNumber":23,"author":{"gitId":"-"},"content":"@Entity"},{"lineNumber":24,"author":{"gitId":"-"},"content":"@Index"},{"lineNumber":25,"author":{"gitId":"-"},"content":"public class FeedbackQuestion extends BaseEntity {"},{"lineNumber":26,"author":{"gitId":"-"},"content":""},{"lineNumber":27,"author":{"gitId":"-"},"content":"    // TODO: where applicable, we should specify fields as @Unindex to prevent GAE from building unnecessary indexes."},{"lineNumber":28,"author":{"gitId":"-"},"content":""},{"lineNumber":29,"author":{"gitId":"-"},"content":"    @Id"},{"lineNumber":30,"author":{"gitId":"-"},"content":"    private Long feedbackQuestionId;"},{"lineNumber":31,"author":{"gitId":"-"},"content":""},{"lineNumber":32,"author":{"gitId":"-"},"content":"    private String feedbackSessionName;"},{"lineNumber":33,"author":{"gitId":"-"},"content":""},{"lineNumber":34,"author":{"gitId":"-"},"content":"    private String courseId;"},{"lineNumber":35,"author":{"gitId":"-"},"content":""},{"lineNumber":36,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":37,"author":{"gitId":"-"},"content":"     * Serialized {@link teammates.common.datatransfer.questions.FeedbackQuestionDetails} stored as a string."},{"lineNumber":38,"author":{"gitId":"-"},"content":"     *"},{"lineNumber":39,"author":{"gitId":"-"},"content":"     * @see teammates.common.datatransfer.attributes.FeedbackQuestionAttributes#getQuestionDetails()"},{"lineNumber":40,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":41,"author":{"gitId":"-"},"content":"    @Unindex"},{"lineNumber":42,"author":{"gitId":"-"},"content":"    private Text questionText;"},{"lineNumber":43,"author":{"gitId":"-"},"content":""},{"lineNumber":44,"author":{"gitId":"-"},"content":"    @Unindex"},{"lineNumber":45,"author":{"gitId":"-"},"content":"    private Text questionDescription;"},{"lineNumber":46,"author":{"gitId":"-"},"content":""},{"lineNumber":47,"author":{"gitId":"-"},"content":"    private int questionNumber;"},{"lineNumber":48,"author":{"gitId":"-"},"content":""},{"lineNumber":49,"author":{"gitId":"-"},"content":"    private FeedbackQuestionType questionType;"},{"lineNumber":50,"author":{"gitId":"-"},"content":""},{"lineNumber":51,"author":{"gitId":"-"},"content":"    private FeedbackParticipantType giverType;"},{"lineNumber":52,"author":{"gitId":"-"},"content":""},{"lineNumber":53,"author":{"gitId":"-"},"content":"    private FeedbackParticipantType recipientType;"},{"lineNumber":54,"author":{"gitId":"-"},"content":""},{"lineNumber":55,"author":{"gitId":"-"},"content":"    // Check for consistency in questionLogic/questionAttributes."},{"lineNumber":56,"author":{"gitId":"-"},"content":"    // (i.e. if type is own team, numberOfEntities must \u003d 1)."},{"lineNumber":57,"author":{"gitId":"-"},"content":"    private int numberOfEntitiesToGiveFeedbackTo;"},{"lineNumber":58,"author":{"gitId":"-"},"content":""},{"lineNumber":59,"author":{"gitId":"-"},"content":"    private List\u003cFeedbackParticipantType\u003e showResponsesTo \u003d new ArrayList\u003c\u003e();"},{"lineNumber":60,"author":{"gitId":"-"},"content":""},{"lineNumber":61,"author":{"gitId":"-"},"content":"    private List\u003cFeedbackParticipantType\u003e showGiverNameTo \u003d new ArrayList\u003c\u003e();"},{"lineNumber":62,"author":{"gitId":"-"},"content":""},{"lineNumber":63,"author":{"gitId":"-"},"content":"    private List\u003cFeedbackParticipantType\u003e showRecipientNameTo \u003d new ArrayList\u003c\u003e();"},{"lineNumber":64,"author":{"gitId":"-"},"content":""},{"lineNumber":65,"author":{"gitId":"-"},"content":"    @Translate(InstantTranslatorFactory.class)"},{"lineNumber":66,"author":{"gitId":"-"},"content":"    private Instant createdAt;"},{"lineNumber":67,"author":{"gitId":"-"},"content":""},{"lineNumber":68,"author":{"gitId":"-"},"content":"    @Translate(InstantTranslatorFactory.class)"},{"lineNumber":69,"author":{"gitId":"-"},"content":"    private Instant updatedAt;"},{"lineNumber":70,"author":{"gitId":"-"},"content":""},{"lineNumber":71,"author":{"gitId":"-"},"content":"    @SuppressWarnings(\"unused\")"},{"lineNumber":72,"author":{"gitId":"-"},"content":"    private FeedbackQuestion() {"},{"lineNumber":73,"author":{"gitId":"-"},"content":"        // required by Objectify"},{"lineNumber":74,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":75,"author":{"gitId":"-"},"content":""},{"lineNumber":76,"author":{"gitId":"-"},"content":"    public FeedbackQuestion("},{"lineNumber":77,"author":{"gitId":"-"},"content":"            String feedbackSessionName, String courseId,"},{"lineNumber":78,"author":{"gitId":"-"},"content":"            String questionText, String questionDescription, int questionNumber, FeedbackQuestionType questionType,"},{"lineNumber":79,"author":{"gitId":"-"},"content":"            FeedbackParticipantType giverType,"},{"lineNumber":80,"author":{"gitId":"-"},"content":"            FeedbackParticipantType recipientType,"},{"lineNumber":81,"author":{"gitId":"-"},"content":"            int numberOfEntitiesToGiveFeedbackTo,"},{"lineNumber":82,"author":{"gitId":"-"},"content":"            List\u003cFeedbackParticipantType\u003e showResponsesTo,"},{"lineNumber":83,"author":{"gitId":"-"},"content":"            List\u003cFeedbackParticipantType\u003e showGiverNameTo,"},{"lineNumber":84,"author":{"gitId":"-"},"content":"            List\u003cFeedbackParticipantType\u003e showRecipientNameTo) {"},{"lineNumber":85,"author":{"gitId":"-"},"content":""},{"lineNumber":86,"author":{"gitId":"-"},"content":"        this.feedbackQuestionId \u003d null; // Allow GAE to generate key."},{"lineNumber":87,"author":{"gitId":"-"},"content":"        this.feedbackSessionName \u003d feedbackSessionName;"},{"lineNumber":88,"author":{"gitId":"-"},"content":"        this.courseId \u003d courseId;"},{"lineNumber":89,"author":{"gitId":"-"},"content":"        setQuestionText(questionText);"},{"lineNumber":90,"author":{"gitId":"-"},"content":"        setQuestionDescription(questionDescription);"},{"lineNumber":91,"author":{"gitId":"-"},"content":"        this.questionNumber \u003d questionNumber;"},{"lineNumber":92,"author":{"gitId":"-"},"content":"        this.questionType \u003d questionType;"},{"lineNumber":93,"author":{"gitId":"-"},"content":"        this.giverType \u003d giverType;"},{"lineNumber":94,"author":{"gitId":"-"},"content":"        this.recipientType \u003d recipientType;"},{"lineNumber":95,"author":{"gitId":"-"},"content":"        this.numberOfEntitiesToGiveFeedbackTo \u003d numberOfEntitiesToGiveFeedbackTo;"},{"lineNumber":96,"author":{"gitId":"-"},"content":"        this.showResponsesTo \u003d showResponsesTo \u003d\u003d null ? new ArrayList\u003c\u003e() : showResponsesTo;"},{"lineNumber":97,"author":{"gitId":"-"},"content":"        this.showGiverNameTo \u003d showGiverNameTo \u003d\u003d null ? new ArrayList\u003c\u003e() : showGiverNameTo;"},{"lineNumber":98,"author":{"gitId":"-"},"content":"        this.showRecipientNameTo \u003d"},{"lineNumber":99,"author":{"gitId":"-"},"content":"                showRecipientNameTo \u003d\u003d null ? new ArrayList\u003c\u003e() : showRecipientNameTo;"},{"lineNumber":100,"author":{"gitId":"-"},"content":"        this.setCreatedAt(Instant.now());"},{"lineNumber":101,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":102,"author":{"gitId":"-"},"content":""},{"lineNumber":103,"author":{"gitId":"-"},"content":"    public Instant getCreatedAt() {"},{"lineNumber":104,"author":{"gitId":"-"},"content":"        return createdAt \u003d\u003d null ? Const.TIME_REPRESENTS_DEFAULT_TIMESTAMP : createdAt;"},{"lineNumber":105,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":106,"author":{"gitId":"-"},"content":""},{"lineNumber":107,"author":{"gitId":"-"},"content":"    public Instant getUpdatedAt() {"},{"lineNumber":108,"author":{"gitId":"-"},"content":"        return updatedAt \u003d\u003d null ? Const.TIME_REPRESENTS_DEFAULT_TIMESTAMP : updatedAt;"},{"lineNumber":109,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":110,"author":{"gitId":"-"},"content":""},{"lineNumber":111,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":112,"author":{"gitId":"-"},"content":"     * Sets the createdAt timestamp of the question."},{"lineNumber":113,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":114,"author":{"gitId":"-"},"content":"    public void setCreatedAt(Instant newDate) {"},{"lineNumber":115,"author":{"gitId":"-"},"content":"        this.createdAt \u003d newDate;"},{"lineNumber":116,"author":{"gitId":"-"},"content":"        setLastUpdate(newDate);"},{"lineNumber":117,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":118,"author":{"gitId":"-"},"content":""},{"lineNumber":119,"author":{"gitId":"-"},"content":"    public void setLastUpdate(Instant newDate) {"},{"lineNumber":120,"author":{"gitId":"-"},"content":"        this.updatedAt \u003d newDate;"},{"lineNumber":121,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":122,"author":{"gitId":"-"},"content":""},{"lineNumber":123,"author":{"gitId":"-"},"content":"    public String getId() {"},{"lineNumber":124,"author":{"gitId":"Derek-Hardy"},"content":"        return Key.create(FeedbackQuestion.class, feedbackQuestionId).toLegacyUrlSafe();"},{"lineNumber":125,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":126,"author":{"gitId":"-"},"content":""},{"lineNumber":127,"author":{"gitId":"-"},"content":"    public void setFeedbackQuestionId(Long feedbackQuestionId) {"},{"lineNumber":128,"author":{"gitId":"-"},"content":"        this.feedbackQuestionId \u003d feedbackQuestionId;"},{"lineNumber":129,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":130,"author":{"gitId":"-"},"content":""},{"lineNumber":131,"author":{"gitId":"-"},"content":"    public String getFeedbackSessionName() {"},{"lineNumber":132,"author":{"gitId":"-"},"content":"        return feedbackSessionName;"},{"lineNumber":133,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":134,"author":{"gitId":"-"},"content":""},{"lineNumber":135,"author":{"gitId":"-"},"content":"    public void setFeedbackSessionName(String feedbackSessionName) {"},{"lineNumber":136,"author":{"gitId":"-"},"content":"        this.feedbackSessionName \u003d feedbackSessionName;"},{"lineNumber":137,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":138,"author":{"gitId":"-"},"content":""},{"lineNumber":139,"author":{"gitId":"-"},"content":"    public String getCourseId() {"},{"lineNumber":140,"author":{"gitId":"-"},"content":"        return courseId;"},{"lineNumber":141,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":142,"author":{"gitId":"-"},"content":""},{"lineNumber":143,"author":{"gitId":"-"},"content":"    public void setCourseId(String courseId) {"},{"lineNumber":144,"author":{"gitId":"-"},"content":"        this.courseId \u003d courseId;"},{"lineNumber":145,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":146,"author":{"gitId":"-"},"content":""},{"lineNumber":147,"author":{"gitId":"-"},"content":"    public String getQuestionMetaData() {"},{"lineNumber":148,"author":{"gitId":"-"},"content":"        return questionText \u003d\u003d null ? null : questionText.getValue();"},{"lineNumber":149,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":150,"author":{"gitId":"-"},"content":""},{"lineNumber":151,"author":{"gitId":"-"},"content":"    public void setQuestionText(String questionText) {"},{"lineNumber":152,"author":{"gitId":"-"},"content":"        this.questionText \u003d questionText \u003d\u003d null ? null : new Text(questionText);"},{"lineNumber":153,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":154,"author":{"gitId":"-"},"content":""},{"lineNumber":155,"author":{"gitId":"-"},"content":"    public String getQuestionDescription() {"},{"lineNumber":156,"author":{"gitId":"-"},"content":"        return questionDescription \u003d\u003d null ? null : questionDescription.getValue();"},{"lineNumber":157,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":158,"author":{"gitId":"-"},"content":""},{"lineNumber":159,"author":{"gitId":"-"},"content":"    public void setQuestionDescription(String questionDescription) {"},{"lineNumber":160,"author":{"gitId":"-"},"content":"        this.questionDescription \u003d questionDescription \u003d\u003d null ? null : new Text(questionDescription);"},{"lineNumber":161,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":162,"author":{"gitId":"-"},"content":""},{"lineNumber":163,"author":{"gitId":"-"},"content":"    public FeedbackQuestionType getQuestionType() {"},{"lineNumber":164,"author":{"gitId":"-"},"content":"        return questionType;"},{"lineNumber":165,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":166,"author":{"gitId":"-"},"content":""},{"lineNumber":167,"author":{"gitId":"-"},"content":"    public void setQuestionType(FeedbackQuestionType questionType) {"},{"lineNumber":168,"author":{"gitId":"-"},"content":"        this.questionType \u003d questionType;"},{"lineNumber":169,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":170,"author":{"gitId":"-"},"content":""},{"lineNumber":171,"author":{"gitId":"-"},"content":"    public int getQuestionNumber() {"},{"lineNumber":172,"author":{"gitId":"-"},"content":"        return questionNumber;"},{"lineNumber":173,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":174,"author":{"gitId":"-"},"content":""},{"lineNumber":175,"author":{"gitId":"-"},"content":"    public void setQuestionNumber(int questionNumber) {"},{"lineNumber":176,"author":{"gitId":"-"},"content":"        this.questionNumber \u003d questionNumber;"},{"lineNumber":177,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":178,"author":{"gitId":"-"},"content":""},{"lineNumber":179,"author":{"gitId":"-"},"content":"    public FeedbackParticipantType getGiverType() {"},{"lineNumber":180,"author":{"gitId":"-"},"content":"        return giverType;"},{"lineNumber":181,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":182,"author":{"gitId":"-"},"content":""},{"lineNumber":183,"author":{"gitId":"-"},"content":"    public void setGiverType(FeedbackParticipantType giverType) {"},{"lineNumber":184,"author":{"gitId":"-"},"content":"        this.giverType \u003d giverType;"},{"lineNumber":185,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":186,"author":{"gitId":"-"},"content":""},{"lineNumber":187,"author":{"gitId":"-"},"content":"    public FeedbackParticipantType getRecipientType() {"},{"lineNumber":188,"author":{"gitId":"-"},"content":"        return recipientType;"},{"lineNumber":189,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":190,"author":{"gitId":"-"},"content":""},{"lineNumber":191,"author":{"gitId":"-"},"content":"    public void setRecipientType(FeedbackParticipantType recipientType) {"},{"lineNumber":192,"author":{"gitId":"-"},"content":"        this.recipientType \u003d recipientType;"},{"lineNumber":193,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":194,"author":{"gitId":"-"},"content":""},{"lineNumber":195,"author":{"gitId":"-"},"content":"    public int getNumberOfEntitiesToGiveFeedbackTo() {"},{"lineNumber":196,"author":{"gitId":"-"},"content":"        return numberOfEntitiesToGiveFeedbackTo;"},{"lineNumber":197,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":198,"author":{"gitId":"-"},"content":""},{"lineNumber":199,"author":{"gitId":"-"},"content":"    public void setNumberOfEntitiesToGiveFeedbackTo("},{"lineNumber":200,"author":{"gitId":"-"},"content":"            int numberOfEntitiesToGiveFeedbackTo) {"},{"lineNumber":201,"author":{"gitId":"-"},"content":"        this.numberOfEntitiesToGiveFeedbackTo \u003d numberOfEntitiesToGiveFeedbackTo;"},{"lineNumber":202,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":203,"author":{"gitId":"-"},"content":""},{"lineNumber":204,"author":{"gitId":"-"},"content":"    public List\u003cFeedbackParticipantType\u003e getShowResponsesTo() {"},{"lineNumber":205,"author":{"gitId":"-"},"content":"        return showResponsesTo;"},{"lineNumber":206,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":207,"author":{"gitId":"-"},"content":""},{"lineNumber":208,"author":{"gitId":"-"},"content":"    public void setShowResponsesTo(List\u003cFeedbackParticipantType\u003e showResponsesTo) {"},{"lineNumber":209,"author":{"gitId":"-"},"content":"        this.showResponsesTo \u003d showResponsesTo;"},{"lineNumber":210,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":211,"author":{"gitId":"-"},"content":""},{"lineNumber":212,"author":{"gitId":"-"},"content":"    public List\u003cFeedbackParticipantType\u003e getShowGiverNameTo() {"},{"lineNumber":213,"author":{"gitId":"-"},"content":"        return showGiverNameTo;"},{"lineNumber":214,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":215,"author":{"gitId":"-"},"content":""},{"lineNumber":216,"author":{"gitId":"-"},"content":"    public void setShowGiverNameTo(List\u003cFeedbackParticipantType\u003e showGiverNameTo) {"},{"lineNumber":217,"author":{"gitId":"-"},"content":"        this.showGiverNameTo \u003d showGiverNameTo;"},{"lineNumber":218,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":219,"author":{"gitId":"-"},"content":""},{"lineNumber":220,"author":{"gitId":"-"},"content":"    public List\u003cFeedbackParticipantType\u003e getShowRecipientNameTo() {"},{"lineNumber":221,"author":{"gitId":"-"},"content":"        return showRecipientNameTo;"},{"lineNumber":222,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":223,"author":{"gitId":"-"},"content":""},{"lineNumber":224,"author":{"gitId":"-"},"content":"    public void setShowRecipientNameTo("},{"lineNumber":225,"author":{"gitId":"-"},"content":"            List\u003cFeedbackParticipantType\u003e showRecipientNameTo) {"},{"lineNumber":226,"author":{"gitId":"-"},"content":"        this.showRecipientNameTo \u003d showRecipientNameTo;"},{"lineNumber":227,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":228,"author":{"gitId":"-"},"content":""},{"lineNumber":229,"author":{"gitId":"-"},"content":"    /**"},{"lineNumber":230,"author":{"gitId":"-"},"content":"     * Updates the updatedAt timestamp when saving."},{"lineNumber":231,"author":{"gitId":"-"},"content":"     */"},{"lineNumber":232,"author":{"gitId":"-"},"content":"    @OnSave"},{"lineNumber":233,"author":{"gitId":"-"},"content":"    public void updateLastUpdateTimestamp() {"},{"lineNumber":234,"author":{"gitId":"-"},"content":"        this.setLastUpdate(Instant.now());"},{"lineNumber":235,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":236,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"Derek-Hardy":1,"-":235}},{"path":"src/test/java/teammates/test/BaseTestCaseWithObjectifyAccess.java","fileType":"java","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"package teammates.test;"},{"lineNumber":2,"author":{"gitId":"-"},"content":""},{"lineNumber":3,"author":{"gitId":"Derek-Hardy"},"content":"import java.io.IOException;"},{"lineNumber":4,"author":{"gitId":"Derek-Hardy"},"content":"import java.util.concurrent.TimeoutException;"},{"lineNumber":5,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":6,"author":{"gitId":"-"},"content":"import org.testng.annotations.AfterClass;"},{"lineNumber":7,"author":{"gitId":"Derek-Hardy"},"content":"import org.testng.annotations.AfterSuite;"},{"lineNumber":8,"author":{"gitId":"-"},"content":"import org.testng.annotations.BeforeClass;"},{"lineNumber":9,"author":{"gitId":"Derek-Hardy"},"content":"import org.testng.annotations.BeforeSuite;"},{"lineNumber":10,"author":{"gitId":"-"},"content":""},{"lineNumber":11,"author":{"gitId":"Derek-Hardy"},"content":"import com.google.cloud.datastore.DatastoreOptions;"},{"lineNumber":12,"author":{"gitId":"Derek-Hardy"},"content":"import com.google.cloud.datastore.testing.LocalDatastoreHelper;"},{"lineNumber":13,"author":{"gitId":"Derek-Hardy"},"content":"import com.googlecode.objectify.ObjectifyFactory;"},{"lineNumber":14,"author":{"gitId":"-"},"content":"import com.googlecode.objectify.ObjectifyService;"},{"lineNumber":15,"author":{"gitId":"-"},"content":"import com.googlecode.objectify.util.Closeable;"},{"lineNumber":16,"author":{"gitId":"-"},"content":""},{"lineNumber":17,"author":{"gitId":"Derek-Hardy"},"content":"import teammates.common.util.Config;"},{"lineNumber":18,"author":{"gitId":"-"},"content":"import teammates.storage.api.OfyHelper;"},{"lineNumber":19,"author":{"gitId":"-"},"content":""},{"lineNumber":20,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":21,"author":{"gitId":"-"},"content":" * Base class for all test cases which require access to the Objectify service. Requires a minimal GAE API environment"},{"lineNumber":22,"author":{"gitId":"-"},"content":" * registered for creation of Datastore Key objects used in defining parent-child relationships in entities."},{"lineNumber":23,"author":{"gitId":"-"},"content":" */"},{"lineNumber":24,"author":{"gitId":"-"},"content":"public abstract class BaseTestCaseWithObjectifyAccess extends BaseTestCaseWithMinimalGaeEnvironment {"},{"lineNumber":25,"author":{"gitId":"Derek-Hardy"},"content":"    private static final double DB_CONSISTENCY \u003d 1.0;"},{"lineNumber":26,"author":{"gitId":"Derek-Hardy"},"content":"    private static final int EMULATOR_PORT \u003d Integer.parseInt(Config.APP_LOCALDATASTORE_PORT);"},{"lineNumber":27,"author":{"gitId":"Derek-Hardy"},"content":"    private static LocalDatastoreHelper localDatastoreHelper;"},{"lineNumber":28,"author":{"gitId":"-"},"content":"    private Closeable closeable;"},{"lineNumber":29,"author":{"gitId":"-"},"content":""},{"lineNumber":30,"author":{"gitId":"Derek-Hardy"},"content":"    @BeforeSuite"},{"lineNumber":31,"author":{"gitId":"Derek-Hardy"},"content":"    public void setupLocalDatastoreHelper() throws IOException, InterruptedException {"},{"lineNumber":32,"author":{"gitId":"Derek-Hardy"},"content":"        localDatastoreHelper \u003d LocalDatastoreHelper.create(DB_CONSISTENCY, EMULATOR_PORT);"},{"lineNumber":33,"author":{"gitId":"Derek-Hardy"},"content":"        localDatastoreHelper.start();"},{"lineNumber":34,"author":{"gitId":"Derek-Hardy"},"content":"    }"},{"lineNumber":35,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":36,"author":{"gitId":"-"},"content":"    @BeforeClass"},{"lineNumber":37,"author":{"gitId":"-"},"content":"    public void setupObjectify() {"},{"lineNumber":38,"author":{"gitId":"Derek-Hardy"},"content":"        DatastoreOptions options \u003d localDatastoreHelper.getOptions();"},{"lineNumber":39,"author":{"gitId":"Derek-Hardy"},"content":"        ObjectifyService.init(new ObjectifyFactory("},{"lineNumber":40,"author":{"gitId":"Derek-Hardy"},"content":"                options.getService()"},{"lineNumber":41,"author":{"gitId":"Derek-Hardy"},"content":"        ));"},{"lineNumber":42,"author":{"gitId":"-"},"content":"        OfyHelper.registerEntityClasses();"},{"lineNumber":43,"author":{"gitId":"-"},"content":"        closeable \u003d ObjectifyService.begin();"},{"lineNumber":44,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":45,"author":{"gitId":"-"},"content":""},{"lineNumber":46,"author":{"gitId":"-"},"content":"    @AfterClass"},{"lineNumber":47,"author":{"gitId":"-"},"content":"    public void tearDownObjectify() {"},{"lineNumber":48,"author":{"gitId":"-"},"content":"        closeable.close();"},{"lineNumber":49,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":50,"author":{"gitId":"-"},"content":""},{"lineNumber":51,"author":{"gitId":"Derek-Hardy"},"content":"    @AfterClass"},{"lineNumber":52,"author":{"gitId":"Derek-Hardy"},"content":"    public void resetLocalDatastoreHelper() throws IOException {"},{"lineNumber":53,"author":{"gitId":"Derek-Hardy"},"content":"        localDatastoreHelper.reset();"},{"lineNumber":54,"author":{"gitId":"Derek-Hardy"},"content":"    }"},{"lineNumber":55,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":56,"author":{"gitId":"Derek-Hardy"},"content":"    @AfterSuite"},{"lineNumber":57,"author":{"gitId":"Derek-Hardy"},"content":"    public void tearDownLocalDatastoreHelper() throws InterruptedException, TimeoutException, IOException {"},{"lineNumber":58,"author":{"gitId":"Derek-Hardy"},"content":"        localDatastoreHelper.stop();"},{"lineNumber":59,"author":{"gitId":"Derek-Hardy"},"content":"    }"},{"lineNumber":60,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":61,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"Derek-Hardy":32,"-":29}},{"path":"src/web/app/pages-help/instructor-help-page/instructor-help-page.component.html","fileType":"html","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"\u003cdiv class\u003d\"flex-container\"\u003e"},{"lineNumber":2,"author":{"gitId":"Derek-Hardy"},"content":"  \u003cdiv class\u003d\"main-body col-lg-10\" #helpPage\u003e"},{"lineNumber":3,"author":{"gitId":"-"},"content":"    \u003cdiv id\u003d{{Sections.body}}\u003e"},{"lineNumber":4,"author":{"gitId":"-"},"content":"      \u003ch1 class\u003d\"color-orange\"\u003e Help for Instructors\u003c/h1\u003e"},{"lineNumber":5,"author":{"gitId":"-"},"content":"      \u003cdiv\u003e"},{"lineNumber":6,"author":{"gitId":"-"},"content":"        \u003cp\u003e"},{"lineNumber":7,"author":{"gitId":"-"},"content":"          Have questions about how to use TEAMMATES? This page answers some frequently asked questions."},{"lineNumber":8,"author":{"gitId":"-"},"content":"          \u003cbr\u003e If you are new to TEAMMATES, our \u003ca [tmRouterLink]\u003d\"instructorGettingStartedPath\"\u003eGetting Started\u003c/a\u003e guide will introduce you to the basic functions of TEAMMATES."},{"lineNumber":9,"author":{"gitId":"-"},"content":"          \u003cbr\u003e If you have any remaining questions, don\u0027t hesitate to \u003ca href\u003d\"mailto:{{ supportEmail }}\"\u003eemail us\u003c/a\u003e. We respond within 24 hours."},{"lineNumber":10,"author":{"gitId":"-"},"content":"        \u003c/p\u003e"},{"lineNumber":11,"author":{"gitId":"-"},"content":"        \u003cdiv class\u003d\"row\"\u003e"},{"lineNumber":12,"author":{"gitId":"-"},"content":"          \u003cdiv class\u003d\"col-md-9\"\u003e"},{"lineNumber":13,"author":{"gitId":"-"},"content":"            \u003cdiv class\u003d\"input-group\"\u003e"},{"lineNumber":14,"author":{"gitId":"-"},"content":"              \u003cinput type\u003d\"text\" [(ngModel)]\u003d\"searchTerm\" class\u003d\"form-control\" placeholder\u003d\"How can we help?\" (keyup.enter)\u003d\"search()\"\u003e"},{"lineNumber":15,"author":{"gitId":"-"},"content":"              \u003cbutton class\u003d\"btn btn-primary\" (click)\u003d\"search()\"\u003e\u003ci class\u003d\"fas fa-search\"\u003e\u003c/i\u003e\u003c/button\u003e"},{"lineNumber":16,"author":{"gitId":"-"},"content":"              \u003cbutton class\u003d\"btn btn-danger\" (click)\u003d\"clear()\"\u003e\u003ci class\u003d\"fas fa-times\"\u003e\u003c/i\u003e\u003c/button\u003e"},{"lineNumber":17,"author":{"gitId":"-"},"content":"            \u003c/div\u003e"},{"lineNumber":18,"author":{"gitId":"-"},"content":"          \u003c/div\u003e"},{"lineNumber":19,"author":{"gitId":"-"},"content":"        \u003c/div\u003e"},{"lineNumber":20,"author":{"gitId":"-"},"content":"        \u003cdiv *ngIf\u003d\"key\" style\u003d\"margin-top: 20px;\"\u003e"},{"lineNumber":21,"author":{"gitId":"-"},"content":"          \u003ch4\u003e{{ matchFound }} results found for \"{{ key }}\"\u003c/h4\u003e"},{"lineNumber":22,"author":{"gitId":"-"},"content":"        \u003c/div\u003e"},{"lineNumber":23,"author":{"gitId":"-"},"content":"        \u003chr/\u003e"},{"lineNumber":24,"author":{"gitId":"-"},"content":"      \u003c/div\u003e"},{"lineNumber":25,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":26,"author":{"gitId":"-"},"content":"    \u003cdiv id\u003d\"{{Sections.students}}\" class\u003d\"section-body\"\u003e"},{"lineNumber":27,"author":{"gitId":"-"},"content":"      \u003ctm-instructor-help-students-section #studentsHelpSection [key]\u003d\"key\" (matchFound)\u003d\"updateMatchFoundNumber($event)\"\u003e"},{"lineNumber":28,"author":{"gitId":"-"},"content":"      \u003c/tm-instructor-help-students-section\u003e"},{"lineNumber":29,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":30,"author":{"gitId":"-"},"content":"    \u003cdiv id\u003d\"{{Sections.courses}}\" class\u003d\"section-body\"\u003e"},{"lineNumber":31,"author":{"gitId":"-"},"content":"      \u003ctm-instructor-help-courses-section #coursesHelpSection [key]\u003d\"key\" (matchFound)\u003d\"updateMatchFoundNumber($event)\" (collapseStudentEditDetails)\u003d\"collapseStudentEditDetails()\"\u003e"},{"lineNumber":32,"author":{"gitId":"-"},"content":"      \u003c/tm-instructor-help-courses-section\u003e"},{"lineNumber":33,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":34,"author":{"gitId":"-"},"content":"    \u003cdiv id\u003d\"{{Sections.sessions}}\" class\u003d\"section-body\"\u003e"},{"lineNumber":35,"author":{"gitId":"-"},"content":"      \u003ctm-instructor-help-sessions-section #sessionsHelpSection [key]\u003d\"key\" (matchFound)\u003d\"updateMatchFoundNumber($event)\"\u003e"},{"lineNumber":36,"author":{"gitId":"-"},"content":"      \u003c/tm-instructor-help-sessions-section\u003e"},{"lineNumber":37,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":38,"author":{"gitId":"-"},"content":"    \u003cdiv id\u003d\"{{Sections.questions}}\" class\u003d\"section-body\"\u003e"},{"lineNumber":39,"author":{"gitId":"-"},"content":"      \u003ctm-instructor-help-questions-section #questionsHelpSection [key]\u003d\"key\" (matchFound)\u003d\"updateMatchFoundNumber($event)\" (collapsePeerEvalTips)\u003d\"collapsePeerEvalTips()\"\u003e"},{"lineNumber":40,"author":{"gitId":"-"},"content":"      \u003c/tm-instructor-help-questions-section\u003e"},{"lineNumber":41,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":42,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":43,"author":{"gitId":"-"},"content":""},{"lineNumber":44,"author":{"gitId":"Derek-Hardy"},"content":"  \u003cdiv class\u003d\"side-nav container-fluid col-lg-2\"\u003e"},{"lineNumber":45,"author":{"gitId":"-"},"content":"    \u003cp\u003e\u003cb\u003e"},{"lineNumber":46,"author":{"gitId":"-"},"content":"      Browse by topic:"},{"lineNumber":47,"author":{"gitId":"-"},"content":"      \u003cbr\u003e"},{"lineNumber":48,"author":{"gitId":"-"},"content":"    \u003c/b\u003e\u003c/p\u003e"},{"lineNumber":49,"author":{"gitId":"-"},"content":"    \u003cul class\u003d\"nav nav-pills flex-column\"\u003e"},{"lineNumber":50,"author":{"gitId":"-"},"content":"      \u003cli class\u003d\"nav-item\"\u003e"},{"lineNumber":51,"author":{"gitId":"-"},"content":"        \u003ca (click)\u003d\"scroll(Sections.students)\" [tmRouterLink]\u003d\"\"\u003eStudents\u003c/a\u003e"},{"lineNumber":52,"author":{"gitId":"-"},"content":"      \u003c/li\u003e"},{"lineNumber":53,"author":{"gitId":"-"},"content":"      \u003cli class\u003d\"nav-item\"\u003e"},{"lineNumber":54,"author":{"gitId":"-"},"content":"        \u003ca (click)\u003d\"scroll(Sections.courses)\" [tmRouterLink]\u003d\"\"\u003eCourses\u003c/a\u003e"},{"lineNumber":55,"author":{"gitId":"-"},"content":"      \u003c/li\u003e"},{"lineNumber":56,"author":{"gitId":"-"},"content":"      \u003cli class\u003d\"nav-item\"\u003e"},{"lineNumber":57,"author":{"gitId":"-"},"content":"        \u003ca (click)\u003d\"scroll(Sections.sessions)\" [tmRouterLink]\u003d\"\"\u003eSessions\u003c/a\u003e"},{"lineNumber":58,"author":{"gitId":"-"},"content":"      \u003c/li\u003e"},{"lineNumber":59,"author":{"gitId":"-"},"content":"      \u003cli class\u003d\"nav-item\"\u003e"},{"lineNumber":60,"author":{"gitId":"-"},"content":"        \u003ca (click)\u003d\"scroll(Sections.questions)\" [tmRouterLink]\u003d\"\"\u003eQuestions\u003c/a\u003e"},{"lineNumber":61,"author":{"gitId":"-"},"content":"      \u003c/li\u003e"},{"lineNumber":62,"author":{"gitId":"-"},"content":"    \u003c/ul\u003e"},{"lineNumber":63,"author":{"gitId":"-"},"content":"    \u003cbr\u003e"},{"lineNumber":64,"author":{"gitId":"-"},"content":"    \u003cul class\u003d\"nav nav-pills flex-column\"\u003e"},{"lineNumber":65,"author":{"gitId":"-"},"content":"      \u003cli class\u003d\"nav-item\"\u003e"},{"lineNumber":66,"author":{"gitId":"-"},"content":"        \u003ca (click)\u003d\"scroll(Sections.body)\" [tmRouterLink]\u003d\"\"\u003eBack to Top \u003ci class\u003d\"fas fa-arrow-up\"\u003e\u003c/i\u003e \u003c/a\u003e"},{"lineNumber":67,"author":{"gitId":"-"},"content":"      \u003c/li\u003e"},{"lineNumber":68,"author":{"gitId":"-"},"content":"    \u003c/ul\u003e"},{"lineNumber":69,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":70,"author":{"gitId":"-"},"content":"\u003c/div\u003e"}],"authorContributionMap":{"Derek-Hardy":2,"-":68}},{"path":"src/web/app/pages-help/instructor-help-page/instructor-help-page.component.scss","fileType":"scss","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":".side-nav {"},{"lineNumber":2,"author":{"gitId":"-"},"content":"  width: 150px;"},{"lineNumber":3,"author":{"gitId":"-"},"content":"  top: 100px;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"  right: 5%;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"  position: fixed;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"}"},{"lineNumber":7,"author":{"gitId":"-"},"content":""},{"lineNumber":8,"author":{"gitId":"-"},"content":".flex-container {"},{"lineNumber":9,"author":{"gitId":"-"},"content":"  display: flex;"},{"lineNumber":10,"author":{"gitId":"-"},"content":"  flex-wrap: nowrap;"},{"lineNumber":11,"author":{"gitId":"Derek-Hardy"},"content":"  padding-right: 30px;"},{"lineNumber":12,"author":{"gitId":"-"},"content":"}"},{"lineNumber":13,"author":{"gitId":"-"},"content":""},{"lineNumber":14,"author":{"gitId":"-"},"content":".section-body {"},{"lineNumber":15,"author":{"gitId":"-"},"content":"  padding-bottom: 5px;"},{"lineNumber":16,"author":{"gitId":"-"},"content":"}"},{"lineNumber":17,"author":{"gitId":"jianhandev"},"content":""},{"lineNumber":18,"author":{"gitId":"Derek-Hardy"},"content":"@media (max-width: 992px) {"},{"lineNumber":19,"author":{"gitId":"jianhandev"},"content":"  .side-nav {"},{"lineNumber":20,"author":{"gitId":"jianhandev"},"content":"    display: none;"},{"lineNumber":21,"author":{"gitId":"jianhandev"},"content":"  }"},{"lineNumber":22,"author":{"gitId":"jianhandev"},"content":""},{"lineNumber":23,"author":{"gitId":"jianhandev"},"content":"  .flex-container {"},{"lineNumber":24,"author":{"gitId":"jianhandev"},"content":"    padding-right: 0;"},{"lineNumber":25,"author":{"gitId":"jianhandev"},"content":"  }"},{"lineNumber":26,"author":{"gitId":"jianhandev"},"content":"}"}],"authorContributionMap":{"jianhandev":9,"Derek-Hardy":2,"-":15}},{"path":"src/web/app/pages-instructor/instructor-home-page/instructor-home-page.component.html","fileType":"html","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"\u003ch1\u003eHome\u003c/h1\u003e"},{"lineNumber":2,"author":{"gitId":"-"},"content":"\u003cdiv class\u003d\"card no-border bg-light mb-4\"\u003e"},{"lineNumber":3,"author":{"gitId":"-"},"content":"  \u003cdiv class\u003d\"card-body\"\u003e"},{"lineNumber":4,"author":{"gitId":"-"},"content":"    \u003cdiv class\u003d\"form-row\"\u003e"},{"lineNumber":5,"author":{"gitId":"-"},"content":"      \u003cdiv class\u003d\"input-group\"\u003e"},{"lineNumber":6,"author":{"gitId":"-"},"content":"        \u003cinput id\u003d\"search-input\" type\u003d\"text\" class\u003d\"form-control\" [(ngModel)]\u003d\"studentSearchkey\" (keyup.enter)\u003d\"search()\""},{"lineNumber":7,"author":{"gitId":"-"},"content":"               placeholder\u003d\"e.g. Charles Shultz, charles@gmail.com\"\u003e"},{"lineNumber":8,"author":{"gitId":"-"},"content":"        \u003cdiv class\u003d\"input-group-append\"\u003e"},{"lineNumber":9,"author":{"gitId":"-"},"content":"          \u003cbutton id\u003d\"btn-search\" class\u003d\"btn btn-primary\" (click)\u003d\"search()\"\u003eSearch\u003c/button\u003e"},{"lineNumber":10,"author":{"gitId":"-"},"content":"        \u003c/div\u003e"},{"lineNumber":11,"author":{"gitId":"-"},"content":"      \u003c/div\u003e"},{"lineNumber":12,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":13,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":14,"author":{"gitId":"-"},"content":"\u003c/div\u003e"},{"lineNumber":15,"author":{"gitId":"-"},"content":""},{"lineNumber":16,"author":{"gitId":"-"},"content":"\u003cdiv class\u003d\"card bg-light\" style\u003d\"margin-bottom: 20px;\" *ngIf\u003d\"isNewUser\"\u003e"},{"lineNumber":17,"author":{"gitId":"-"},"content":"  \u003cdiv class\u003d\"card-body\"\u003e"},{"lineNumber":18,"author":{"gitId":"-"},"content":"    New to TEAMMATES? You may wish to have a look at our \u003ca href\u003d\"/web/instructor/getting-started\" target\u003d\"_blank\" rel\u003d\"noopener noreferrer\"\u003eGetting Started Guide\u003c/a\u003e."},{"lineNumber":19,"author":{"gitId":"-"},"content":"    A video tour is also available in our \u003ca href\u003d\"/web\" target\u003d\"_blank\" rel\u003d\"noopener noreferrer\"\u003ehome page\u003c/a\u003e."},{"lineNumber":20,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":21,"author":{"gitId":"-"},"content":"\u003c/div\u003e"},{"lineNumber":22,"author":{"gitId":"-"},"content":""},{"lineNumber":23,"author":{"gitId":"-"},"content":"\u003cdiv class\u003d\"row mb-3\" *tmIsLoading\u003d\"!hasCoursesLoaded\"\u003e"},{"lineNumber":24,"author":{"gitId":"-"},"content":"  \u003cdiv class\u003d\"col-4\"\u003e"},{"lineNumber":25,"author":{"gitId":"-"},"content":"    \u003ca tmRouterLink\u003d\"/web/instructor/courses\" class\u003d\"btn btn-success\" [queryParams]\u003d\"{isAddNewCourse: true}\"\u003e"},{"lineNumber":26,"author":{"gitId":"-"},"content":"      \u003ci class\u003d\"fas fa-plus\"\u003e\u003c/i\u003e Add New Course"},{"lineNumber":27,"author":{"gitId":"-"},"content":"    \u003c/a\u003e"},{"lineNumber":28,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":29,"author":{"gitId":"-"},"content":"  \u003cdiv class\u003d\"col-8\" *ngIf\u003d\"courseTabModels.length \u003e 0\"\u003e"},{"lineNumber":30,"author":{"gitId":"-"},"content":"    \u003cdiv class\u003d\"float-right\"\u003e"},{"lineNumber":31,"author":{"gitId":"-"},"content":"      \u003cstrong class\u003d\"d-inline\"\u003e Sort By: \u003c/strong\u003e"},{"lineNumber":32,"author":{"gitId":"-"},"content":"      \u003cdiv class\u003d\"btn-group\" data-toggle\u003d\"buttons\"\u003e"},{"lineNumber":33,"author":{"gitId":"-"},"content":"        \u003cbutton id\u003d\"sort-course-id\" class\u003d\"btn btn-light\" [disabled]\u003d\"isSelectedForSorting(SortBy.COURSE_ID)\" (click)\u003d\"sortCoursesBy(SortBy.COURSE_ID)\"\u003eCourse ID\u003c/button\u003e"},{"lineNumber":34,"author":{"gitId":"-"},"content":"        \u003cbutton id\u003d\"sort-course-name\" class\u003d\"btn btn-light\" [disabled]\u003d\"isSelectedForSorting(SortBy.COURSE_NAME)\" (click)\u003d\"sortCoursesBy(SortBy.COURSE_NAME)\"\u003eCourse Name\u003c/button\u003e"},{"lineNumber":35,"author":{"gitId":"-"},"content":"        \u003cbutton id\u003d\"sort-course-date\" class\u003d\"btn btn-light\" [disabled]\u003d\"isSelectedForSorting(SortBy.COURSE_CREATION_DATE)\" (click)\u003d\"sortCoursesBy(SortBy.COURSE_CREATION_DATE)\"\u003eCreation Date\u003c/button\u003e"},{"lineNumber":36,"author":{"gitId":"-"},"content":"      \u003c/div\u003e"},{"lineNumber":37,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":38,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":39,"author":{"gitId":"-"},"content":"\u003c/div\u003e"},{"lineNumber":40,"author":{"gitId":"-"},"content":""},{"lineNumber":41,"author":{"gitId":"-"},"content":"\u003ctm-loading-retry [shouldShowRetry]\u003d\"hasCoursesLoadingFailed\" [message]\u003d\"\u0027Something went wrong\u0027\" (retryEvent)\u003d\"loadCourses()\"\u003e"},{"lineNumber":42,"author":{"gitId":"-"},"content":"  \u003cdiv *tmIsLoading\u003d\"!hasCoursesLoaded\"\u003e"},{"lineNumber":43,"author":{"gitId":"-"},"content":"    \u003cdiv *ngIf\u003d\"courseTabModels.length \u003e 0\"\u003e"},{"lineNumber":44,"author":{"gitId":"-"},"content":"      \u003cdiv id\u003d\"course-tab\" class\u003d\"card\" *ngFor\u003d\"let courseTabModel of courseTabModels; let idx \u003d index\"\u003e"},{"lineNumber":45,"author":{"gitId":"Derek-Hardy"},"content":"        \u003cdiv id\u003d\"course-tab-header\" class\u003d\"card-header bg-primary text-white cursor-pointer\" (click)\u003d\"courseTabModel.isTabExpanded \u003d handleClick($event, courseTabModel); this.loadFeedbackSessions(idx);\"\u003e"},{"lineNumber":46,"author":{"gitId":"-"},"content":"          \u003cb id\u003d\"course-details\"\u003e[{{ courseTabModel.course.courseId }}]: {{ courseTabModel.course.courseName }}\u003c/b\u003e"},{"lineNumber":47,"author":{"gitId":"-"},"content":"          \u003cdiv class\u003d\"card-header-btn-toolbar\" *ngIf\u003d\"courseTabModel.isAjaxSuccess\"\u003e"},{"lineNumber":48,"author":{"gitId":"-"},"content":"            \u003cspan ngbDropdown\u003e"},{"lineNumber":49,"author":{"gitId":"-"},"content":"              \u003cbutton class\u003d\"btn btn-primary btn-sm\" ngbDropdownToggle\u003e Students \u003c/button\u003e"},{"lineNumber":50,"author":{"gitId":"-"},"content":"              \u003cdiv ngbDropdownMenu (click)\u003d\"$event.stopPropagation()\"\u003e"},{"lineNumber":51,"author":{"gitId":"-"},"content":"                \u003cng-container *ngIf\u003d\"courseTabModel.instructorPrivilege.canModifyStudent\"\u003e"},{"lineNumber":52,"author":{"gitId":"-"},"content":"                  \u003ca class\u003d\"btn btn-info btn-sm dropdown-item\""},{"lineNumber":53,"author":{"gitId":"-"},"content":"                     tmRouterLink\u003d\"/web/instructor/courses/enroll\" [queryParams]\u003d\"{courseid: courseTabModel.course.courseId}\"\u003e Enroll"},{"lineNumber":54,"author":{"gitId":"-"},"content":"                  \u003c/a\u003e"},{"lineNumber":55,"author":{"gitId":"-"},"content":"                \u003c/ng-container\u003e"},{"lineNumber":56,"author":{"gitId":"-"},"content":"                \u003ca class\u003d\"btn btn-info btn-sm dropdown-item\""},{"lineNumber":57,"author":{"gitId":"-"},"content":"                   tmRouterLink\u003d\"/web/instructor/courses/details\" [queryParams]\u003d\"{courseid: courseTabModel.course.courseId}\"\u003e View / Edit"},{"lineNumber":58,"author":{"gitId":"-"},"content":"                \u003c/a\u003e"},{"lineNumber":59,"author":{"gitId":"-"},"content":"              \u003c/div\u003e"},{"lineNumber":60,"author":{"gitId":"-"},"content":"            \u003c/span\u003e"},{"lineNumber":61,"author":{"gitId":"-"},"content":"            \u003cspan ngbDropdown\u003e"},{"lineNumber":62,"author":{"gitId":"-"},"content":"              \u003cbutton class\u003d\"btn btn-primary btn-sm\" ngbDropdownToggle\u003e Instructors \u003c/button\u003e"},{"lineNumber":63,"author":{"gitId":"-"},"content":"              \u003cdiv ngbDropdownMenu (click)\u003d\"$event.stopPropagation()\"\u003e"},{"lineNumber":64,"author":{"gitId":"-"},"content":"                \u003ca class\u003d\"btn btn-light btn-sm dropdown-item\""},{"lineNumber":65,"author":{"gitId":"-"},"content":"                   tmRouterLink\u003d\"/web/instructor/courses/edit\" [queryParams]\u003d\"{courseid: courseTabModel.course.courseId}\"\u003e View / Edit"},{"lineNumber":66,"author":{"gitId":"-"},"content":"                \u003c/a\u003e"},{"lineNumber":67,"author":{"gitId":"-"},"content":"              \u003c/div\u003e"},{"lineNumber":68,"author":{"gitId":"-"},"content":"            \u003c/span\u003e"},{"lineNumber":69,"author":{"gitId":"-"},"content":"            \u003cspan ngbDropdown\u003e"},{"lineNumber":70,"author":{"gitId":"-"},"content":"              \u003cbutton class\u003d\"btn btn-primary btn-sm\" ngbDropdownToggle\u003e Sessions \u003c/button\u003e"},{"lineNumber":71,"author":{"gitId":"-"},"content":"              \u003cdiv ngbDropdownMenu (click)\u003d\"$event.stopPropagation()\"\u003e"},{"lineNumber":72,"author":{"gitId":"-"},"content":"                \u003ca class\u003d\"btn btn-light btn-sm dropdown-item\""},{"lineNumber":73,"author":{"gitId":"-"},"content":"                   tmRouterLink\u003d\"/web/instructor/sessions\" [queryParams]\u003d\"{courseid: courseTabModel.course.courseId}\"\u003e Add"},{"lineNumber":74,"author":{"gitId":"-"},"content":"                \u003c/a\u003e"},{"lineNumber":75,"author":{"gitId":"-"},"content":"              \u003c/div\u003e"},{"lineNumber":76,"author":{"gitId":"-"},"content":"            \u003c/span\u003e"},{"lineNumber":77,"author":{"gitId":"-"},"content":"            \u003cspan ngbDropdown\u003e"},{"lineNumber":78,"author":{"gitId":"-"},"content":"              \u003cbutton id\u003d\"btn-course\" class\u003d\"btn btn-primary btn-sm\" ngbDropdownToggle\u003e Course \u003c/button\u003e"},{"lineNumber":79,"author":{"gitId":"-"},"content":"              \u003cdiv ngbDropdownMenu (click)\u003d\"$event.stopPropagation()\"\u003e"},{"lineNumber":80,"author":{"gitId":"-"},"content":"                \u003ca id\u003d\"btn-archive-course\" class\u003d\"btn btn-light btn-sm dropdown-item\""},{"lineNumber":81,"author":{"gitId":"-"},"content":"                   ngbTooltip\u003d\"Archive the course so that it will not be shown in the home page any more (you can still access it from the \u0027Courses\u0027 tab)\""},{"lineNumber":82,"author":{"gitId":"-"},"content":"                   (click)\u003d\"archiveCourse(courseTabModel.course.courseId)\"\u003e Archive"},{"lineNumber":83,"author":{"gitId":"-"},"content":"                \u003c/a\u003e"},{"lineNumber":84,"author":{"gitId":"-"},"content":"                \u003ca class\u003d\"btn btn-light btn-sm dropdown-item\""},{"lineNumber":85,"author":{"gitId":"-"},"content":"                   tmRouterLink\u003d\u0027/web/instructor/courses/edit\u0027 [queryParams]\u003d\"{courseid: courseTabModel.course.courseId}\"\u003e View / Edit"},{"lineNumber":86,"author":{"gitId":"-"},"content":"                \u003c/a\u003e"},{"lineNumber":87,"author":{"gitId":"-"},"content":"                \u003cng-container *ngIf\u003d\"courseTabModel.instructorPrivilege.canModifyCourse\"\u003e"},{"lineNumber":88,"author":{"gitId":"-"},"content":"                  \u003ca id\u003d\"btn-delete-course\" class\u003d\"btn btn-light btn-sm dropdown-item\""},{"lineNumber":89,"author":{"gitId":"-"},"content":"                     ngbTooltip\u003d\"Delete the course and its corresponding students and sessions\""},{"lineNumber":90,"author":{"gitId":"-"},"content":"                     (click)\u003d\"deleteCourse(courseTabModel.course.courseId)\"\u003e Delete"},{"lineNumber":91,"author":{"gitId":"-"},"content":"                  \u003c/a\u003e"},{"lineNumber":92,"author":{"gitId":"-"},"content":"                \u003c/ng-container\u003e"},{"lineNumber":93,"author":{"gitId":"-"},"content":"              \u003c/div\u003e"},{"lineNumber":94,"author":{"gitId":"-"},"content":"            \u003c/span\u003e"},{"lineNumber":95,"author":{"gitId":"-"},"content":"          \u003c/div\u003e"},{"lineNumber":96,"author":{"gitId":"-"},"content":"          \u003ctm-panel-chevron [isExpanded]\u003d\"courseTabModel.isTabExpanded\"\u003e\u003c/tm-panel-chevron\u003e"},{"lineNumber":97,"author":{"gitId":"-"},"content":"        \u003c/div\u003e"},{"lineNumber":98,"author":{"gitId":"-"},"content":"        \u003cdiv class\u003d\"card-body padding-0\" *ngIf\u003d\"courseTabModel.isTabExpanded\" @collapseAnim\u003e"},{"lineNumber":99,"author":{"gitId":"-"},"content":"          \u003ctm-loading-retry [shouldShowRetry]\u003d\"courseTabModel.hasLoadingFailed\" [message]\u003d\"\u0027Error loading feedback sessions\u0027\""},{"lineNumber":100,"author":{"gitId":"-"},"content":"                            (retryEvent)\u003d\"loadFeedbackSessions(idx)\"\u003e"},{"lineNumber":101,"author":{"gitId":"-"},"content":"            \u003ctm-sessions-table *tmIsLoading\u003d\"!courseTabModel.hasPopulated\""},{"lineNumber":102,"author":{"gitId":"-"},"content":"                [sessionsTableRowModels]\u003d\"courseTabModel.sessionsTableRowModels\" [sessionsTableRowModelsSortBy]\u003d\"courseTabModel.sessionsTableRowModelsSortBy\""},{"lineNumber":103,"author":{"gitId":"-"},"content":"                [sessionsTableRowModelsSortOrder]\u003d\"courseTabModel.sessionsTableRowModelsSortOrder\" [courseCandidates]\u003d\"courseCandidates\""},{"lineNumber":104,"author":{"gitId":"-"},"content":"                [headerColorScheme]\u003d\"SessionsTableHeaderColorScheme.WHITE\" [columnsToShow]\u003d\"[ SessionsTableColumn.START_DATE, SessionsTableColumn.END_DATE ]\""},{"lineNumber":105,"author":{"gitId":"-"},"content":"                (sortSessionsTableRowModelsEvent)\u003d\"sortSessionsTableRowModelsEvent(idx, $event)\""},{"lineNumber":106,"author":{"gitId":"-"},"content":"                (loadResponseRateEvent)\u003d\"loadResponseRateEventHandler(idx, $event)\" (editSessionEvent)\u003d\"editSessionEventHandler(idx, $event)\""},{"lineNumber":107,"author":{"gitId":"-"},"content":"                (moveSessionToRecycleBinEvent)\u003d\"moveSessionToRecycleBinEventHandler(idx, $event)\" (copySessionEvent)\u003d\"copySessionEventHandler(idx, $event)\""},{"lineNumber":108,"author":{"gitId":"-"},"content":"                (submitSessionAsInstructorEvent)\u003d\"submitSessionAsInstructorEventHandler(idx, $event)\" (viewSessionResultEvent)\u003d\"viewSessionResultEventHandler(idx, $event)\""},{"lineNumber":109,"author":{"gitId":"-"},"content":"                (publishSessionEvent)\u003d\"publishSessionEventHandler(idx, $event)\" (unpublishSessionEvent)\u003d\"unpublishSessionEventHandler(idx, $event)\""},{"lineNumber":110,"author":{"gitId":"-"},"content":"                (downloadSessionResultsEvent)\u003d\"downloadSessionResultEventHandler(idx, $event)\""},{"lineNumber":111,"author":{"gitId":"-"},"content":"                (resendResultsLinkToStudentsEvent)\u003d\"resendResultsLinkToRespondentsEventHandler(courseTabModel.sessionsTableRowModels[$event])\""},{"lineNumber":112,"author":{"gitId":"-"},"content":"                (sendRemindersToStudentsEvent)\u003d\"sendRemindersToRespondentsEventHandler(courseTabModel.sessionsTableRowModels[$event])\"\u003e\u003c/tm-sessions-table\u003e"},{"lineNumber":113,"author":{"gitId":"-"},"content":"          \u003c/tm-loading-retry\u003e"},{"lineNumber":114,"author":{"gitId":"-"},"content":"        \u003c/div\u003e"},{"lineNumber":115,"author":{"gitId":"-"},"content":"      \u003c/div\u003e"},{"lineNumber":116,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":117,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":118,"author":{"gitId":"-"},"content":"\u003c/tm-loading-retry\u003e"}],"authorContributionMap":{"Derek-Hardy":1,"-":117}},{"path":"src/web/app/pages-instructor/instructor-home-page/instructor-home-page.component.spec.ts","fileType":"ts","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"import { HttpClientTestingModule } from \u0027@angular/common/http/testing\u0027;"},{"lineNumber":2,"author":{"gitId":"-"},"content":"import { async, ComponentFixture, TestBed } from \u0027@angular/core/testing\u0027;"},{"lineNumber":3,"author":{"gitId":"-"},"content":"import { BrowserAnimationsModule } from \u0027@angular/platform-browser/animations\u0027;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import { RouterTestingModule } from \u0027@angular/router/testing\u0027;"},{"lineNumber":5,"author":{"gitId":"Derek-Hardy"},"content":"import { of } from \u0027rxjs\u0027;"},{"lineNumber":6,"author":{"gitId":"Derek-Hardy"},"content":"import { CourseService } from \u0027../../../services/course.service\u0027;"},{"lineNumber":7,"author":{"gitId":"Derek-Hardy"},"content":"import { FeedbackSessionsService } from \u0027../../../services/feedback-sessions.service\u0027;"},{"lineNumber":8,"author":{"gitId":"Derek-Hardy"},"content":"import { SimpleModalService } from \u0027../../../services/simple-modal.service\u0027;"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import {"},{"lineNumber":10,"author":{"gitId":"Derek-Hardy"},"content":"  Course, CourseArchive, Courses,"},{"lineNumber":11,"author":{"gitId":"Derek-Hardy"},"content":"  FeedbackSession,"},{"lineNumber":12,"author":{"gitId":"Derek-Hardy"},"content":"  FeedbackSessionPublishStatus,"},{"lineNumber":13,"author":{"gitId":"Derek-Hardy"},"content":"  FeedbackSessions,"},{"lineNumber":14,"author":{"gitId":"-"},"content":"  FeedbackSessionSubmissionStatus,"},{"lineNumber":15,"author":{"gitId":"-"},"content":"  InstructorPrivilege,"},{"lineNumber":16,"author":{"gitId":"-"},"content":"  ResponseVisibleSetting,"},{"lineNumber":17,"author":{"gitId":"-"},"content":"  SessionVisibleSetting,"},{"lineNumber":18,"author":{"gitId":"-"},"content":"} from \u0027../../../types/api-output\u0027;"},{"lineNumber":19,"author":{"gitId":"-"},"content":"import { SortBy, SortOrder } from \u0027../../../types/sort-properties\u0027;"},{"lineNumber":20,"author":{"gitId":"Derek-Hardy"},"content":"import { SimpleModalType } from \u0027../../components/simple-modal/simple-modal-type\u0027;"},{"lineNumber":21,"author":{"gitId":"-"},"content":"import { TeammatesRouterModule } from \u0027../../components/teammates-router/teammates-router.module\u0027;"},{"lineNumber":22,"author":{"gitId":"Derek-Hardy"},"content":"import { CourseTabModel, InstructorHomePageComponent } from \u0027./instructor-home-page.component\u0027;"},{"lineNumber":23,"author":{"gitId":"-"},"content":"import { InstructorHomePageModule } from \u0027./instructor-home-page.module\u0027;"},{"lineNumber":24,"author":{"gitId":"-"},"content":""},{"lineNumber":25,"author":{"gitId":"Derek-Hardy"},"content":"const testInstructorPrivilege: InstructorPrivilege \u003d {"},{"lineNumber":26,"author":{"gitId":"-"},"content":"  canModifyCourse: true,"},{"lineNumber":27,"author":{"gitId":"-"},"content":"  canModifySession: true,"},{"lineNumber":28,"author":{"gitId":"-"},"content":"  canModifyStudent: true,"},{"lineNumber":29,"author":{"gitId":"-"},"content":"  canSubmitSessionInSections: true,"},{"lineNumber":30,"author":{"gitId":"-"},"content":"  canModifyInstructor: false,"},{"lineNumber":31,"author":{"gitId":"-"},"content":"  canViewStudentInSections: false,"},{"lineNumber":32,"author":{"gitId":"-"},"content":"  canModifySessionCommentsInSections: false,"},{"lineNumber":33,"author":{"gitId":"-"},"content":"  canViewSessionInSections: false,"},{"lineNumber":34,"author":{"gitId":"-"},"content":"};"},{"lineNumber":35,"author":{"gitId":"-"},"content":""},{"lineNumber":36,"author":{"gitId":"Derek-Hardy"},"content":"const testCourse1: Course \u003d {"},{"lineNumber":37,"author":{"gitId":"Derek-Hardy"},"content":"  courseId: \u0027CS1231\u0027,"},{"lineNumber":38,"author":{"gitId":"Derek-Hardy"},"content":"  courseName: \u0027Discrete Structures\u0027,"},{"lineNumber":39,"author":{"gitId":"Derek-Hardy"},"content":"  creationTimestamp: 1549095330000, // Saturday, 2 February 2019 16:15:30 GMT+08:00"},{"lineNumber":40,"author":{"gitId":"-"},"content":"  deletionTimestamp: 0,"},{"lineNumber":41,"author":{"gitId":"-"},"content":"  timeZone: \u0027Asia/Singapore\u0027,"},{"lineNumber":42,"author":{"gitId":"-"},"content":"};"},{"lineNumber":43,"author":{"gitId":"-"},"content":""},{"lineNumber":44,"author":{"gitId":"Derek-Hardy"},"content":"const testCourse2: Course \u003d {"},{"lineNumber":45,"author":{"gitId":"-"},"content":"  courseId: \u0027CS3281\u0027,"},{"lineNumber":46,"author":{"gitId":"Derek-Hardy"},"content":"  courseName: \u0027Thematic Systems I\u0027,"},{"lineNumber":47,"author":{"gitId":"Derek-Hardy"},"content":"  creationTimestamp: 1611580917000, // Monday, 25 January 2021 21:21:57 GMT+08:00"},{"lineNumber":48,"author":{"gitId":"Derek-Hardy"},"content":"  deletionTimestamp: 0,"},{"lineNumber":49,"author":{"gitId":"-"},"content":"  timeZone: \u0027Asia/Singapore\u0027,"},{"lineNumber":50,"author":{"gitId":"Derek-Hardy"},"content":"};"},{"lineNumber":51,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":52,"author":{"gitId":"Derek-Hardy"},"content":"const testFeedbackSession1: FeedbackSession \u003d {"},{"lineNumber":53,"author":{"gitId":"Derek-Hardy"},"content":"  feedbackSessionName: \u0027First Session\u0027,"},{"lineNumber":54,"author":{"gitId":"Derek-Hardy"},"content":"  courseId: \u0027CS1231\u0027,"},{"lineNumber":55,"author":{"gitId":"-"},"content":"  timeZone: \u0027Asia/Singapore\u0027,"},{"lineNumber":56,"author":{"gitId":"Derek-Hardy"},"content":"  instructions: \u0027\u0027,"},{"lineNumber":57,"author":{"gitId":"Derek-Hardy"},"content":"  submissionStartTimestamp: 0,"},{"lineNumber":58,"author":{"gitId":"Derek-Hardy"},"content":"  submissionEndTimestamp: 1610371317000, // Monday, 11 January 2021 21:21:57 GMT+08:00"},{"lineNumber":59,"author":{"gitId":"-"},"content":"  gracePeriod: 0,"},{"lineNumber":60,"author":{"gitId":"-"},"content":"  sessionVisibleSetting: SessionVisibleSetting.AT_OPEN,"},{"lineNumber":61,"author":{"gitId":"-"},"content":"  responseVisibleSetting: ResponseVisibleSetting.AT_VISIBLE,"},{"lineNumber":62,"author":{"gitId":"Derek-Hardy"},"content":"  submissionStatus: FeedbackSessionSubmissionStatus.OPEN,"},{"lineNumber":63,"author":{"gitId":"Derek-Hardy"},"content":"  publishStatus: FeedbackSessionPublishStatus.PUBLISHED,"},{"lineNumber":64,"author":{"gitId":"-"},"content":"  isClosingEmailEnabled: true,"},{"lineNumber":65,"author":{"gitId":"-"},"content":"  isPublishedEmailEnabled: true,"},{"lineNumber":66,"author":{"gitId":"-"},"content":"  createdAtTimestamp: 0,"},{"lineNumber":67,"author":{"gitId":"-"},"content":"};"},{"lineNumber":68,"author":{"gitId":"-"},"content":""},{"lineNumber":69,"author":{"gitId":"Derek-Hardy"},"content":"const testFeedbackSession2: FeedbackSession \u003d {"},{"lineNumber":70,"author":{"gitId":"Derek-Hardy"},"content":"  feedbackSessionName: \u0027Second Session\u0027,"},{"lineNumber":71,"author":{"gitId":"Derek-Hardy"},"content":"  courseId: \u0027CS1231\u0027,"},{"lineNumber":72,"author":{"gitId":"Derek-Hardy"},"content":"  timeZone: \u0027Asia/Singapore\u0027,"},{"lineNumber":73,"author":{"gitId":"Derek-Hardy"},"content":"  instructions: \u0027\u0027,"},{"lineNumber":74,"author":{"gitId":"Derek-Hardy"},"content":"  submissionStartTimestamp: 0,"},{"lineNumber":75,"author":{"gitId":"Derek-Hardy"},"content":"  submissionEndTimestamp: 1611148917000, // Wednesday, 20 January 2021 21:21:57 GMT+08:00"},{"lineNumber":76,"author":{"gitId":"Derek-Hardy"},"content":"  gracePeriod: 0,"},{"lineNumber":77,"author":{"gitId":"Derek-Hardy"},"content":"  sessionVisibleSetting: SessionVisibleSetting.AT_OPEN,"},{"lineNumber":78,"author":{"gitId":"Derek-Hardy"},"content":"  responseVisibleSetting: ResponseVisibleSetting.AT_VISIBLE,"},{"lineNumber":79,"author":{"gitId":"Derek-Hardy"},"content":"  submissionStatus: FeedbackSessionSubmissionStatus.OPEN,"},{"lineNumber":80,"author":{"gitId":"Derek-Hardy"},"content":"  publishStatus: FeedbackSessionPublishStatus.PUBLISHED,"},{"lineNumber":81,"author":{"gitId":"Derek-Hardy"},"content":"  isClosingEmailEnabled: true,"},{"lineNumber":82,"author":{"gitId":"Derek-Hardy"},"content":"  isPublishedEmailEnabled: true,"},{"lineNumber":83,"author":{"gitId":"Derek-Hardy"},"content":"  createdAtTimestamp: 0,"},{"lineNumber":84,"author":{"gitId":"Derek-Hardy"},"content":"};"},{"lineNumber":85,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":86,"author":{"gitId":"Derek-Hardy"},"content":"const activeCourseTabModels: CourseTabModel[] \u003d ["},{"lineNumber":87,"author":{"gitId":"Derek-Hardy"},"content":"  {"},{"lineNumber":88,"author":{"gitId":"Derek-Hardy"},"content":"    course: testCourse1,"},{"lineNumber":89,"author":{"gitId":"Derek-Hardy"},"content":"    instructorPrivilege: testInstructorPrivilege,"},{"lineNumber":90,"author":{"gitId":"Derek-Hardy"},"content":"    sessionsTableRowModels: [],"},{"lineNumber":91,"author":{"gitId":"Derek-Hardy"},"content":"    sessionsTableRowModelsSortBy: SortBy.NONE,"},{"lineNumber":92,"author":{"gitId":"Derek-Hardy"},"content":"    sessionsTableRowModelsSortOrder: SortOrder.ASC,"},{"lineNumber":93,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":94,"author":{"gitId":"Derek-Hardy"},"content":"    hasPopulated: false,"},{"lineNumber":95,"author":{"gitId":"Derek-Hardy"},"content":"    isAjaxSuccess: true,"},{"lineNumber":96,"author":{"gitId":"Derek-Hardy"},"content":"    isTabExpanded: true,"},{"lineNumber":97,"author":{"gitId":"Derek-Hardy"},"content":"    hasLoadingFailed: false,"},{"lineNumber":98,"author":{"gitId":"Derek-Hardy"},"content":"  },"},{"lineNumber":99,"author":{"gitId":"Derek-Hardy"},"content":"  {"},{"lineNumber":100,"author":{"gitId":"Derek-Hardy"},"content":"    course: testCourse2,"},{"lineNumber":101,"author":{"gitId":"Derek-Hardy"},"content":"    instructorPrivilege: testInstructorPrivilege,"},{"lineNumber":102,"author":{"gitId":"Derek-Hardy"},"content":"    sessionsTableRowModels: [],"},{"lineNumber":103,"author":{"gitId":"Derek-Hardy"},"content":"    sessionsTableRowModelsSortBy: SortBy.NONE,"},{"lineNumber":104,"author":{"gitId":"Derek-Hardy"},"content":"    sessionsTableRowModelsSortOrder: SortOrder.ASC,"},{"lineNumber":105,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":106,"author":{"gitId":"Derek-Hardy"},"content":"    hasPopulated: false,"},{"lineNumber":107,"author":{"gitId":"Derek-Hardy"},"content":"    isAjaxSuccess: true,"},{"lineNumber":108,"author":{"gitId":"Derek-Hardy"},"content":"    isTabExpanded: true,"},{"lineNumber":109,"author":{"gitId":"Derek-Hardy"},"content":"    hasLoadingFailed: false,"},{"lineNumber":110,"author":{"gitId":"Derek-Hardy"},"content":"  },"},{"lineNumber":111,"author":{"gitId":"Derek-Hardy"},"content":"];"},{"lineNumber":112,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":113,"author":{"gitId":"-"},"content":"describe(\u0027InstructorHomePageComponent\u0027, () \u003d\u003e {"},{"lineNumber":114,"author":{"gitId":"Derek-Hardy"},"content":"  let courseService: CourseService;"},{"lineNumber":115,"author":{"gitId":"Derek-Hardy"},"content":"  let simpleModalService: SimpleModalService;"},{"lineNumber":116,"author":{"gitId":"Derek-Hardy"},"content":"  let feedbackSessionsService: FeedbackSessionsService;"},{"lineNumber":117,"author":{"gitId":"-"},"content":"  let component: InstructorHomePageComponent;"},{"lineNumber":118,"author":{"gitId":"-"},"content":"  let fixture: ComponentFixture\u003cInstructorHomePageComponent\u003e;"},{"lineNumber":119,"author":{"gitId":"-"},"content":""},{"lineNumber":120,"author":{"gitId":"-"},"content":"  beforeEach(async(() \u003d\u003e {"},{"lineNumber":121,"author":{"gitId":"-"},"content":"    TestBed.configureTestingModule({"},{"lineNumber":122,"author":{"gitId":"-"},"content":"      imports: ["},{"lineNumber":123,"author":{"gitId":"-"},"content":"        InstructorHomePageModule,"},{"lineNumber":124,"author":{"gitId":"-"},"content":"        HttpClientTestingModule,"},{"lineNumber":125,"author":{"gitId":"-"},"content":"        RouterTestingModule,"},{"lineNumber":126,"author":{"gitId":"-"},"content":"        TeammatesRouterModule,"},{"lineNumber":127,"author":{"gitId":"-"},"content":"        BrowserAnimationsModule,"},{"lineNumber":128,"author":{"gitId":"-"},"content":"      ],"},{"lineNumber":129,"author":{"gitId":"-"},"content":"    })"},{"lineNumber":130,"author":{"gitId":"-"},"content":"    .compileComponents();"},{"lineNumber":131,"author":{"gitId":"-"},"content":"  }));"},{"lineNumber":132,"author":{"gitId":"-"},"content":""},{"lineNumber":133,"author":{"gitId":"-"},"content":"  beforeEach(() \u003d\u003e {"},{"lineNumber":134,"author":{"gitId":"-"},"content":"    fixture \u003d TestBed.createComponent(InstructorHomePageComponent);"},{"lineNumber":135,"author":{"gitId":"-"},"content":"    component \u003d fixture.componentInstance;"},{"lineNumber":136,"author":{"gitId":"Derek-Hardy"},"content":"    courseService \u003d TestBed.inject(CourseService);"},{"lineNumber":137,"author":{"gitId":"Derek-Hardy"},"content":"    simpleModalService \u003d TestBed.inject(SimpleModalService);"},{"lineNumber":138,"author":{"gitId":"Derek-Hardy"},"content":"    feedbackSessionsService \u003d TestBed.inject(FeedbackSessionsService);"},{"lineNumber":139,"author":{"gitId":"-"},"content":"    fixture.detectChanges();"},{"lineNumber":140,"author":{"gitId":"-"},"content":"  });"},{"lineNumber":141,"author":{"gitId":"-"},"content":""},{"lineNumber":142,"author":{"gitId":"-"},"content":"  it(\u0027should create\u0027, () \u003d\u003e {"},{"lineNumber":143,"author":{"gitId":"-"},"content":"    expect(component).toBeTruthy();"},{"lineNumber":144,"author":{"gitId":"-"},"content":"  });"},{"lineNumber":145,"author":{"gitId":"-"},"content":""},{"lineNumber":146,"author":{"gitId":"Derek-Hardy"},"content":"  it(\u0027should get course candidates\u0027, () \u003d\u003e {"},{"lineNumber":147,"author":{"gitId":"Derek-Hardy"},"content":"    component.courseTabModels \u003d activeCourseTabModels;"},{"lineNumber":148,"author":{"gitId":"Derek-Hardy"},"content":"    fixture.detectChanges();"},{"lineNumber":149,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":150,"author":{"gitId":"Derek-Hardy"},"content":"    const courses: Course[] \u003d component.courseCandidates;"},{"lineNumber":151,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":152,"author":{"gitId":"Derek-Hardy"},"content":"    expect(courses.length).toEqual(2);"},{"lineNumber":153,"author":{"gitId":"Derek-Hardy"},"content":"    expect(courses[0].courseId).toEqual(\u0027CS1231\u0027);"},{"lineNumber":154,"author":{"gitId":"Derek-Hardy"},"content":"    expect(courses[0].courseName).toEqual(\u0027Discrete Structures\u0027);"},{"lineNumber":155,"author":{"gitId":"Derek-Hardy"},"content":"  });"},{"lineNumber":156,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":157,"author":{"gitId":"Derek-Hardy"},"content":"  it(\u0027should expand the course tab model upon clicking\u0027, () \u003d\u003e {"},{"lineNumber":158,"author":{"gitId":"Derek-Hardy"},"content":"    component.courseTabModels \u003d activeCourseTabModels;"},{"lineNumber":159,"author":{"gitId":"Derek-Hardy"},"content":"    component.hasCoursesLoaded \u003d true;"},{"lineNumber":160,"author":{"gitId":"Derek-Hardy"},"content":"    fixture.detectChanges();"},{"lineNumber":161,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":162,"author":{"gitId":"Derek-Hardy"},"content":"    const button: any \u003d fixture.debugElement.nativeElement.querySelector(\u0027#course-tab-header\u0027);"},{"lineNumber":163,"author":{"gitId":"Derek-Hardy"},"content":"    button.click();"},{"lineNumber":164,"author":{"gitId":"Derek-Hardy"},"content":"    expect(component.courseTabModels[0].isTabExpanded).toBeFalsy();"},{"lineNumber":165,"author":{"gitId":"Derek-Hardy"},"content":"    button.click();"},{"lineNumber":166,"author":{"gitId":"Derek-Hardy"},"content":"    expect(component.courseTabModels[0].isTabExpanded).toBeTruthy();"},{"lineNumber":167,"author":{"gitId":"Derek-Hardy"},"content":"  });"},{"lineNumber":168,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":169,"author":{"gitId":"Derek-Hardy"},"content":"  it(\u0027should archive the entire course from the instructor\u0027, () \u003d\u003e {"},{"lineNumber":170,"author":{"gitId":"Derek-Hardy"},"content":"    const courseArchive: CourseArchive \u003d {"},{"lineNumber":171,"author":{"gitId":"Derek-Hardy"},"content":"      courseId: \u0027CS1231\u0027,"},{"lineNumber":172,"author":{"gitId":"Derek-Hardy"},"content":"      isArchived: true,"},{"lineNumber":173,"author":{"gitId":"Derek-Hardy"},"content":"    };"},{"lineNumber":174,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":175,"author":{"gitId":"Derek-Hardy"},"content":"    component.courseTabModels \u003d activeCourseTabModels;"},{"lineNumber":176,"author":{"gitId":"Derek-Hardy"},"content":"    component.hasCoursesLoaded \u003d true;"},{"lineNumber":177,"author":{"gitId":"Derek-Hardy"},"content":"    fixture.detectChanges();"},{"lineNumber":178,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":179,"author":{"gitId":"Derek-Hardy"},"content":"    expect(component.courseTabModels.length).toEqual(2);"},{"lineNumber":180,"author":{"gitId":"Derek-Hardy"},"content":"    expect(component.courseTabModels[0].course.courseId).toEqual(\u0027CS1231\u0027);"},{"lineNumber":181,"author":{"gitId":"Derek-Hardy"},"content":"    expect(component.courseTabModels[0].course.courseName).toEqual(\u0027Discrete Structures\u0027);"},{"lineNumber":182,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":183,"author":{"gitId":"Derek-Hardy"},"content":"    spyOn(simpleModalService, \u0027openConfirmationModal\u0027).and.callFake(() \u003d\u003e {"},{"lineNumber":184,"author":{"gitId":"Derek-Hardy"},"content":"      return {"},{"lineNumber":185,"author":{"gitId":"Derek-Hardy"},"content":"        componentInstance: {"},{"lineNumber":186,"author":{"gitId":"Derek-Hardy"},"content":"          header: \u0027mock header\u0027, content: \u0027mock content\u0027, type: SimpleModalType.INFO,"},{"lineNumber":187,"author":{"gitId":"Derek-Hardy"},"content":"        },"},{"lineNumber":188,"author":{"gitId":"Derek-Hardy"},"content":"        result: Promise.resolve(),"},{"lineNumber":189,"author":{"gitId":"Derek-Hardy"},"content":"      };"},{"lineNumber":190,"author":{"gitId":"Derek-Hardy"},"content":"    });"},{"lineNumber":191,"author":{"gitId":"Derek-Hardy"},"content":"    spyOn(courseService, \u0027changeArchiveStatus\u0027).and.returnValue(of(courseArchive));"},{"lineNumber":192,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":193,"author":{"gitId":"Derek-Hardy"},"content":"    const courseButton: any \u003d fixture.debugElement.nativeElement.querySelector(\u0027#btn-course\u0027);"},{"lineNumber":194,"author":{"gitId":"Derek-Hardy"},"content":"    courseButton.click();"},{"lineNumber":195,"author":{"gitId":"Derek-Hardy"},"content":"    const archiveButton: any \u003d fixture.debugElement.nativeElement.querySelector(\u0027#btn-archive-course\u0027);"},{"lineNumber":196,"author":{"gitId":"Derek-Hardy"},"content":"    archiveButton.click();"},{"lineNumber":197,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":198,"author":{"gitId":"Derek-Hardy"},"content":"    expect(component.courseTabModels.length).toEqual(1);"},{"lineNumber":199,"author":{"gitId":"Derek-Hardy"},"content":"    expect(component.courseTabModels[0].course.courseId).toEqual(\u0027CS3281\u0027);"},{"lineNumber":200,"author":{"gitId":"Derek-Hardy"},"content":"    expect(component.courseTabModels[0].course.courseName).toEqual(\u0027Thematic Systems I\u0027);"},{"lineNumber":201,"author":{"gitId":"Derek-Hardy"},"content":"  });"},{"lineNumber":202,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":203,"author":{"gitId":"Derek-Hardy"},"content":"  it(\u0027should delete the entire course from the instructor\u0027, () \u003d\u003e {"},{"lineNumber":204,"author":{"gitId":"Derek-Hardy"},"content":"    const courseToDelete: Course \u003d testCourse1;"},{"lineNumber":205,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":206,"author":{"gitId":"Derek-Hardy"},"content":"    component.courseTabModels \u003d activeCourseTabModels;"},{"lineNumber":207,"author":{"gitId":"Derek-Hardy"},"content":"    component.hasCoursesLoaded \u003d true;"},{"lineNumber":208,"author":{"gitId":"Derek-Hardy"},"content":"    fixture.detectChanges();"},{"lineNumber":209,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":210,"author":{"gitId":"Derek-Hardy"},"content":"    expect(component.courseTabModels.length).toEqual(2);"},{"lineNumber":211,"author":{"gitId":"Derek-Hardy"},"content":"    expect(component.courseTabModels[0].course.courseId).toEqual(\u0027CS1231\u0027);"},{"lineNumber":212,"author":{"gitId":"Derek-Hardy"},"content":"    expect(component.courseTabModels[0].course.courseName).toEqual(\u0027Discrete Structures\u0027);"},{"lineNumber":213,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":214,"author":{"gitId":"Derek-Hardy"},"content":"    spyOn(simpleModalService, \u0027openConfirmationModal\u0027).and.callFake(() \u003d\u003e {"},{"lineNumber":215,"author":{"gitId":"Derek-Hardy"},"content":"      return {"},{"lineNumber":216,"author":{"gitId":"Derek-Hardy"},"content":"        componentInstance: {"},{"lineNumber":217,"author":{"gitId":"Derek-Hardy"},"content":"          header: \u0027mock header\u0027, content: \u0027mock content\u0027, type: SimpleModalType.WARNING,"},{"lineNumber":218,"author":{"gitId":"Derek-Hardy"},"content":"        },"},{"lineNumber":219,"author":{"gitId":"Derek-Hardy"},"content":"        result: Promise.resolve(),"},{"lineNumber":220,"author":{"gitId":"Derek-Hardy"},"content":"      };"},{"lineNumber":221,"author":{"gitId":"Derek-Hardy"},"content":"    });"},{"lineNumber":222,"author":{"gitId":"Derek-Hardy"},"content":"    spyOn(courseService, \u0027binCourse\u0027).and.returnValue(of(courseToDelete));"},{"lineNumber":223,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":224,"author":{"gitId":"Derek-Hardy"},"content":"    const courseButton: any \u003d fixture.debugElement.nativeElement.querySelector(\u0027#btn-course\u0027);"},{"lineNumber":225,"author":{"gitId":"Derek-Hardy"},"content":"    courseButton.click();"},{"lineNumber":226,"author":{"gitId":"Derek-Hardy"},"content":"    const archiveButton: any \u003d fixture.debugElement.nativeElement.querySelector(\u0027#btn-delete-course\u0027);"},{"lineNumber":227,"author":{"gitId":"Derek-Hardy"},"content":"    archiveButton.click();"},{"lineNumber":228,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":229,"author":{"gitId":"Derek-Hardy"},"content":"    expect(component.courseTabModels.length).toEqual(1);"},{"lineNumber":230,"author":{"gitId":"Derek-Hardy"},"content":"    expect(component.courseTabModels[0].course.courseId).toEqual(\u0027CS3281\u0027);"},{"lineNumber":231,"author":{"gitId":"Derek-Hardy"},"content":"    expect(component.courseTabModels[0].course.courseName).toEqual(\u0027Thematic Systems I\u0027);"},{"lineNumber":232,"author":{"gitId":"Derek-Hardy"},"content":"  });"},{"lineNumber":233,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":234,"author":{"gitId":"Derek-Hardy"},"content":"  it(\u0027should load courses of the current instructor\u0027, () \u003d\u003e {"},{"lineNumber":235,"author":{"gitId":"Derek-Hardy"},"content":"    const activeCourses: Courses \u003d {"},{"lineNumber":236,"author":{"gitId":"Derek-Hardy"},"content":"      courses: [testCourse1, testCourse2],"},{"lineNumber":237,"author":{"gitId":"Derek-Hardy"},"content":"    };"},{"lineNumber":238,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":239,"author":{"gitId":"Derek-Hardy"},"content":"    spyOn(courseService, \u0027getInstructorCoursesThatAreActive\u0027).and.returnValue(of(activeCourses));"},{"lineNumber":240,"author":{"gitId":"Derek-Hardy"},"content":"    component.loadCourses();"},{"lineNumber":241,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":242,"author":{"gitId":"Derek-Hardy"},"content":"    expect(component.hasCoursesLoaded).toBeTruthy();"},{"lineNumber":243,"author":{"gitId":"Derek-Hardy"},"content":"    // panels are sorted in descending order by default"},{"lineNumber":244,"author":{"gitId":"Derek-Hardy"},"content":"    expect(component.courseTabModels[0].course.courseId).toEqual(\u0027CS3281\u0027);"},{"lineNumber":245,"author":{"gitId":"Derek-Hardy"},"content":"    expect(component.courseTabModels[0].course.courseName).toEqual(\u0027Thematic Systems I\u0027);"},{"lineNumber":246,"author":{"gitId":"Derek-Hardy"},"content":"    expect(component.courseTabModels[1].course.courseId).toEqual(\u0027CS1231\u0027);"},{"lineNumber":247,"author":{"gitId":"Derek-Hardy"},"content":"    expect(component.courseTabModels[1].course.courseName).toEqual(\u0027Discrete Structures\u0027);"},{"lineNumber":248,"author":{"gitId":"Derek-Hardy"},"content":"    expect(component.courseTabModels.length).toEqual(2);"},{"lineNumber":249,"author":{"gitId":"Derek-Hardy"},"content":"    expect(component.isNewUser).toBeFalsy();"},{"lineNumber":250,"author":{"gitId":"Derek-Hardy"},"content":"  });"},{"lineNumber":251,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":252,"author":{"gitId":"Derek-Hardy"},"content":"  it(\u0027should load feedbackSessions in the course\u0027, () \u003d\u003e {"},{"lineNumber":253,"author":{"gitId":"Derek-Hardy"},"content":"    const courseSessions: FeedbackSessions \u003d {"},{"lineNumber":254,"author":{"gitId":"Derek-Hardy"},"content":"      feedbackSessions: [testFeedbackSession1, testFeedbackSession2],"},{"lineNumber":255,"author":{"gitId":"Derek-Hardy"},"content":"    };"},{"lineNumber":256,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":257,"author":{"gitId":"Derek-Hardy"},"content":"    spyOn(feedbackSessionsService, \u0027getFeedbackSessionsForInstructor\u0027).and.returnValue(of(courseSessions));"},{"lineNumber":258,"author":{"gitId":"Derek-Hardy"},"content":"    component.courseTabModels \u003d activeCourseTabModels;"},{"lineNumber":259,"author":{"gitId":"Derek-Hardy"},"content":"    component.loadFeedbackSessions(0);"},{"lineNumber":260,"author":{"gitId":"Derek-Hardy"},"content":"    fixture.detectChanges();"},{"lineNumber":261,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":262,"author":{"gitId":"Derek-Hardy"},"content":"    expect(component.courseTabModels[0].hasLoadingFailed).toBeFalsy();"},{"lineNumber":263,"author":{"gitId":"Derek-Hardy"},"content":"    expect(component.courseTabModels[0].hasPopulated).toBeTruthy();"},{"lineNumber":264,"author":{"gitId":"Derek-Hardy"},"content":"    expect(component.courseTabModels[0].isAjaxSuccess).toBeTruthy();"},{"lineNumber":265,"author":{"gitId":"Derek-Hardy"},"content":"    expect(component.courseTabModels[0].sessionsTableRowModels.length).toEqual(2);"},{"lineNumber":266,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":267,"author":{"gitId":"Derek-Hardy"},"content":"    expect(component.courseTabModels[0].sessionsTableRowModels[0]"},{"lineNumber":268,"author":{"gitId":"Derek-Hardy"},"content":"            .feedbackSession.feedbackSessionName).toEqual(\u0027Second Session\u0027);"},{"lineNumber":269,"author":{"gitId":"Derek-Hardy"},"content":"    expect(component.courseTabModels[0].sessionsTableRowModels[1]"},{"lineNumber":270,"author":{"gitId":"Derek-Hardy"},"content":"            .feedbackSession.feedbackSessionName).toEqual(\u0027First Session\u0027);"},{"lineNumber":271,"author":{"gitId":"Derek-Hardy"},"content":"  });"},{"lineNumber":272,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":273,"author":{"gitId":"-"},"content":"  it(\u0027should snap with default fields\u0027, () \u003d\u003e {"},{"lineNumber":274,"author":{"gitId":"-"},"content":"    expect(fixture).toMatchSnapshot();"},{"lineNumber":275,"author":{"gitId":"-"},"content":"  });"},{"lineNumber":276,"author":{"gitId":"-"},"content":""},{"lineNumber":277,"author":{"gitId":"-"},"content":"  it(\u0027should snap with one course without feedback session\u0027, () \u003d\u003e {"},{"lineNumber":278,"author":{"gitId":"-"},"content":"    const courseTabModels: any \u003d {"},{"lineNumber":279,"author":{"gitId":"Derek-Hardy"},"content":"      instructorPrivilege: testInstructorPrivilege,"},{"lineNumber":280,"author":{"gitId":"Derek-Hardy"},"content":"      course: testCourse1,"},{"lineNumber":281,"author":{"gitId":"-"},"content":"      sessionsTableRowModels: [],"},{"lineNumber":282,"author":{"gitId":"-"},"content":"      sessionsTableRowModelsSortBy: SortBy.NONE,"},{"lineNumber":283,"author":{"gitId":"-"},"content":"      sessionsTableRowModelsSortOrder: SortOrder.ASC,"},{"lineNumber":284,"author":{"gitId":"-"},"content":"      hasPopulated: true,"},{"lineNumber":285,"author":{"gitId":"-"},"content":"      isAjaxSuccess: true,"},{"lineNumber":286,"author":{"gitId":"-"},"content":"      isTabExpanded: true,"},{"lineNumber":287,"author":{"gitId":"-"},"content":"    };"},{"lineNumber":288,"author":{"gitId":"-"},"content":"    component.hasCoursesLoaded \u003d true;"},{"lineNumber":289,"author":{"gitId":"-"},"content":"    component.courseTabModels \u003d [courseTabModels];"},{"lineNumber":290,"author":{"gitId":"-"},"content":"    fixture.detectChanges();"},{"lineNumber":291,"author":{"gitId":"-"},"content":"    expect(fixture).toMatchSnapshot();"},{"lineNumber":292,"author":{"gitId":"-"},"content":"  });"},{"lineNumber":293,"author":{"gitId":"-"},"content":""},{"lineNumber":294,"author":{"gitId":"-"},"content":"  it(\u0027should snap with one course with unpopulated feedback sessions\u0027, () \u003d\u003e {"},{"lineNumber":295,"author":{"gitId":"-"},"content":"    const courseTabModels: any \u003d {"},{"lineNumber":296,"author":{"gitId":"Derek-Hardy"},"content":"      instructorPrivilege: testInstructorPrivilege,"},{"lineNumber":297,"author":{"gitId":"Derek-Hardy"},"content":"      course: testCourse2,"},{"lineNumber":298,"author":{"gitId":"-"},"content":"      sessionsTableRowModels: [],"},{"lineNumber":299,"author":{"gitId":"-"},"content":"      sessionsTableRowModelsSortBy: SortBy.NONE,"},{"lineNumber":300,"author":{"gitId":"-"},"content":"      sessionsTableRowModelsSortOrder: SortOrder.ASC,"},{"lineNumber":301,"author":{"gitId":"-"},"content":"      hasPopulated: false,"},{"lineNumber":302,"author":{"gitId":"-"},"content":"      isAjaxSuccess: true,"},{"lineNumber":303,"author":{"gitId":"-"},"content":"      isTabExpanded: true,"},{"lineNumber":304,"author":{"gitId":"-"},"content":"    };"},{"lineNumber":305,"author":{"gitId":"-"},"content":"    component.hasCoursesLoaded \u003d true;"},{"lineNumber":306,"author":{"gitId":"-"},"content":"    component.courseTabModels \u003d [courseTabModels];"},{"lineNumber":307,"author":{"gitId":"-"},"content":"    fixture.detectChanges();"},{"lineNumber":308,"author":{"gitId":"-"},"content":"    expect(fixture).toMatchSnapshot();"},{"lineNumber":309,"author":{"gitId":"-"},"content":"  });"},{"lineNumber":310,"author":{"gitId":"-"},"content":""},{"lineNumber":311,"author":{"gitId":"-"},"content":"  it(\u0027should snap with one course with error loading feedback sessions\u0027, () \u003d\u003e {"},{"lineNumber":312,"author":{"gitId":"-"},"content":"    const courseTabModels: any \u003d {"},{"lineNumber":313,"author":{"gitId":"Derek-Hardy"},"content":"      instructorPrivilege: testInstructorPrivilege,"},{"lineNumber":314,"author":{"gitId":"Derek-Hardy"},"content":"      course: testCourse2,"},{"lineNumber":315,"author":{"gitId":"-"},"content":"      sessionsTableRowModels: [],"},{"lineNumber":316,"author":{"gitId":"-"},"content":"      sessionsTableRowModelsSortBy: SortBy.NONE,"},{"lineNumber":317,"author":{"gitId":"-"},"content":"      sessionsTableRowModelsSortOrder: SortOrder.ASC,"},{"lineNumber":318,"author":{"gitId":"-"},"content":"      hasPopulated: false,"},{"lineNumber":319,"author":{"gitId":"-"},"content":"      isAjaxSuccess: false,"},{"lineNumber":320,"author":{"gitId":"-"},"content":"      isTabExpanded: true,"},{"lineNumber":321,"author":{"gitId":"-"},"content":"    };"},{"lineNumber":322,"author":{"gitId":"-"},"content":"    component.hasCoursesLoaded \u003d true;"},{"lineNumber":323,"author":{"gitId":"-"},"content":"    component.courseTabModels \u003d [courseTabModels];"},{"lineNumber":324,"author":{"gitId":"-"},"content":"    fixture.detectChanges();"},{"lineNumber":325,"author":{"gitId":"-"},"content":"    expect(fixture).toMatchSnapshot();"},{"lineNumber":326,"author":{"gitId":"-"},"content":"  });"},{"lineNumber":327,"author":{"gitId":"-"},"content":""},{"lineNumber":328,"author":{"gitId":"-"},"content":"  it(\u0027should snap with one course with unexpanded course tab\u0027, () \u003d\u003e {"},{"lineNumber":329,"author":{"gitId":"-"},"content":"    const courseTabModels: any \u003d {"},{"lineNumber":330,"author":{"gitId":"Derek-Hardy"},"content":"      instructorPrivilege: testInstructorPrivilege,"},{"lineNumber":331,"author":{"gitId":"Derek-Hardy"},"content":"      course: testCourse2,"},{"lineNumber":332,"author":{"gitId":"-"},"content":"      sessionsTableRowModels: [],"},{"lineNumber":333,"author":{"gitId":"-"},"content":"      sessionsTableRowModelsSortBy: SortBy.NONE,"},{"lineNumber":334,"author":{"gitId":"-"},"content":"      sessionsTableRowModelsSortOrder: SortOrder.ASC,"},{"lineNumber":335,"author":{"gitId":"-"},"content":"      hasPopulated: false,"},{"lineNumber":336,"author":{"gitId":"-"},"content":"      isAjaxSuccess: true,"},{"lineNumber":337,"author":{"gitId":"-"},"content":"      isTabExpanded: false,"},{"lineNumber":338,"author":{"gitId":"-"},"content":"    };"},{"lineNumber":339,"author":{"gitId":"-"},"content":"    component.hasCoursesLoaded \u003d true;"},{"lineNumber":340,"author":{"gitId":"-"},"content":"    component.courseTabModels \u003d [courseTabModels];"},{"lineNumber":341,"author":{"gitId":"-"},"content":"    fixture.detectChanges();"},{"lineNumber":342,"author":{"gitId":"-"},"content":"    expect(fixture).toMatchSnapshot();"},{"lineNumber":343,"author":{"gitId":"-"},"content":"  });"},{"lineNumber":344,"author":{"gitId":"-"},"content":""},{"lineNumber":345,"author":{"gitId":"-"},"content":"  it(\u0027should snap with one course with one feedback session with instructor privilege\u0027, () \u003d\u003e {"},{"lineNumber":346,"author":{"gitId":"-"},"content":"    const sessionsTableRowModel: any \u003d {"},{"lineNumber":347,"author":{"gitId":"Derek-Hardy"},"content":"      feedbackSession: testFeedbackSession1,"},{"lineNumber":348,"author":{"gitId":"Derek-Hardy"},"content":"      instructorPrivilege: testInstructorPrivilege,"},{"lineNumber":349,"author":{"gitId":"-"},"content":"      responseRate: \u00270 / 6\u0027,"},{"lineNumber":350,"author":{"gitId":"-"},"content":"      isLoadingResponseRate: false,"},{"lineNumber":351,"author":{"gitId":"-"},"content":"    };"},{"lineNumber":352,"author":{"gitId":"-"},"content":"    const courseTabModels: any \u003d {"},{"lineNumber":353,"author":{"gitId":"Derek-Hardy"},"content":"      instructorPrivilege: testInstructorPrivilege,"},{"lineNumber":354,"author":{"gitId":"Derek-Hardy"},"content":"      course: testCourse1,"},{"lineNumber":355,"author":{"gitId":"-"},"content":"      sessionsTableRowModels: [sessionsTableRowModel],"},{"lineNumber":356,"author":{"gitId":"-"},"content":"      sessionsTableRowModelsSortBy: SortBy.NONE,"},{"lineNumber":357,"author":{"gitId":"-"},"content":"      sessionsTableRowModelsSortOrder: SortOrder.ASC,"},{"lineNumber":358,"author":{"gitId":"-"},"content":"      hasPopulated: true,"},{"lineNumber":359,"author":{"gitId":"-"},"content":"      isAjaxSuccess: true,"},{"lineNumber":360,"author":{"gitId":"-"},"content":"      isTabExpanded: true,"},{"lineNumber":361,"author":{"gitId":"-"},"content":"    };"},{"lineNumber":362,"author":{"gitId":"-"},"content":"    component.hasCoursesLoaded \u003d true;"},{"lineNumber":363,"author":{"gitId":"-"},"content":"    component.courseTabModels \u003d [courseTabModels];"},{"lineNumber":364,"author":{"gitId":"-"},"content":"    fixture.detectChanges();"},{"lineNumber":365,"author":{"gitId":"-"},"content":"    expect(fixture).toMatchSnapshot();"},{"lineNumber":366,"author":{"gitId":"-"},"content":"  });"},{"lineNumber":367,"author":{"gitId":"-"},"content":""},{"lineNumber":368,"author":{"gitId":"-"},"content":"  it(\u0027should snap with one course with two feedback sessions with tutor privilege\u0027, () \u003d\u003e {"},{"lineNumber":369,"author":{"gitId":"-"},"content":"    const tutorPrivilege: any \u003d {"},{"lineNumber":370,"author":{"gitId":"-"},"content":"      canModifyCourse: false,"},{"lineNumber":371,"author":{"gitId":"-"},"content":"      canModifySession: false,"},{"lineNumber":372,"author":{"gitId":"-"},"content":"      canModifyStudent: false,"},{"lineNumber":373,"author":{"gitId":"-"},"content":"      canSubmitSessionInSections: false,"},{"lineNumber":374,"author":{"gitId":"-"},"content":"    };"},{"lineNumber":375,"author":{"gitId":"-"},"content":"    const sessionsTableRowModel1: any \u003d {"},{"lineNumber":376,"author":{"gitId":"Derek-Hardy"},"content":"      feedbackSession: testFeedbackSession1,"},{"lineNumber":377,"author":{"gitId":"-"},"content":"      instructorPrivilege: tutorPrivilege,"},{"lineNumber":378,"author":{"gitId":"-"},"content":"      responseRate: \u00270 / 6\u0027,"},{"lineNumber":379,"author":{"gitId":"-"},"content":"      isLoadingResponseRate: false,"},{"lineNumber":380,"author":{"gitId":"-"},"content":"    };"},{"lineNumber":381,"author":{"gitId":"-"},"content":"    const sessionsTableRowModel2: any \u003d {"},{"lineNumber":382,"author":{"gitId":"Derek-Hardy"},"content":"      feedbackSession: testFeedbackSession2,"},{"lineNumber":383,"author":{"gitId":"-"},"content":"      instructorPrivilege: tutorPrivilege,"},{"lineNumber":384,"author":{"gitId":"-"},"content":"      responseRate: \u00275 / 6\u0027,"},{"lineNumber":385,"author":{"gitId":"-"},"content":"      isLoadingResponseRate: false,"},{"lineNumber":386,"author":{"gitId":"-"},"content":"    };"},{"lineNumber":387,"author":{"gitId":"-"},"content":"    const courseTabModels: any \u003d {"},{"lineNumber":388,"author":{"gitId":"-"},"content":"      instructorPrivilege: tutorPrivilege,"},{"lineNumber":389,"author":{"gitId":"Derek-Hardy"},"content":"      course: testCourse2,"},{"lineNumber":390,"author":{"gitId":"-"},"content":"      sessionsTableRowModels: [sessionsTableRowModel1, sessionsTableRowModel2],"},{"lineNumber":391,"author":{"gitId":"-"},"content":"      sessionsTableRowModelsSortBy: SortBy.COURSE_CREATION_DATE,"},{"lineNumber":392,"author":{"gitId":"-"},"content":"      sessionsTableRowModelsSortOrder: SortOrder.ASC,"},{"lineNumber":393,"author":{"gitId":"-"},"content":"      hasPopulated: true,"},{"lineNumber":394,"author":{"gitId":"-"},"content":"      isAjaxSuccess: true,"},{"lineNumber":395,"author":{"gitId":"-"},"content":"      isTabExpanded: true,"},{"lineNumber":396,"author":{"gitId":"-"},"content":"    };"},{"lineNumber":397,"author":{"gitId":"-"},"content":"    component.hasCoursesLoaded \u003d true;"},{"lineNumber":398,"author":{"gitId":"-"},"content":"    component.courseTabModels \u003d [courseTabModels];"},{"lineNumber":399,"author":{"gitId":"-"},"content":"    fixture.detectChanges();"},{"lineNumber":400,"author":{"gitId":"-"},"content":"    expect(fixture).toMatchSnapshot();"},{"lineNumber":401,"author":{"gitId":"-"},"content":"  });"},{"lineNumber":402,"author":{"gitId":"-"},"content":""},{"lineNumber":403,"author":{"gitId":"-"},"content":"  it(\u0027should snap when courses are still loading\u0027, () \u003d\u003e {"},{"lineNumber":404,"author":{"gitId":"-"},"content":"    const courseTabModels: any \u003d {"},{"lineNumber":405,"author":{"gitId":"Derek-Hardy"},"content":"      instructorPrivilege: testInstructorPrivilege,"},{"lineNumber":406,"author":{"gitId":"Derek-Hardy"},"content":"      course: testCourse2,"},{"lineNumber":407,"author":{"gitId":"-"},"content":"      sessionsTableRowModels: [],"},{"lineNumber":408,"author":{"gitId":"-"},"content":"      sessionsTableRowModelsSortBy: SortBy.NONE,"},{"lineNumber":409,"author":{"gitId":"-"},"content":"      sessionsTableRowModelsSortOrder: SortOrder.ASC,"},{"lineNumber":410,"author":{"gitId":"-"},"content":"      hasPopulated: true,"},{"lineNumber":411,"author":{"gitId":"-"},"content":"      isAjaxSuccess: true,"},{"lineNumber":412,"author":{"gitId":"-"},"content":"      isTabExpanded: true,"},{"lineNumber":413,"author":{"gitId":"-"},"content":"    };"},{"lineNumber":414,"author":{"gitId":"-"},"content":"    component.hasCoursesLoaded \u003d false;"},{"lineNumber":415,"author":{"gitId":"-"},"content":"    component.courseTabModels \u003d [courseTabModels];"},{"lineNumber":416,"author":{"gitId":"-"},"content":"    fixture.detectChanges();"},{"lineNumber":417,"author":{"gitId":"-"},"content":"    expect(fixture).toMatchSnapshot();"},{"lineNumber":418,"author":{"gitId":"-"},"content":"  });"},{"lineNumber":419,"author":{"gitId":"-"},"content":"});"}],"authorContributionMap":{"Derek-Hardy":223,"-":196}},{"path":"src/web/app/pages-instructor/instructor-home-page/instructor-home-page.component.ts","fileType":"ts","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"import { Component, OnInit } from \u0027@angular/core\u0027;"},{"lineNumber":2,"author":{"gitId":"-"},"content":"import { Router } from \u0027@angular/router\u0027;"},{"lineNumber":3,"author":{"gitId":"-"},"content":"import { NgbModal, NgbModalRef } from \u0027@ng-bootstrap/ng-bootstrap\u0027;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import { forkJoin, Observable } from \u0027rxjs\u0027;"},{"lineNumber":5,"author":{"gitId":"-"},"content":"import { finalize } from \u0027rxjs/operators\u0027;"},{"lineNumber":6,"author":{"gitId":"-"},"content":"import { CourseService } from \u0027../../../services/course.service\u0027;"},{"lineNumber":7,"author":{"gitId":"-"},"content":"import { FeedbackQuestionsService } from \u0027../../../services/feedback-questions.service\u0027;"},{"lineNumber":8,"author":{"gitId":"-"},"content":"import { FeedbackSessionsService } from \u0027../../../services/feedback-sessions.service\u0027;"},{"lineNumber":9,"author":{"gitId":"-"},"content":"import { InstructorService } from \u0027../../../services/instructor.service\u0027;"},{"lineNumber":10,"author":{"gitId":"-"},"content":"import { NavigationService } from \u0027../../../services/navigation.service\u0027;"},{"lineNumber":11,"author":{"gitId":"-"},"content":"import { SimpleModalService } from \u0027../../../services/simple-modal.service\u0027;"},{"lineNumber":12,"author":{"gitId":"-"},"content":"import { StatusMessageService } from \u0027../../../services/status-message.service\u0027;"},{"lineNumber":13,"author":{"gitId":"-"},"content":"import { StudentService } from \u0027../../../services/student.service\u0027;"},{"lineNumber":14,"author":{"gitId":"-"},"content":"import { TableComparatorService } from \u0027../../../services/table-comparator.service\u0027;"},{"lineNumber":15,"author":{"gitId":"-"},"content":"import {"},{"lineNumber":16,"author":{"gitId":"-"},"content":"  Course,"},{"lineNumber":17,"author":{"gitId":"-"},"content":"  CourseArchive,"},{"lineNumber":18,"author":{"gitId":"-"},"content":"  Courses,"},{"lineNumber":19,"author":{"gitId":"-"},"content":"  FeedbackSession,"},{"lineNumber":20,"author":{"gitId":"-"},"content":"  FeedbackSessions,"},{"lineNumber":21,"author":{"gitId":"-"},"content":"  InstructorPrivilege,"},{"lineNumber":22,"author":{"gitId":"-"},"content":"} from \u0027../../../types/api-output\u0027;"},{"lineNumber":23,"author":{"gitId":"-"},"content":"import { DEFAULT_INSTRUCTOR_PRIVILEGE } from \u0027../../../types/instructor-privilege\u0027;"},{"lineNumber":24,"author":{"gitId":"-"},"content":"import { SortBy, SortOrder } from \u0027../../../types/sort-properties\u0027;"},{"lineNumber":25,"author":{"gitId":"-"},"content":"import {"},{"lineNumber":26,"author":{"gitId":"-"},"content":"  CopySessionResult,"},{"lineNumber":27,"author":{"gitId":"-"},"content":"  SessionsTableColumn,"},{"lineNumber":28,"author":{"gitId":"-"},"content":"  SessionsTableHeaderColorScheme,"},{"lineNumber":29,"author":{"gitId":"-"},"content":"  SessionsTableRowModel,"},{"lineNumber":30,"author":{"gitId":"-"},"content":"} from \u0027../../components/sessions-table/sessions-table-model\u0027;"},{"lineNumber":31,"author":{"gitId":"-"},"content":"import { SimpleModalType } from \u0027../../components/simple-modal/simple-modal-type\u0027;"},{"lineNumber":32,"author":{"gitId":"-"},"content":"import { collapseAnim } from \u0027../../components/teammates-common/collapse-anim\u0027;"},{"lineNumber":33,"author":{"gitId":"-"},"content":"import { ErrorMessageOutput } from \u0027../../error-message-output\u0027;"},{"lineNumber":34,"author":{"gitId":"-"},"content":"import { InstructorSessionModalPageComponent } from \u0027../instructor-session-modal-page.component\u0027;"},{"lineNumber":35,"author":{"gitId":"-"},"content":""},{"lineNumber":36,"author":{"gitId":"Derek-Hardy"},"content":"/**"},{"lineNumber":37,"author":{"gitId":"Derek-Hardy"},"content":" * Data model for the course tab."},{"lineNumber":38,"author":{"gitId":"Derek-Hardy"},"content":" */"},{"lineNumber":39,"author":{"gitId":"Derek-Hardy"},"content":"export interface CourseTabModel {"},{"lineNumber":40,"author":{"gitId":"-"},"content":"  course: Course;"},{"lineNumber":41,"author":{"gitId":"-"},"content":"  instructorPrivilege: InstructorPrivilege;"},{"lineNumber":42,"author":{"gitId":"-"},"content":"  sessionsTableRowModels: SessionsTableRowModel[];"},{"lineNumber":43,"author":{"gitId":"-"},"content":"  sessionsTableRowModelsSortBy: SortBy;"},{"lineNumber":44,"author":{"gitId":"-"},"content":"  sessionsTableRowModelsSortOrder: SortOrder;"},{"lineNumber":45,"author":{"gitId":"-"},"content":""},{"lineNumber":46,"author":{"gitId":"-"},"content":"  hasPopulated: boolean;"},{"lineNumber":47,"author":{"gitId":"-"},"content":"  isAjaxSuccess: boolean;"},{"lineNumber":48,"author":{"gitId":"-"},"content":"  isTabExpanded: boolean;"},{"lineNumber":49,"author":{"gitId":"-"},"content":"  hasLoadingFailed: boolean;"},{"lineNumber":50,"author":{"gitId":"-"},"content":"}"},{"lineNumber":51,"author":{"gitId":"-"},"content":""},{"lineNumber":52,"author":{"gitId":"-"},"content":"/**"},{"lineNumber":53,"author":{"gitId":"-"},"content":" * Instructor home page."},{"lineNumber":54,"author":{"gitId":"-"},"content":" */"},{"lineNumber":55,"author":{"gitId":"-"},"content":"@Component({"},{"lineNumber":56,"author":{"gitId":"-"},"content":"  selector: \u0027tm-instructor-home-page\u0027,"},{"lineNumber":57,"author":{"gitId":"-"},"content":"  templateUrl: \u0027./instructor-home-page.component.html\u0027,"},{"lineNumber":58,"author":{"gitId":"-"},"content":"  styleUrls: [\u0027./instructor-home-page.component.scss\u0027],"},{"lineNumber":59,"author":{"gitId":"-"},"content":"  animations: [collapseAnim],"},{"lineNumber":60,"author":{"gitId":"-"},"content":"})"},{"lineNumber":61,"author":{"gitId":"-"},"content":"export class InstructorHomePageComponent extends InstructorSessionModalPageComponent implements OnInit {"},{"lineNumber":62,"author":{"gitId":"-"},"content":""},{"lineNumber":63,"author":{"gitId":"-"},"content":"  private static readonly coursesToLoad: number \u003d 3;"},{"lineNumber":64,"author":{"gitId":"-"},"content":"  // enum"},{"lineNumber":65,"author":{"gitId":"-"},"content":"  SessionsTableColumn: typeof SessionsTableColumn \u003d SessionsTableColumn;"},{"lineNumber":66,"author":{"gitId":"-"},"content":"  SessionsTableHeaderColorScheme: typeof SessionsTableHeaderColorScheme \u003d SessionsTableHeaderColorScheme;"},{"lineNumber":67,"author":{"gitId":"-"},"content":"  SortBy: typeof SortBy \u003d SortBy;"},{"lineNumber":68,"author":{"gitId":"-"},"content":""},{"lineNumber":69,"author":{"gitId":"-"},"content":"  studentSearchkey: string \u003d \u0027\u0027;"},{"lineNumber":70,"author":{"gitId":"-"},"content":"  instructorCoursesSortBy: SortBy \u003d SortBy.COURSE_CREATION_DATE;"},{"lineNumber":71,"author":{"gitId":"-"},"content":""},{"lineNumber":72,"author":{"gitId":"-"},"content":"  // data"},{"lineNumber":73,"author":{"gitId":"-"},"content":"  courseTabModels: CourseTabModel[] \u003d [];"},{"lineNumber":74,"author":{"gitId":"-"},"content":""},{"lineNumber":75,"author":{"gitId":"-"},"content":"  hasCoursesLoaded: boolean \u003d false;"},{"lineNumber":76,"author":{"gitId":"-"},"content":"  hasCoursesLoadingFailed: boolean \u003d false;"},{"lineNumber":77,"author":{"gitId":"-"},"content":"  isNewUser: boolean \u003d false;"},{"lineNumber":78,"author":{"gitId":"-"},"content":""},{"lineNumber":79,"author":{"gitId":"-"},"content":"  constructor(router: Router,"},{"lineNumber":80,"author":{"gitId":"-"},"content":"              statusMessageService: StatusMessageService,"},{"lineNumber":81,"author":{"gitId":"-"},"content":"              navigationService: NavigationService,"},{"lineNumber":82,"author":{"gitId":"-"},"content":"              feedbackSessionsService: FeedbackSessionsService,"},{"lineNumber":83,"author":{"gitId":"-"},"content":"              feedbackQuestionsService: FeedbackQuestionsService,"},{"lineNumber":84,"author":{"gitId":"-"},"content":"              ngbModal: NgbModal,"},{"lineNumber":85,"author":{"gitId":"-"},"content":"              studentService: StudentService,"},{"lineNumber":86,"author":{"gitId":"-"},"content":"              instructorService: InstructorService,"},{"lineNumber":87,"author":{"gitId":"-"},"content":"              tableComparatorService: TableComparatorService,"},{"lineNumber":88,"author":{"gitId":"-"},"content":"              private simpleModalService: SimpleModalService,"},{"lineNumber":89,"author":{"gitId":"-"},"content":"              private courseService: CourseService) {"},{"lineNumber":90,"author":{"gitId":"-"},"content":"    super(router, instructorService, statusMessageService, navigationService, feedbackSessionsService,"},{"lineNumber":91,"author":{"gitId":"-"},"content":"        feedbackQuestionsService, tableComparatorService, ngbModal, studentService);"},{"lineNumber":92,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":93,"author":{"gitId":"-"},"content":""},{"lineNumber":94,"author":{"gitId":"-"},"content":"  ngOnInit(): void {"},{"lineNumber":95,"author":{"gitId":"-"},"content":"    this.loadCourses();"},{"lineNumber":96,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":97,"author":{"gitId":"-"},"content":""},{"lineNumber":98,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":99,"author":{"gitId":"-"},"content":"   * Gets a list of courses belong to current user."},{"lineNumber":100,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":101,"author":{"gitId":"-"},"content":"  get courseCandidates(): Course[] {"},{"lineNumber":102,"author":{"gitId":"-"},"content":"    return this.courseTabModels.map((m: CourseTabModel) \u003d\u003e m.course);"},{"lineNumber":103,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":104,"author":{"gitId":"-"},"content":""},{"lineNumber":105,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":106,"author":{"gitId":"-"},"content":"   * Handles click events on the course tab model."},{"lineNumber":107,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":108,"author":{"gitId":"-"},"content":"  handleClick(event: Event, courseTabModel: CourseTabModel): boolean {"},{"lineNumber":109,"author":{"gitId":"-"},"content":"    if (event.target \u0026\u0026"},{"lineNumber":110,"author":{"gitId":"-"},"content":"        !(event.target as HTMLElement).className.includes(\u0027dropdown-toggle\u0027)) {"},{"lineNumber":111,"author":{"gitId":"-"},"content":"      return !courseTabModel.isTabExpanded;"},{"lineNumber":112,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":113,"author":{"gitId":"-"},"content":"    return courseTabModel.isTabExpanded;"},{"lineNumber":114,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":115,"author":{"gitId":"-"},"content":""},{"lineNumber":116,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":117,"author":{"gitId":"-"},"content":"   * Redirect to the search page and query the search"},{"lineNumber":118,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":119,"author":{"gitId":"-"},"content":"  search(): void {"},{"lineNumber":120,"author":{"gitId":"-"},"content":"    this.navigationService.navigateByURL(this.router, \u0027/web/instructor/search\u0027,"},{"lineNumber":121,"author":{"gitId":"-"},"content":"        { studentSearchkey: this.studentSearchkey });"},{"lineNumber":122,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":123,"author":{"gitId":"-"},"content":""},{"lineNumber":124,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":125,"author":{"gitId":"-"},"content":"   * Archives the entire course from the instructor"},{"lineNumber":126,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":127,"author":{"gitId":"-"},"content":"  archiveCourse(courseId: string): void {"},{"lineNumber":128,"author":{"gitId":"-"},"content":"    const modalContent: string \u003d \u0027This action can be reverted by going to the \"Courses\" tab and unarchiving the desired course(s).\u0027;"},{"lineNumber":129,"author":{"gitId":"-"},"content":""},{"lineNumber":130,"author":{"gitId":"-"},"content":"    const modalRef: NgbModalRef \u003d"},{"lineNumber":131,"author":{"gitId":"-"},"content":"        this.simpleModalService.openConfirmationModal("},{"lineNumber":132,"author":{"gitId":"-"},"content":"            `Archive course \u003cstrong\u003e${courseId}\u003c/strong\u003e?`, SimpleModalType.INFO, modalContent);"},{"lineNumber":133,"author":{"gitId":"-"},"content":"    modalRef.result.then(() \u003d\u003e {"},{"lineNumber":134,"author":{"gitId":"-"},"content":"      this.courseService.changeArchiveStatus(courseId, {"},{"lineNumber":135,"author":{"gitId":"-"},"content":"        archiveStatus: true,"},{"lineNumber":136,"author":{"gitId":"-"},"content":"      }).subscribe((courseArchive: CourseArchive) \u003d\u003e {"},{"lineNumber":137,"author":{"gitId":"-"},"content":"        this.courseTabModels \u003d this.courseTabModels.filter((model: CourseTabModel) \u003d\u003e {"},{"lineNumber":138,"author":{"gitId":"-"},"content":"          return model.course.courseId !\u003d\u003d courseId;"},{"lineNumber":139,"author":{"gitId":"-"},"content":"        });"},{"lineNumber":140,"author":{"gitId":"-"},"content":"        this.statusMessageService.showSuccessToast(`The course ${courseArchive.courseId} has been archived."},{"lineNumber":141,"author":{"gitId":"-"},"content":"            You can retrieve it from the Courses page.`);"},{"lineNumber":142,"author":{"gitId":"-"},"content":"      }, (resp: ErrorMessageOutput) \u003d\u003e {"},{"lineNumber":143,"author":{"gitId":"-"},"content":"        this.statusMessageService.showErrorToast(resp.error.message);"},{"lineNumber":144,"author":{"gitId":"-"},"content":"      });"},{"lineNumber":145,"author":{"gitId":"-"},"content":"    }, () \u003d\u003e {});"},{"lineNumber":146,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":147,"author":{"gitId":"-"},"content":""},{"lineNumber":148,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":149,"author":{"gitId":"-"},"content":"   * Deletes the entire course from the instructor"},{"lineNumber":150,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":151,"author":{"gitId":"-"},"content":"  deleteCourse(courseId: string): void {"},{"lineNumber":152,"author":{"gitId":"-"},"content":"    const modalContent: string \u003d \u0027This action can be reverted by going to the \"Courses\" tab and restoring the desired course(s).\u0027;"},{"lineNumber":153,"author":{"gitId":"-"},"content":""},{"lineNumber":154,"author":{"gitId":"-"},"content":"    const modalRef: NgbModalRef \u003d this.simpleModalService.openConfirmationModal("},{"lineNumber":155,"author":{"gitId":"-"},"content":"        `Move course \u003cstrong\u003e${courseId}\u003c/strong\u003e to Recycle Bin`, SimpleModalType.WARNING, modalContent);"},{"lineNumber":156,"author":{"gitId":"-"},"content":"    modalRef.result.then(() \u003d\u003e {"},{"lineNumber":157,"author":{"gitId":"-"},"content":"      this.courseService.binCourse(courseId).subscribe((course: Course) \u003d\u003e {"},{"lineNumber":158,"author":{"gitId":"-"},"content":"        this.courseTabModels \u003d this.courseTabModels.filter((model: CourseTabModel) \u003d\u003e {"},{"lineNumber":159,"author":{"gitId":"-"},"content":"          return model.course.courseId !\u003d\u003d courseId;"},{"lineNumber":160,"author":{"gitId":"-"},"content":"        });"},{"lineNumber":161,"author":{"gitId":"-"},"content":"        this.statusMessageService.showSuccessToast("},{"lineNumber":162,"author":{"gitId":"-"},"content":"            `The course ${course.courseId} has been deleted. You can restore it from the Recycle Bin manually.`);"},{"lineNumber":163,"author":{"gitId":"-"},"content":"      }, (resp: ErrorMessageOutput) \u003d\u003e {"},{"lineNumber":164,"author":{"gitId":"-"},"content":"        this.statusMessageService.showErrorToast(resp.error.message);"},{"lineNumber":165,"author":{"gitId":"-"},"content":"      });"},{"lineNumber":166,"author":{"gitId":"-"},"content":"    }, () \u003d\u003e {});"},{"lineNumber":167,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":168,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":169,"author":{"gitId":"-"},"content":"   * Loads courses of current instructor."},{"lineNumber":170,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":171,"author":{"gitId":"-"},"content":"  loadCourses(): void {"},{"lineNumber":172,"author":{"gitId":"-"},"content":"    this.hasCoursesLoaded \u003d false;"},{"lineNumber":173,"author":{"gitId":"-"},"content":"    this.hasCoursesLoadingFailed \u003d false;"},{"lineNumber":174,"author":{"gitId":"-"},"content":"    this.courseTabModels \u003d [];"},{"lineNumber":175,"author":{"gitId":"-"},"content":"    this.courseService.getInstructorCoursesThatAreActive()"},{"lineNumber":176,"author":{"gitId":"-"},"content":"      .pipe(finalize(() \u003d\u003e {"},{"lineNumber":177,"author":{"gitId":"-"},"content":"        this.hasCoursesLoaded \u003d true;"},{"lineNumber":178,"author":{"gitId":"-"},"content":"      })).subscribe((courses: Courses) \u003d\u003e {"},{"lineNumber":179,"author":{"gitId":"-"},"content":"        courses.courses.forEach((course: Course) \u003d\u003e {"},{"lineNumber":180,"author":{"gitId":"-"},"content":"          const model: CourseTabModel \u003d {"},{"lineNumber":181,"author":{"gitId":"-"},"content":"            course,"},{"lineNumber":182,"author":{"gitId":"-"},"content":"            instructorPrivilege: course.privileges || DEFAULT_INSTRUCTOR_PRIVILEGE,"},{"lineNumber":183,"author":{"gitId":"-"},"content":"            sessionsTableRowModels: [],"},{"lineNumber":184,"author":{"gitId":"-"},"content":"            isTabExpanded: false,"},{"lineNumber":185,"author":{"gitId":"-"},"content":"            isAjaxSuccess: true,"},{"lineNumber":186,"author":{"gitId":"-"},"content":"            hasPopulated: false,"},{"lineNumber":187,"author":{"gitId":"-"},"content":"            hasLoadingFailed: false,"},{"lineNumber":188,"author":{"gitId":"-"},"content":"            sessionsTableRowModelsSortBy: SortBy.NONE,"},{"lineNumber":189,"author":{"gitId":"-"},"content":"            sessionsTableRowModelsSortOrder: SortOrder.ASC,"},{"lineNumber":190,"author":{"gitId":"-"},"content":"          };"},{"lineNumber":191,"author":{"gitId":"-"},"content":""},{"lineNumber":192,"author":{"gitId":"-"},"content":"          this.courseTabModels.push(model);"},{"lineNumber":193,"author":{"gitId":"-"},"content":"        });"},{"lineNumber":194,"author":{"gitId":"-"},"content":"        this.isNewUser \u003d !courses.courses.some((course: Course) \u003d\u003e !/-demo\\d*$/.test(course.courseId));"},{"lineNumber":195,"author":{"gitId":"-"},"content":"        this.sortCoursesBy(this.instructorCoursesSortBy);"},{"lineNumber":196,"author":{"gitId":"-"},"content":"      }, (resp: ErrorMessageOutput) \u003d\u003e {"},{"lineNumber":197,"author":{"gitId":"-"},"content":"        this.hasCoursesLoadingFailed \u003d true;"},{"lineNumber":198,"author":{"gitId":"-"},"content":"        this.statusMessageService.showErrorToast(resp.error.message);"},{"lineNumber":199,"author":{"gitId":"-"},"content":""},{"lineNumber":200,"author":{"gitId":"-"},"content":"      });"},{"lineNumber":201,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":202,"author":{"gitId":"-"},"content":""},{"lineNumber":203,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":204,"author":{"gitId":"-"},"content":"   * Loads the feedback session in the course and sorts them according to end date."},{"lineNumber":205,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":206,"author":{"gitId":"-"},"content":"  loadFeedbackSessions(index: number): void {"},{"lineNumber":207,"author":{"gitId":"-"},"content":"    const model: CourseTabModel \u003d this.courseTabModels[index];"},{"lineNumber":208,"author":{"gitId":"-"},"content":"    model.hasLoadingFailed \u003d false;"},{"lineNumber":209,"author":{"gitId":"-"},"content":"    if (!model.hasPopulated) {"},{"lineNumber":210,"author":{"gitId":"-"},"content":"      this.feedbackSessionsService.getFeedbackSessionsForInstructor(model.course.courseId)"},{"lineNumber":211,"author":{"gitId":"-"},"content":"          .subscribe((response: FeedbackSessions) \u003d\u003e {"},{"lineNumber":212,"author":{"gitId":"-"},"content":"            response.feedbackSessions.forEach((feedbackSession: FeedbackSession) \u003d\u003e {"},{"lineNumber":213,"author":{"gitId":"-"},"content":"              const m: SessionsTableRowModel \u003d {"},{"lineNumber":214,"author":{"gitId":"-"},"content":"                feedbackSession,"},{"lineNumber":215,"author":{"gitId":"-"},"content":"                responseRate: \u0027\u0027,"},{"lineNumber":216,"author":{"gitId":"-"},"content":"                isLoadingResponseRate: false,"},{"lineNumber":217,"author":{"gitId":"-"},"content":"                instructorPrivilege: feedbackSession.privileges || DEFAULT_INSTRUCTOR_PRIVILEGE,"},{"lineNumber":218,"author":{"gitId":"-"},"content":"              };"},{"lineNumber":219,"author":{"gitId":"-"},"content":"              model.sessionsTableRowModels.push(m);"},{"lineNumber":220,"author":{"gitId":"-"},"content":"            });"},{"lineNumber":221,"author":{"gitId":"-"},"content":"            model.hasPopulated \u003d true;"},{"lineNumber":222,"author":{"gitId":"-"},"content":"            if (!model.isAjaxSuccess) {"},{"lineNumber":223,"author":{"gitId":"-"},"content":"              model.isAjaxSuccess \u003d true;"},{"lineNumber":224,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":225,"author":{"gitId":"-"},"content":"          }, (resp: ErrorMessageOutput) \u003d\u003e {"},{"lineNumber":226,"author":{"gitId":"-"},"content":"            model.hasLoadingFailed \u003d true;"},{"lineNumber":227,"author":{"gitId":"-"},"content":"            this.statusMessageService.showErrorToast(resp.error.message);"},{"lineNumber":228,"author":{"gitId":"-"},"content":"          }, () \u003d\u003e this.sortSessionsTableRowModelsEvent(index, SortBy.SESSION_END_DATE));"},{"lineNumber":229,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":230,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":231,"author":{"gitId":"-"},"content":""},{"lineNumber":232,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":233,"author":{"gitId":"-"},"content":"   * Checks the option selected to sort courses."},{"lineNumber":234,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":235,"author":{"gitId":"-"},"content":"  isSelectedForSorting(by: SortBy): boolean {"},{"lineNumber":236,"author":{"gitId":"-"},"content":"    return this.instructorCoursesSortBy \u003d\u003d\u003d by;"},{"lineNumber":237,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":238,"author":{"gitId":"-"},"content":""},{"lineNumber":239,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":240,"author":{"gitId":"-"},"content":"   * Sorts the courses according to selected option."},{"lineNumber":241,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":242,"author":{"gitId":"-"},"content":"  sortCoursesBy(by: SortBy): void {"},{"lineNumber":243,"author":{"gitId":"-"},"content":"    this.instructorCoursesSortBy \u003d by;"},{"lineNumber":244,"author":{"gitId":"-"},"content":""},{"lineNumber":245,"author":{"gitId":"-"},"content":"    if (this.courseTabModels.length \u003e 1) {"},{"lineNumber":246,"author":{"gitId":"-"},"content":"      const modelCopy: CourseTabModel[] \u003d JSON.parse(JSON.stringify(this.courseTabModels));"},{"lineNumber":247,"author":{"gitId":"-"},"content":"      modelCopy.sort(this.sortPanelsBy(by));"},{"lineNumber":248,"author":{"gitId":"-"},"content":"      this.courseTabModels \u003d modelCopy;"},{"lineNumber":249,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":250,"author":{"gitId":"-"},"content":"    this.loadLatestCourses();"},{"lineNumber":251,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":252,"author":{"gitId":"-"},"content":""},{"lineNumber":253,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":254,"author":{"gitId":"-"},"content":"   * Loads and expand the latest number of courses."},{"lineNumber":255,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":256,"author":{"gitId":"-"},"content":"  loadLatestCourses(): void {"},{"lineNumber":257,"author":{"gitId":"-"},"content":"    for (let i: number \u003d 0; i \u003c this.courseTabModels.length; i +\u003d 1) {"},{"lineNumber":258,"author":{"gitId":"-"},"content":"      if (i \u003e\u003d InstructorHomePageComponent.coursesToLoad) {"},{"lineNumber":259,"author":{"gitId":"-"},"content":"        break;"},{"lineNumber":260,"author":{"gitId":"-"},"content":"      }"},{"lineNumber":261,"author":{"gitId":"-"},"content":"      this.courseTabModels[i].isTabExpanded \u003d true;"},{"lineNumber":262,"author":{"gitId":"-"},"content":"      this.loadFeedbackSessions(i);"},{"lineNumber":263,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":264,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":265,"author":{"gitId":"-"},"content":""},{"lineNumber":266,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":267,"author":{"gitId":"-"},"content":"   * Sorts the panels of courses in order."},{"lineNumber":268,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":269,"author":{"gitId":"-"},"content":"  sortPanelsBy(by: SortBy):"},{"lineNumber":270,"author":{"gitId":"-"},"content":"      ((a: { course: Course }, b: { course: Course }) \u003d\u003e number) {"},{"lineNumber":271,"author":{"gitId":"-"},"content":"    return ((a: { course: Course }, b: { course: Course }): number \u003d\u003e {"},{"lineNumber":272,"author":{"gitId":"-"},"content":"      let strA: string;"},{"lineNumber":273,"author":{"gitId":"-"},"content":"      let strB: string;"},{"lineNumber":274,"author":{"gitId":"-"},"content":"      let order: SortOrder;"},{"lineNumber":275,"author":{"gitId":"-"},"content":"      switch (by) {"},{"lineNumber":276,"author":{"gitId":"-"},"content":"        case SortBy.COURSE_NAME:"},{"lineNumber":277,"author":{"gitId":"-"},"content":"          strA \u003d a.course.courseName;"},{"lineNumber":278,"author":{"gitId":"-"},"content":"          strB \u003d b.course.courseName;"},{"lineNumber":279,"author":{"gitId":"-"},"content":"          order \u003d SortOrder.ASC;"},{"lineNumber":280,"author":{"gitId":"-"},"content":"          break;"},{"lineNumber":281,"author":{"gitId":"-"},"content":"        case SortBy.COURSE_ID:"},{"lineNumber":282,"author":{"gitId":"-"},"content":"          strA \u003d a.course.courseId;"},{"lineNumber":283,"author":{"gitId":"-"},"content":"          strB \u003d b.course.courseId;"},{"lineNumber":284,"author":{"gitId":"-"},"content":"          order \u003d SortOrder.ASC;"},{"lineNumber":285,"author":{"gitId":"-"},"content":"          break;"},{"lineNumber":286,"author":{"gitId":"-"},"content":"        case SortBy.COURSE_CREATION_DATE:"},{"lineNumber":287,"author":{"gitId":"-"},"content":"          strA \u003d String(a.course.creationTimestamp);"},{"lineNumber":288,"author":{"gitId":"-"},"content":"          strB \u003d String(b.course.creationTimestamp);"},{"lineNumber":289,"author":{"gitId":"-"},"content":"          order \u003d SortOrder.DESC;"},{"lineNumber":290,"author":{"gitId":"-"},"content":"          break;"},{"lineNumber":291,"author":{"gitId":"-"},"content":"        default:"},{"lineNumber":292,"author":{"gitId":"-"},"content":"          strA \u003d \u0027\u0027;"},{"lineNumber":293,"author":{"gitId":"-"},"content":"          strB \u003d \u0027\u0027;"},{"lineNumber":294,"author":{"gitId":"-"},"content":"          order \u003d SortOrder.ASC;"},{"lineNumber":295,"author":{"gitId":"-"},"content":"      }"},{"lineNumber":296,"author":{"gitId":"-"},"content":"      return this.tableComparatorService.compare(by, order, strA, strB);"},{"lineNumber":297,"author":{"gitId":"-"},"content":"    });"},{"lineNumber":298,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":299,"author":{"gitId":"-"},"content":""},{"lineNumber":300,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":301,"author":{"gitId":"-"},"content":"   * Sorts the list of feedback session row."},{"lineNumber":302,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":303,"author":{"gitId":"-"},"content":"  sortSessionsTableRowModelsEvent(tabIndex: number, by: SortBy): void {"},{"lineNumber":304,"author":{"gitId":"-"},"content":"    const tab: CourseTabModel \u003d this.courseTabModels[tabIndex];"},{"lineNumber":305,"author":{"gitId":"-"},"content":""},{"lineNumber":306,"author":{"gitId":"-"},"content":"    tab.sessionsTableRowModelsSortBy \u003d by;"},{"lineNumber":307,"author":{"gitId":"-"},"content":"    // reverse the sort order"},{"lineNumber":308,"author":{"gitId":"-"},"content":"    tab.sessionsTableRowModelsSortOrder \u003d"},{"lineNumber":309,"author":{"gitId":"-"},"content":"        tab.sessionsTableRowModelsSortOrder \u003d\u003d\u003d SortOrder.DESC ? SortOrder.ASC : SortOrder.DESC;"},{"lineNumber":310,"author":{"gitId":"-"},"content":"    tab.sessionsTableRowModels.sort(this.sortModelsBy(by, tab.sessionsTableRowModelsSortOrder));"},{"lineNumber":311,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":312,"author":{"gitId":"-"},"content":""},{"lineNumber":313,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":314,"author":{"gitId":"-"},"content":"   * Loads response rate of a feedback session."},{"lineNumber":315,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":316,"author":{"gitId":"-"},"content":"  loadResponseRateEventHandler(tabIndex: number, rowIndex: number): void {"},{"lineNumber":317,"author":{"gitId":"-"},"content":"    this.loadResponseRate(this.courseTabModels[tabIndex].sessionsTableRowModels[rowIndex]);"},{"lineNumber":318,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":319,"author":{"gitId":"-"},"content":""},{"lineNumber":320,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":321,"author":{"gitId":"-"},"content":"   * Edits the feedback session."},{"lineNumber":322,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":323,"author":{"gitId":"-"},"content":"  editSessionEventHandler(tabIndex: number, rowIndex: number): void {"},{"lineNumber":324,"author":{"gitId":"-"},"content":"    this.editSession(this.courseTabModels[tabIndex].sessionsTableRowModels[rowIndex]);"},{"lineNumber":325,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":326,"author":{"gitId":"-"},"content":""},{"lineNumber":327,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":328,"author":{"gitId":"-"},"content":"   * Moves the feedback session to the recycle bin."},{"lineNumber":329,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":330,"author":{"gitId":"-"},"content":"  moveSessionToRecycleBinEventHandler(tabIndex: number, rowIndex: number): void {"},{"lineNumber":331,"author":{"gitId":"-"},"content":"    const model: SessionsTableRowModel \u003d this.courseTabModels[tabIndex].sessionsTableRowModels[rowIndex];"},{"lineNumber":332,"author":{"gitId":"-"},"content":""},{"lineNumber":333,"author":{"gitId":"-"},"content":"    this.feedbackSessionsService.moveSessionToRecycleBin("},{"lineNumber":334,"author":{"gitId":"-"},"content":"        model.feedbackSession.courseId,"},{"lineNumber":335,"author":{"gitId":"-"},"content":"        model.feedbackSession.feedbackSessionName,"},{"lineNumber":336,"author":{"gitId":"-"},"content":"    )"},{"lineNumber":337,"author":{"gitId":"-"},"content":"        .subscribe(() \u003d\u003e {"},{"lineNumber":338,"author":{"gitId":"-"},"content":"          this.courseTabModels[tabIndex].sessionsTableRowModels.splice("},{"lineNumber":339,"author":{"gitId":"-"},"content":"              this.courseTabModels[tabIndex].sessionsTableRowModels.indexOf(model), 1);"},{"lineNumber":340,"author":{"gitId":"-"},"content":"          this.statusMessageService.showSuccessToast("},{"lineNumber":341,"author":{"gitId":"-"},"content":"              \"The feedback session has been deleted. You can restore it from the \u0027Sessions\u0027 tab.\");"},{"lineNumber":342,"author":{"gitId":"-"},"content":"        }, (resp: ErrorMessageOutput) \u003d\u003e { this.statusMessageService.showErrorToast(resp.error.message); });"},{"lineNumber":343,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":344,"author":{"gitId":"-"},"content":""},{"lineNumber":345,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":346,"author":{"gitId":"-"},"content":"   * Copies the feedback session."},{"lineNumber":347,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":348,"author":{"gitId":"-"},"content":"  copySessionEventHandler(tabIndex: number, result: CopySessionResult): void {"},{"lineNumber":349,"author":{"gitId":"-"},"content":"    this.failedToCopySessions \u003d {};"},{"lineNumber":350,"author":{"gitId":"-"},"content":"    const requestList: Observable\u003cFeedbackSession\u003e[] \u003d this.createSessionCopyRequestsFromRowModel("},{"lineNumber":351,"author":{"gitId":"-"},"content":"        this.courseTabModels[tabIndex].sessionsTableRowModels[result.sessionToCopyRowIndex], result);"},{"lineNumber":352,"author":{"gitId":"-"},"content":"    if (requestList.length \u003d\u003d\u003d 1) {"},{"lineNumber":353,"author":{"gitId":"-"},"content":"      this.copySingleSession(requestList[0]);"},{"lineNumber":354,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":355,"author":{"gitId":"-"},"content":"    if (requestList.length \u003e 1) {"},{"lineNumber":356,"author":{"gitId":"-"},"content":"      forkJoin(requestList).subscribe((newSessions: FeedbackSession[]) \u003d\u003e {"},{"lineNumber":357,"author":{"gitId":"-"},"content":"        if (newSessions.length \u003e 0) {"},{"lineNumber":358,"author":{"gitId":"-"},"content":"          newSessions.forEach((session: FeedbackSession) \u003d\u003e {"},{"lineNumber":359,"author":{"gitId":"-"},"content":"            const model: SessionsTableRowModel \u003d {"},{"lineNumber":360,"author":{"gitId":"-"},"content":"              feedbackSession: session,"},{"lineNumber":361,"author":{"gitId":"-"},"content":"              responseRate: \u0027\u0027,"},{"lineNumber":362,"author":{"gitId":"-"},"content":"              isLoadingResponseRate: false,"},{"lineNumber":363,"author":{"gitId":"-"},"content":"              instructorPrivilege: session.privileges || DEFAULT_INSTRUCTOR_PRIVILEGE,"},{"lineNumber":364,"author":{"gitId":"-"},"content":"            };"},{"lineNumber":365,"author":{"gitId":"-"},"content":"            const courseModel: CourseTabModel | undefined \u003d this.courseTabModels.find((tabModel: CourseTabModel) \u003d\u003e"},{"lineNumber":366,"author":{"gitId":"-"},"content":"                tabModel.course.courseId \u003d\u003d\u003d session.courseId);"},{"lineNumber":367,"author":{"gitId":"-"},"content":"            if (courseModel) {"},{"lineNumber":368,"author":{"gitId":"-"},"content":"              courseModel.sessionsTableRowModels.push(model);"},{"lineNumber":369,"author":{"gitId":"-"},"content":"            }"},{"lineNumber":370,"author":{"gitId":"-"},"content":"          });"},{"lineNumber":371,"author":{"gitId":"-"},"content":"        }"},{"lineNumber":372,"author":{"gitId":"-"},"content":"        this.showCopyStatusMessage();"},{"lineNumber":373,"author":{"gitId":"-"},"content":"      });"},{"lineNumber":374,"author":{"gitId":"-"},"content":"    }"},{"lineNumber":375,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":376,"author":{"gitId":"-"},"content":""},{"lineNumber":377,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":378,"author":{"gitId":"-"},"content":"   * Submits the feedback session as instructor."},{"lineNumber":379,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":380,"author":{"gitId":"-"},"content":"  submitSessionAsInstructorEventHandler(tabIndex: number, rowIndex: number): void {"},{"lineNumber":381,"author":{"gitId":"-"},"content":"    this.submitSessionAsInstructor(this.courseTabModels[tabIndex].sessionsTableRowModels[rowIndex]);"},{"lineNumber":382,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":383,"author":{"gitId":"-"},"content":""},{"lineNumber":384,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":385,"author":{"gitId":"-"},"content":"   * Views the result of a feedback session."},{"lineNumber":386,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":387,"author":{"gitId":"-"},"content":"  viewSessionResultEventHandler(tabIndex: number, rowIndex: number): void {"},{"lineNumber":388,"author":{"gitId":"-"},"content":"    this.viewSessionResult(this.courseTabModels[tabIndex].sessionsTableRowModels[rowIndex]);"},{"lineNumber":389,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":390,"author":{"gitId":"-"},"content":""},{"lineNumber":391,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":392,"author":{"gitId":"-"},"content":"   * Publishes a feedback session."},{"lineNumber":393,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":394,"author":{"gitId":"-"},"content":"  publishSessionEventHandler(tabIndex: number, rowIndex: number): void {"},{"lineNumber":395,"author":{"gitId":"-"},"content":"    this.publishSession(this.courseTabModels[tabIndex].sessionsTableRowModels[rowIndex]);"},{"lineNumber":396,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":397,"author":{"gitId":"-"},"content":""},{"lineNumber":398,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":399,"author":{"gitId":"-"},"content":"   * Unpublishes a feedback session."},{"lineNumber":400,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":401,"author":{"gitId":"-"},"content":"  unpublishSessionEventHandler(tabIndex: number, rowIndex: number): void {"},{"lineNumber":402,"author":{"gitId":"-"},"content":"    this.unpublishSession(this.courseTabModels[tabIndex].sessionsTableRowModels[rowIndex]);"},{"lineNumber":403,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":404,"author":{"gitId":"-"},"content":""},{"lineNumber":405,"author":{"gitId":"-"},"content":"  /**"},{"lineNumber":406,"author":{"gitId":"-"},"content":"   * Downloads the result of a feedback session in csv."},{"lineNumber":407,"author":{"gitId":"-"},"content":"   */"},{"lineNumber":408,"author":{"gitId":"-"},"content":"  downloadSessionResultEventHandler(tabIndex: number, rowIndex: number): void {"},{"lineNumber":409,"author":{"gitId":"-"},"content":"    this.downloadSessionResult(this.courseTabModels[tabIndex].sessionsTableRowModels[rowIndex]);"},{"lineNumber":410,"author":{"gitId":"-"},"content":"  }"},{"lineNumber":411,"author":{"gitId":"-"},"content":"}"}],"authorContributionMap":{"Derek-Hardy":4,"-":407}},{"path":"src/web/app/pages-instructor/instructor-sessions-page/instructor-sessions-page.component.html","fileType":"html","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"\u003cdiv class\u003d\"alert alert-warning\" role\u003d\"alert\" *ngIf\u003d\"!isCoursesLoading \u0026\u0026 courseCandidates.length \u003d\u003d\u003d 0 \u0026\u0026 !hasCourseLoadingFailed\"\u003e"},{"lineNumber":2,"author":{"gitId":"-"},"content":"  You have not created any courses yet, or you have no active courses. Go \u003ca tmRouterLink\u003d\"/web/instructor/courses\"\u003ehere\u003c/a\u003e to create or unarchive a course."},{"lineNumber":3,"author":{"gitId":"-"},"content":"\u003c/div\u003e"},{"lineNumber":4,"author":{"gitId":"-"},"content":""},{"lineNumber":5,"author":{"gitId":"-"},"content":"\u003cdiv\u003e"},{"lineNumber":6,"author":{"gitId":"-"},"content":"  \u003cbutton id\u003d\"btn-add-session\" class\u003d\"btn btn-success\" (click)\u003d\"isSessionEditFormExpanded \u003d true\""},{"lineNumber":7,"author":{"gitId":"jianhandev"},"content":"          [disabled]\u003d\"isSessionEditFormExpanded || isCoursesLoading\"\u003e\u003ci class\u003d\"fas fa-plus\"\u003e\u003c/i\u003e Add New Feedback Session"},{"lineNumber":8,"author":{"gitId":"-"},"content":"  \u003c/button\u003e"},{"lineNumber":9,"author":{"gitId":"-"},"content":"\u003c/div\u003e"},{"lineNumber":10,"author":{"gitId":"-"},"content":""},{"lineNumber":11,"author":{"gitId":"jianhandev"},"content":"\u003cdiv class\u003d\"margin-top-30px\" *ngIf\u003d\"isSessionEditFormExpanded \u0026\u0026 !isCoursesLoading\" @collapseAnim\u003e"},{"lineNumber":12,"author":{"gitId":"-"},"content":"  \u003cdiv *tmIsLoading\u003d \"isCopyOtherSessionLoading\"\u003e"},{"lineNumber":13,"author":{"gitId":"-"},"content":"    \u003ctm-session-edit-form [formMode]\u003d\"SessionEditFormMode.ADD\" [(model)]\u003d\"sessionEditFormModel\""},{"lineNumber":14,"author":{"gitId":"-"},"content":"                          [courseCandidates]\u003d\"courseCandidates\" [templateSessions]\u003d\"templateSessions\""},{"lineNumber":15,"author":{"gitId":"-"},"content":"                          (addNewSessionEvent)\u003d\"addNewSessionHandler()\" (copyOtherSessionsEvent)\u003d\"copyFromOtherSessionsHandler()\""},{"lineNumber":16,"author":{"gitId":"-"},"content":"                          (closeEditFormEvent)\u003d\"isSessionEditFormExpanded \u003d false\""},{"lineNumber":17,"author":{"gitId":"-"},"content":"    \u003e\u003c/tm-session-edit-form\u003e"},{"lineNumber":18,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":19,"author":{"gitId":"-"},"content":"\u003c/div\u003e"},{"lineNumber":20,"author":{"gitId":"-"},"content":""},{"lineNumber":21,"author":{"gitId":"-"},"content":"\u003ctm-loading-retry [shouldShowRetry]\u003d\"hasCourseLoadingFailed || hasFeedbackSessionLoadingFailed\" [message]\u003d\"\u0027Failed to load data\u0027\""},{"lineNumber":22,"author":{"gitId":"-"},"content":"                  (retryEvent)\u003d\"retryLoadingAllData()\"\u003e"},{"lineNumber":23,"author":{"gitId":"-"},"content":"  \u003cdiv class\u003d\"margin-top-30px\"\u003e"},{"lineNumber":24,"author":{"gitId":"-"},"content":"    \u003cdiv *tmIsLoading\u003d\"isCoursesLoading || isMoveToRecycleBinLoading || isCopySessionLoading || isSendReminderLoading || isResultActionLoading\"\u003e"},{"lineNumber":25,"author":{"gitId":"-"},"content":"      \u003cdiv class\u003d\"alert alert-warning margin-top-30px\" role\u003d\"alert\" *ngIf\u003d\"sessionsTableRowModels.length \u003d\u003d\u003d 0 \u0026\u0026 !isFeedbackSessionsLoading\"\u003e"},{"lineNumber":26,"author":{"gitId":"-"},"content":"        You have not created any sessions yet. Use the form above to create a session."},{"lineNumber":27,"author":{"gitId":"-"},"content":"      \u003c/div\u003e"},{"lineNumber":28,"author":{"gitId":"-"},"content":"      \u003ctm-sessions-table *tmIsLoading\u003d\"isFeedbackSessionsLoading\""},{"lineNumber":29,"author":{"gitId":"-"},"content":"                         [sessionsTableRowModels]\u003d\"sessionsTableRowModels\" [sessionsTableRowModelsSortBy]\u003d\"sessionsTableRowModelsSortBy\" [sessionsTableRowModelsSortOrder]\u003d\"sessionsTableRowModelsSortOrder\""},{"lineNumber":30,"author":{"gitId":"-"},"content":"                         [courseCandidates]\u003d\"courseCandidates\" [columnsToShow]\u003d\"[ SessionsTableColumn.COURSE_ID ]\""},{"lineNumber":31,"author":{"gitId":"-"},"content":"                         [headerColorScheme]\u003d\"SessionsTableHeaderColorScheme.BLUE\""},{"lineNumber":32,"author":{"gitId":"-"},"content":"                         (sortSessionsTableRowModelsEvent)\u003d\"sortSessionsTableRowModelsEvent($event)\""},{"lineNumber":33,"author":{"gitId":"-"},"content":"                         (loadResponseRateEvent)\u003d\"loadResponseRateEventHandler($event)\" (editSessionEvent)\u003d\"editSessionEventHandler($event)\""},{"lineNumber":34,"author":{"gitId":"-"},"content":"                         (moveSessionToRecycleBinEvent)\u003d\"moveSessionToRecycleBinEventHandler($event)\" (copySessionEvent)\u003d\"copySessionEventHandler($event)\""},{"lineNumber":35,"author":{"gitId":"-"},"content":"                         (submitSessionAsInstructorEvent)\u003d\"submitSessionAsInstructorEventHandler($event)\" (viewSessionResultEvent)\u003d\"viewSessionResultEventHandler($event)\""},{"lineNumber":36,"author":{"gitId":"-"},"content":"                         (publishSessionEvent)\u003d\"publishSessionEventHandler($event)\" (unpublishSessionEvent)\u003d\"unpublishSessionEventHandler($event)\""},{"lineNumber":37,"author":{"gitId":"-"},"content":"                         (downloadSessionResultsEvent)\u003d\"downloadSessionResultEventHandler($event)\""},{"lineNumber":38,"author":{"gitId":"-"},"content":"                         (resendResultsLinkToStudentsEvent)\u003d\"resendResultsLinkToRespondentsEventHandler(sessionsTableRowModels[$event])\""},{"lineNumber":39,"author":{"gitId":"-"},"content":"                         (sendRemindersToStudentsEvent)\u003d\"sendRemindersToRespondentsEventHandler(sessionsTableRowModels[$event])\"\u003e\u003c/tm-sessions-table\u003e"},{"lineNumber":40,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":41,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":42,"author":{"gitId":"-"},"content":"  \u003cbr/\u003e"},{"lineNumber":43,"author":{"gitId":"-"},"content":""},{"lineNumber":44,"author":{"gitId":"-"},"content":"  \u003cdiv class\u003d\"row\"\u003e"},{"lineNumber":45,"author":{"gitId":"-"},"content":"    \u003cdiv class\u003d\"col-12 text-muted\"\u003e"},{"lineNumber":46,"author":{"gitId":"-"},"content":"      \u003cp\u003e"},{"lineNumber":47,"author":{"gitId":"-"},"content":"        Note: The table above doesn\u0027t contain sessions from archived courses and soft-deleted courses."},{"lineNumber":48,"author":{"gitId":"-"},"content":"        To view sessions from an archived course, unarchive the course first; to view sessions from a course in recycle bin, restore the course first."},{"lineNumber":49,"author":{"gitId":"-"},"content":"      \u003c/p\u003e"},{"lineNumber":50,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":51,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":52,"author":{"gitId":"-"},"content":""},{"lineNumber":53,"author":{"gitId":"-"},"content":"  \u003cdiv class\u003d\"margin-top-30px\"\u003e"},{"lineNumber":54,"author":{"gitId":"-"},"content":"    \u003ctm-sessions-recycle-bin-table"},{"lineNumber":55,"author":{"gitId":"-"},"content":"        *tmIsLoading\u003d\"isRecycleBinLoading || isRestoreFeedbackSessionLoading || isPermanentDeleteLoading\""},{"lineNumber":56,"author":{"gitId":"-"},"content":"        [isRecycleBinExpanded]\u003d\"isRecycleBinExpanded\""},{"lineNumber":57,"author":{"gitId":"-"},"content":"        [recycleBinFeedbackSessionRowModels]\u003d\"recycleBinFeedbackSessionRowModels\""},{"lineNumber":58,"author":{"gitId":"-"},"content":"        [recycleBinFeedbackSessionRowModelsSortBy]\u003d\"recycleBinFeedbackSessionRowModelsSortBy\""},{"lineNumber":59,"author":{"gitId":"-"},"content":"        [recycleBinFeedbackSessionRowModelsSortOrder]\u003d\"recycleBinFeedbackSessionRowModelsSortOrder\""},{"lineNumber":60,"author":{"gitId":"-"},"content":"        (restoreSessionEvent)\u003d\"restoreRecycleBinFeedbackSession($event)\""},{"lineNumber":61,"author":{"gitId":"-"},"content":"        (restoreAllRecycleBinFeedbackSessionEvent)\u003d\"restoreAllRecycleBinFeedbackSession()\""},{"lineNumber":62,"author":{"gitId":"-"},"content":"        (permanentlyDeleteSessionEvent)\u003d\"permanentDeleteSession($event)\""},{"lineNumber":63,"author":{"gitId":"-"},"content":"        (permanentDeleteAllSessionsEvent)\u003d\"permanentDeleteAllSessions()\""},{"lineNumber":64,"author":{"gitId":"-"},"content":"        (sortRecycleBinFeedbackSessionRowsEvent)\u003d\"sortRecycleBinFeedbackSessionRowsEvent($event)\""},{"lineNumber":65,"author":{"gitId":"-"},"content":"        (recycleBinExpandEvent)\u003d\"isRecycleBinExpanded \u003d !isRecycleBinExpanded;\"\u003e"},{"lineNumber":66,"author":{"gitId":"-"},"content":"    \u003c/tm-sessions-recycle-bin-table\u003e"},{"lineNumber":67,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":68,"author":{"gitId":"-"},"content":"\u003c/tm-loading-retry\u003e"}],"authorContributionMap":{"jianhandev":2,"-":66}},{"path":"src/web/app/pages-instructor/instructor-student-list-page/instructor-student-list-page.component.html","fileType":"html","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"\u003ch1\u003eStudent List\u003c/h1\u003e"},{"lineNumber":2,"author":{"gitId":"-"},"content":"\u003cp\u003e"},{"lineNumber":3,"author":{"gitId":"-"},"content":"  This page gives the student details for all your courses. Expand the cards below to view your students."},{"lineNumber":4,"author":{"gitId":"-"},"content":"  Use the \u003ca tmRouterLink\u003d\"/web/instructor/search\"\u003esearch function\u003c/a\u003e if you need to filter for a specific"},{"lineNumber":5,"author":{"gitId":"-"},"content":"  student."},{"lineNumber":6,"author":{"gitId":"-"},"content":"\u003c/p\u003e"},{"lineNumber":7,"author":{"gitId":"-"},"content":"\u003chr\u003e"},{"lineNumber":8,"author":{"gitId":"-"},"content":""},{"lineNumber":9,"author":{"gitId":"-"},"content":"\u003ctm-loading-retry [shouldShowRetry]\u003d\"hasLoadingFailed\" [message]\u003d\"\u0027Failed to load courses\u0027\" (retryEvent)\u003d\"loadCourses()\"\u003e"},{"lineNumber":10,"author":{"gitId":"-"},"content":"  \u003cdiv *tmIsLoading\u003d\"isLoadingCourses\"\u003e\u003c/div\u003e"},{"lineNumber":11,"author":{"gitId":"-"},"content":"  \u003cng-container\u003e"},{"lineNumber":12,"author":{"gitId":"-"},"content":"    \u003cdiv class\u003d\"course-table\" *ngFor\u003d\"let courseTab of courseTabList\"\u003e"},{"lineNumber":13,"author":{"gitId":"-"},"content":"      \u003cdiv class\u003d\"card\"\u003e"},{"lineNumber":14,"author":{"gitId":"-"},"content":"        \u003cdiv class\u003d\"card-header cursor-pointer bg-primary text-white\" (click)\u003d\"toggleCard(courseTab)\"\u003e"},{"lineNumber":15,"author":{"gitId":"-"},"content":"          \u003cstrong\u003e[{{courseTab.course.courseId}}]: {{courseTab.course.courseName}}\u003c/strong\u003e"},{"lineNumber":16,"author":{"gitId":"-"},"content":"          \u003cdiv class\u003d\"card-header-btn-toolbar\"\u003e"},{"lineNumber":17,"author":{"gitId":"-"},"content":"            \u003ctm-panel-chevron [isExpanded]\u003d\"courseTab.hasTabExpanded\"\u003e\u003c/tm-panel-chevron\u003e"},{"lineNumber":18,"author":{"gitId":"-"},"content":"          \u003c/div\u003e"},{"lineNumber":19,"author":{"gitId":"-"},"content":"        \u003c/div\u003e"},{"lineNumber":20,"author":{"gitId":"-"},"content":""},{"lineNumber":21,"author":{"gitId":"-"},"content":"        \u003cdiv *ngIf\u003d\"courseTab.hasTabExpanded\" @collapseAnim\u003e"},{"lineNumber":22,"author":{"gitId":"-"},"content":"          \u003ctm-loading-retry [shouldShowRetry]\u003d\"courseTab.hasLoadingFailed\" [message]\u003d\"\u0027Failed to load students\u0027\" (retryEvent)\u003d\"loadStudents(courseTab)\"\u003e"},{"lineNumber":23,"author":{"gitId":"-"},"content":"            \u003cdiv *tmIsLoading\u003d\"!courseTab.hasStudentLoaded\"\u003e"},{"lineNumber":24,"author":{"gitId":"-"},"content":"              \u003cdiv *ngIf\u003d\"!courseTab.hasLoadingFailed\" class\u003d\"card-body\"\u003e"},{"lineNumber":25,"author":{"gitId":"jianhandev"},"content":"                \u003cng-container *ngIf\u003d\"courseTab.hasStudentLoaded \u0026\u0026 courseTab.stats.numOfStudents \u003e 0, else noStudentsTemplate\"\u003e"},{"lineNumber":26,"author":{"gitId":"-"},"content":"                  \u003cdiv class\u003d\"card-deck text-center text-sm-left\" *ngIf\u003d\"courseTab.stats\"\u003e"},{"lineNumber":27,"author":{"gitId":"-"},"content":"                    \u003cdiv class\u003d\"card\"\u003e"},{"lineNumber":28,"author":{"gitId":"-"},"content":"                      \u003cdiv class\u003d\"card-body\" id\u003d\"num-students\"\u003e"},{"lineNumber":29,"author":{"gitId":"-"},"content":"                        \u003ch3 class\u003d\"card-title inline\"\u003e{{courseTab.stats.numOfStudents}}\u003c/h3\u003e"},{"lineNumber":30,"author":{"gitId":"-"},"content":"                        \u003ch4 class\u003d\"card-text inline\"\u003e students\u003c/h4\u003e"},{"lineNumber":31,"author":{"gitId":"-"},"content":"                      \u003c/div\u003e"},{"lineNumber":32,"author":{"gitId":"-"},"content":"                    \u003c/div\u003e"},{"lineNumber":33,"author":{"gitId":"-"},"content":"                    \u003cdiv class\u003d\"card\"\u003e"},{"lineNumber":34,"author":{"gitId":"-"},"content":"                      \u003cdiv class\u003d\"card-body\" id\u003d\"num-sections\"\u003e"},{"lineNumber":35,"author":{"gitId":"-"},"content":"                        \u003ch3 class\u003d\"card-title inline\"\u003e{{courseTab.stats.numOfSections}}\u003c/h3\u003e"},{"lineNumber":36,"author":{"gitId":"-"},"content":"                        \u003ch4 class\u003d\"card-text inline\"\u003e sections\u003c/h4\u003e"},{"lineNumber":37,"author":{"gitId":"-"},"content":"                      \u003c/div\u003e"},{"lineNumber":38,"author":{"gitId":"-"},"content":"                    \u003c/div\u003e"},{"lineNumber":39,"author":{"gitId":"-"},"content":"                    \u003cdiv class\u003d\"card\"\u003e"},{"lineNumber":40,"author":{"gitId":"-"},"content":"                      \u003cdiv class\u003d\"card-body\" id\u003d\"num-teams\"\u003e"},{"lineNumber":41,"author":{"gitId":"-"},"content":"                        \u003ch3 class\u003d\"card-title inline\"\u003e{{courseTab.stats.numOfTeams}}\u003c/h3\u003e"},{"lineNumber":42,"author":{"gitId":"-"},"content":"                        \u003ch4 class\u003d\"card-text inline\"\u003e teams\u003c/h4\u003e"},{"lineNumber":43,"author":{"gitId":"-"},"content":"                      \u003c/div\u003e"},{"lineNumber":44,"author":{"gitId":"-"},"content":"                    \u003c/div\u003e"},{"lineNumber":45,"author":{"gitId":"-"},"content":"                  \u003c/div\u003e"},{"lineNumber":46,"author":{"gitId":"-"},"content":""},{"lineNumber":47,"author":{"gitId":"-"},"content":"                  \u003chr\u003e"},{"lineNumber":48,"author":{"gitId":"-"},"content":""},{"lineNumber":49,"author":{"gitId":"-"},"content":"                  \u003ca id\u003d\"btn-enroll\" class\u003d\"btn btn-success\""},{"lineNumber":50,"author":{"gitId":"-"},"content":"                      tmRouterLink\u003d\"/web/instructor/courses/enroll\""},{"lineNumber":51,"author":{"gitId":"-"},"content":"                      [queryParams]\u003d\"{courseid: courseTab.course.courseId}\"\u003e"},{"lineNumber":52,"author":{"gitId":"-"},"content":"                    Enroll Students"},{"lineNumber":53,"author":{"gitId":"-"},"content":"                  \u003c/a\u003e"},{"lineNumber":54,"author":{"gitId":"-"},"content":"                  \u003cbr\u003e\u003cbr\u003e"},{"lineNumber":55,"author":{"gitId":"-"},"content":"                  \u003ctm-student-list"},{"lineNumber":56,"author":{"gitId":"-"},"content":"                      [courseId]\u003d\"courseTab.course.courseId\""},{"lineNumber":57,"author":{"gitId":"-"},"content":"                      [students]\u003d\"courseTab.studentList\""},{"lineNumber":58,"author":{"gitId":"-"},"content":"                      [tableSortBy]\u003d\"courseTab.studentSortBy\""},{"lineNumber":59,"author":{"gitId":"-"},"content":"                      [tableSortOrder]\u003d\"courseTab.studentSortOrder\""},{"lineNumber":60,"author":{"gitId":"-"},"content":"                      [useGrayHeading]\u003d\"false\""},{"lineNumber":61,"author":{"gitId":"-"},"content":"                      [enableRemindButton]\u003d\"true\""},{"lineNumber":62,"author":{"gitId":"-"},"content":"                      (sortStudentListEvent)\u003d\"sortStudentList(courseTab, $event)\""},{"lineNumber":63,"author":{"gitId":"-"},"content":"                      (removeStudentFromCourseEvent)\u003d\"removeStudentFromCourse(courseTab, $event)\"\u003e"},{"lineNumber":64,"author":{"gitId":"-"},"content":"                  \u003c/tm-student-list\u003e"},{"lineNumber":65,"author":{"gitId":"-"},"content":"                \u003c/ng-container\u003e"},{"lineNumber":66,"author":{"gitId":"-"},"content":"              \u003c/div\u003e"},{"lineNumber":67,"author":{"gitId":"-"},"content":"            \u003c/div\u003e"},{"lineNumber":68,"author":{"gitId":"-"},"content":"          \u003c/tm-loading-retry\u003e"},{"lineNumber":69,"author":{"gitId":"-"},"content":"        \u003c/div\u003e"},{"lineNumber":70,"author":{"gitId":"-"},"content":""},{"lineNumber":71,"author":{"gitId":"-"},"content":"        \u003cng-template #noStudentsTemplate\u003e"},{"lineNumber":72,"author":{"gitId":"-"},"content":"          \u003ch5\u003eThere are no students in this course.\u003c/h5\u003e"},{"lineNumber":73,"author":{"gitId":"-"},"content":"          \u003ca id\u003d\"btn-enroll\" class\u003d\"btn btn-success\""},{"lineNumber":74,"author":{"gitId":"-"},"content":"              tmRouterLink\u003d\"/web/instructor/courses/enroll\""},{"lineNumber":75,"author":{"gitId":"-"},"content":"              [queryParams]\u003d\"{courseid: courseTab.course.courseId}\"\u003e"},{"lineNumber":76,"author":{"gitId":"-"},"content":"            Enroll Students"},{"lineNumber":77,"author":{"gitId":"-"},"content":"          \u003c/a\u003e"},{"lineNumber":78,"author":{"gitId":"-"},"content":"        \u003c/ng-template\u003e"},{"lineNumber":79,"author":{"gitId":"-"},"content":""},{"lineNumber":80,"author":{"gitId":"-"},"content":"      \u003c/div\u003e"},{"lineNumber":81,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":82,"author":{"gitId":"-"},"content":"  \u003c/ng-container\u003e"},{"lineNumber":83,"author":{"gitId":"-"},"content":"\u003c/tm-loading-retry\u003e"}],"authorContributionMap":{"jianhandev":1,"-":82}},{"path":"src/web/app/pages-student/student-home-page/student-home-page.component.html","fileType":"html","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"\u003ctm-loading-retry [shouldShowRetry]\u003d\"hasCoursesLoadingFailed\" [message]\u003d\"\u0027Failed to load courses\u0027\" (retryEvent)\u003d\"loadStudentCourses()\"\u003e"},{"lineNumber":2,"author":{"gitId":"-"},"content":"  \u003cdiv *tmIsLoading\u003d\"isCoursesLoading\"\u003e\u003c/div\u003e"},{"lineNumber":3,"author":{"gitId":"-"},"content":"  \u003cdiv *ngIf\u003d\"!isCoursesLoading \u0026\u0026 courses.length \u003d\u003d 0; else coursesContainer\"\u003e"},{"lineNumber":4,"author":{"gitId":"-"},"content":"    You are not enrolled in any courses. Please refer to the \u003ca tmRouterLink\u003d\"/web/student/help\"\u003ehelp page\u003c/a\u003e"},{"lineNumber":5,"author":{"gitId":"-"},"content":"    if you need more information."},{"lineNumber":6,"author":{"gitId":"-"},"content":"  \u003c/div\u003e"},{"lineNumber":7,"author":{"gitId":"-"},"content":"  \u003cng-template #coursesContainer\u003e"},{"lineNumber":8,"author":{"gitId":"-"},"content":"    \u003cdiv *ngIf\u003d\"courses.length\" class\u003d\"row mb-2\"\u003e"},{"lineNumber":9,"author":{"gitId":"-"},"content":"      \u003cdiv class\u003d\"col-12\"\u003e"},{"lineNumber":10,"author":{"gitId":"-"},"content":"        \u003cdiv class\u003d\"float-right\"\u003e"},{"lineNumber":11,"author":{"gitId":"-"},"content":"          \u003cstrong class\u003d\"d-inline\"\u003e Sort By: \u003c/strong\u003e"},{"lineNumber":12,"author":{"gitId":"-"},"content":"          \u003cdiv class\u003d\"btn-group\"\u003e"},{"lineNumber":13,"author":{"gitId":"Derek-Hardy"},"content":"            \u003cbutton id\u003d\"sort-course-id-btn\" class\u003d\"btn btn-light\" [disabled]\u003d\"sortBy \u003d\u003d\u003d SortBy.COURSE_ID\" (click)\u003d\"sortCoursesBy(SortBy.COURSE_ID)\"\u003eCourse ID\u003c/button\u003e"},{"lineNumber":14,"author":{"gitId":"Derek-Hardy"},"content":"            \u003cbutton id\u003d\"sort-course-name-btn\" class\u003d\"btn btn-light\" [disabled]\u003d\"sortBy \u003d\u003d\u003d SortBy.COURSE_NAME\" (click)\u003d\"sortCoursesBy(SortBy.COURSE_NAME)\"\u003eCourse Name\u003c/button\u003e"},{"lineNumber":15,"author":{"gitId":"-"},"content":"          \u003c/div\u003e"},{"lineNumber":16,"author":{"gitId":"-"},"content":"        \u003c/div\u003e"},{"lineNumber":17,"author":{"gitId":"-"},"content":"      \u003c/div\u003e"},{"lineNumber":18,"author":{"gitId":"-"},"content":"    \u003c/div\u003e"},{"lineNumber":19,"author":{"gitId":"Derek-Hardy"},"content":"    \u003cng-container *ngFor\u003d\"let studentCourse of courses; index as i\"\u003e"},{"lineNumber":20,"author":{"gitId":"-"},"content":"      \u003cdiv class\u003d\"card bg-light top-padded\"\u003e"},{"lineNumber":21,"author":{"gitId":"-"},"content":"        \u003cdiv class\u003d\"card-header bg-primary text-white\" *ngIf\u003d\"studentCourse.course as course\"\u003e"},{"lineNumber":22,"author":{"gitId":"-"},"content":"          \u003cstrong\u003e[{{ course.courseId }}]: {{ course.courseName }}\u003c/strong\u003e"},{"lineNumber":23,"author":{"gitId":"-"},"content":"          \u003cdiv class\u003d\"card-header-btn-toolbar\"\u003e"},{"lineNumber":24,"author":{"gitId":"-"},"content":"            \u003ca tmRouterLink\u003d\"/web/student/course\" [queryParams]\u003d\"{courseid: course.courseId}\""},{"lineNumber":25,"author":{"gitId":"Derek-Hardy"},"content":"               id\u003d\"view-team-btn-{{i}}\" class\u003d\"btn btn-primary btn-sm button\"\u003e"},{"lineNumber":26,"author":{"gitId":"-"},"content":"              View team"},{"lineNumber":27,"author":{"gitId":"-"},"content":"            \u003c/a\u003e"},{"lineNumber":28,"author":{"gitId":"-"},"content":"          \u003c/div\u003e"},{"lineNumber":29,"author":{"gitId":"-"},"content":"        \u003c/div\u003e"},{"lineNumber":30,"author":{"gitId":"-"},"content":""},{"lineNumber":31,"author":{"gitId":"-"},"content":"        \u003cdiv class\u003d\"table-responsive\"\u003e"},{"lineNumber":32,"author":{"gitId":"-"},"content":"          \u003ctable class\u003d\"table table-striped table-bordered margin-0\" *ngIf\u003d\"studentCourse.feedbackSessions \u0026\u0026 studentCourse.feedbackSessions.length\"\u003e"},{"lineNumber":33,"author":{"gitId":"-"},"content":"            \u003cthead\u003e"},{"lineNumber":34,"author":{"gitId":"-"},"content":"            \u003ctr\u003e"},{"lineNumber":35,"author":{"gitId":"-"},"content":"              \u003cth\u003eSession Name\u003c/th\u003e"},{"lineNumber":36,"author":{"gitId":"-"},"content":"              \u003cth\u003eDeadline\u003c/th\u003e"},{"lineNumber":37,"author":{"gitId":"-"},"content":"              \u003cth\u003eSubmissions\u003c/th\u003e"},{"lineNumber":38,"author":{"gitId":"-"},"content":"              \u003cth\u003eResponses\u003c/th\u003e"},{"lineNumber":39,"author":{"gitId":"-"},"content":"              \u003cth\u003eAction(s)\u003c/th\u003e"},{"lineNumber":40,"author":{"gitId":"-"},"content":"            \u003c/tr\u003e"},{"lineNumber":41,"author":{"gitId":"-"},"content":"            \u003c/thead\u003e"},{"lineNumber":42,"author":{"gitId":"-"},"content":"            \u003ctbody\u003e"},{"lineNumber":43,"author":{"gitId":"Derek-Hardy"},"content":"            \u003ctr *ngFor\u003d\"let session of studentCourse.feedbackSessions; index as i\"\u003e"},{"lineNumber":44,"author":{"gitId":"-"},"content":"              \u003cng-container\u003e"},{"lineNumber":45,"author":{"gitId":"-"},"content":"                \u003ctd\u003e{{ session.session.feedbackSessionName }}\u003c/td\u003e"},{"lineNumber":46,"author":{"gitId":"-"},"content":"                \u003ctd *ngIf\u003d\"session.session.submissionEndTimestamp\"\u003e{{ session.session.submissionEndTimestamp | formatDateDetail: session.session.timeZone }}\u003c/td\u003e"},{"lineNumber":47,"author":{"gitId":"-"},"content":"                \u003ctd\u003e"},{"lineNumber":48,"author":{"gitId":"-"},"content":"                  \u003cspan [ngbTooltip]\u003d\"getSubmissionStatusTooltip(session)\"\u003e"},{"lineNumber":49,"author":{"gitId":"-"},"content":"                    {{ session.isOpened | sessionSubmissionStatus: session.isWaitingToOpen : session.isSubmitted }}"},{"lineNumber":50,"author":{"gitId":"-"},"content":"                  \u003c/span\u003e"},{"lineNumber":51,"author":{"gitId":"-"},"content":"                \u003c/td\u003e"},{"lineNumber":52,"author":{"gitId":"-"},"content":"                \u003ctd\u003e"},{"lineNumber":53,"author":{"gitId":"-"},"content":"                  \u003cspan [ngbTooltip]\u003d\"getResponseStatusTooltip(session.isPublished)\"\u003e"},{"lineNumber":54,"author":{"gitId":"-"},"content":"                    {{ session.isPublished | sessionResponseStatus }}"},{"lineNumber":55,"author":{"gitId":"-"},"content":"                  \u003c/span\u003e"},{"lineNumber":56,"author":{"gitId":"-"},"content":"                \u003c/td\u003e"},{"lineNumber":57,"author":{"gitId":"-"},"content":"                \u003ctd\u003e"},{"lineNumber":58,"author":{"gitId":"-"},"content":"                  \u003ca [ngClass]\u003d\"{\u0027disabled\u0027 : !session.isPublished}\""},{"lineNumber":59,"author":{"gitId":"-"},"content":"                     tmRouterLink\u003d\"/web/student/sessions/result\" [queryParams]\u003d\"{courseid: session.session.courseId, fsname: session.session.feedbackSessionName}\""},{"lineNumber":60,"author":{"gitId":"Derek-Hardy"},"content":"                     id\u003d\"view-responses-btn-{{i}}\" class\u003d\"btn btn-light btn-sm btn-margin-right\"\u003e"},{"lineNumber":61,"author":{"gitId":"-"},"content":"                    View Responses"},{"lineNumber":62,"author":{"gitId":"-"},"content":"                  \u003c/a\u003e"},{"lineNumber":63,"author":{"gitId":"Derek-Hardy"},"content":"                  \u003ca *ngIf\u003d\"session.isWaitingToOpen\" id\u003d\"disabled-start-submit-btn-{{i}}\" class\u003d\"btn btn-light btn-sm disabled\"\u003e"},{"lineNumber":64,"author":{"gitId":"-"},"content":"                    Start Submission"},{"lineNumber":65,"author":{"gitId":"-"},"content":"                  \u003c/a\u003e"},{"lineNumber":66,"author":{"gitId":"-"},"content":"                  \u003ca *ngIf\u003d\"session.isOpened \u0026\u0026 !session.isSubmitted\""},{"lineNumber":67,"author":{"gitId":"-"},"content":"                     tmRouterLink\u003d\"/web/student/sessions/submission\""},{"lineNumber":68,"author":{"gitId":"-"},"content":"                     [queryParams]\u003d\"{courseid: session.session.courseId, fsname: session.session.feedbackSessionName}\""},{"lineNumber":69,"author":{"gitId":"Derek-Hardy"},"content":"                     id\u003d\"start-submit-btn-{{i}}\""},{"lineNumber":70,"author":{"gitId":"-"},"content":"                     class\u003d\"btn btn-light btn-sm\"\u003e"},{"lineNumber":71,"author":{"gitId":"-"},"content":"                    Start Submission"},{"lineNumber":72,"author":{"gitId":"-"},"content":"                  \u003c/a\u003e"},{"lineNumber":73,"author":{"gitId":"-"},"content":"                  \u003ca *ngIf\u003d\"session.isOpened \u0026\u0026 session.isSubmitted\""},{"lineNumber":74,"author":{"gitId":"-"},"content":"                     tmRouterLink\u003d\"/web/student/sessions/submission\""},{"lineNumber":75,"author":{"gitId":"-"},"content":"                     [queryParams]\u003d\"{courseid: session.session.courseId, fsname: session.session.feedbackSessionName}\""},{"lineNumber":76,"author":{"gitId":"Derek-Hardy"},"content":"                     id\u003d\"edit-submit-btn-{{i}}\""},{"lineNumber":77,"author":{"gitId":"-"},"content":"                     class\u003d\"btn btn-light btn-sm\"\u003e"},{"lineNumber":78,"author":{"gitId":"-"},"content":"                    Edit Submission"},{"lineNumber":79,"author":{"gitId":"-"},"content":"                  \u003c/a\u003e"},{"lineNumber":80,"author":{"gitId":"-"},"content":"                  \u003ca *ngIf\u003d\"!session.isOpened \u0026\u0026 !session.isWaitingToOpen\""},{"lineNumber":81,"author":{"gitId":"-"},"content":"                     tmRouterLink\u003d\"/web/student/sessions/submission\""},{"lineNumber":82,"author":{"gitId":"-"},"content":"                     [queryParams]\u003d\"{courseid: session.session.courseId, fsname: session.session.feedbackSessionName}\""},{"lineNumber":83,"author":{"gitId":"Derek-Hardy"},"content":"                     id\u003d\"view-submit-btn-{{i}}\" class\u003d\"btn btn-light btn-sm\"\u003e"},{"lineNumber":84,"author":{"gitId":"-"},"content":"                    View Submission"},{"lineNumber":85,"author":{"gitId":"-"},"content":"                  \u003c/a\u003e"},{"lineNumber":86,"author":{"gitId":"-"},"content":"                \u003c/td\u003e"},{"lineNumber":87,"author":{"gitId":"-"},"content":"              \u003c/ng-container\u003e"},{"lineNumber":88,"author":{"gitId":"-"},"content":"            \u003c/tr\u003e"},{"lineNumber":89,"author":{"gitId":"-"},"content":"            \u003c/tbody\u003e"},{"lineNumber":90,"author":{"gitId":"-"},"content":"          \u003c/table\u003e"},{"lineNumber":91,"author":{"gitId":"-"},"content":""},{"lineNumber":92,"author":{"gitId":"-"},"content":"          \u003ctable class\u003d\"table table-striped table-bordered margin-0\" *ngIf\u003d\"!(studentCourse.feedbackSessions \u0026\u0026 studentCourse.feedbackSessions.length)\"\u003e"},{"lineNumber":93,"author":{"gitId":"-"},"content":"            \u003ctbody\u003e"},{"lineNumber":94,"author":{"gitId":"-"},"content":"            \u003ctr\u003e"},{"lineNumber":95,"author":{"gitId":"-"},"content":"              \u003cth class\u003d\"align-center white\"\u003e"},{"lineNumber":96,"author":{"gitId":"-"},"content":"                Currently, there are no open evaluation/feedback sessions in this course. When a session is open for submission you will be notified."},{"lineNumber":97,"author":{"gitId":"-"},"content":"              \u003c/th\u003e"},{"lineNumber":98,"author":{"gitId":"-"},"content":"            \u003c/tr\u003e"},{"lineNumber":99,"author":{"gitId":"-"},"content":"            \u003c/tbody\u003e"},{"lineNumber":100,"author":{"gitId":"-"},"content":"          \u003c/table\u003e"},{"lineNumber":101,"author":{"gitId":"-"},"content":"        \u003c/div\u003e"},{"lineNumber":102,"author":{"gitId":"-"},"content":"      \u003c/div\u003e"},{"lineNumber":103,"author":{"gitId":"-"},"content":"    \u003c/ng-container\u003e"},{"lineNumber":104,"author":{"gitId":"-"},"content":"  \u003c/ng-template\u003e"},{"lineNumber":105,"author":{"gitId":"-"},"content":"\u003c/tm-loading-retry\u003e"}],"authorContributionMap":{"Derek-Hardy":10,"-":95}},{"path":"src/web/app/pages-student/student-home-page/student-home-page.component.spec.ts","fileType":"ts","lines":[{"lineNumber":1,"author":{"gitId":"-"},"content":"import { HttpClientTestingModule } from \u0027@angular/common/http/testing\u0027;"},{"lineNumber":2,"author":{"gitId":"-"},"content":"import { async, ComponentFixture, TestBed } from \u0027@angular/core/testing\u0027;"},{"lineNumber":3,"author":{"gitId":"-"},"content":"import { RouterTestingModule } from \u0027@angular/router/testing\u0027;"},{"lineNumber":4,"author":{"gitId":"-"},"content":"import { NgbModule } from \u0027@ng-bootstrap/ng-bootstrap\u0027;"},{"lineNumber":5,"author":{"gitId":"Derek-Hardy"},"content":"import { of } from \u0027rxjs\u0027;"},{"lineNumber":6,"author":{"gitId":"Derek-Hardy"},"content":"import { CourseService } from \u0027../../../services/course.service\u0027;"},{"lineNumber":7,"author":{"gitId":"Derek-Hardy"},"content":"import { FeedbackSessionsService } from \u0027../../../services/feedback-sessions.service\u0027;"},{"lineNumber":8,"author":{"gitId":"-"},"content":"import {"},{"lineNumber":9,"author":{"gitId":"Derek-Hardy"},"content":"  Courses,"},{"lineNumber":10,"author":{"gitId":"-"},"content":"  FeedbackSessionPublishStatus,"},{"lineNumber":11,"author":{"gitId":"Derek-Hardy"},"content":"  FeedbackSessions,"},{"lineNumber":12,"author":{"gitId":"-"},"content":"  FeedbackSessionSubmissionStatus,"},{"lineNumber":13,"author":{"gitId":"Derek-Hardy"},"content":"  HasResponses,"},{"lineNumber":14,"author":{"gitId":"-"},"content":"  ResponseVisibleSetting,"},{"lineNumber":15,"author":{"gitId":"-"},"content":"  SessionVisibleSetting,"},{"lineNumber":16,"author":{"gitId":"-"},"content":"} from \u0027../../../types/api-output\u0027;"},{"lineNumber":17,"author":{"gitId":"-"},"content":"import { StudentHomePageComponent } from \u0027./student-home-page.component\u0027;"},{"lineNumber":18,"author":{"gitId":"-"},"content":""},{"lineNumber":19,"author":{"gitId":"-"},"content":"import { LoadingRetryModule } from \u0027../../components/loading-retry/loading-retry.module\u0027;"},{"lineNumber":20,"author":{"gitId":"-"},"content":"import { LoadingSpinnerModule } from \u0027../../components/loading-spinner/loading-spinner.module\u0027;"},{"lineNumber":21,"author":{"gitId":"-"},"content":"import { TeammatesCommonModule } from \u0027../../components/teammates-common/teammates-common.module\u0027;"},{"lineNumber":22,"author":{"gitId":"-"},"content":"import { TeammatesRouterModule } from \u0027../../components/teammates-router/teammates-router.module\u0027;"},{"lineNumber":23,"author":{"gitId":"-"},"content":"import { ResponseStatusPipe } from \u0027../../pipes/session-response-status.pipe\u0027;"},{"lineNumber":24,"author":{"gitId":"-"},"content":"import { SubmissionStatusPipe } from \u0027../../pipes/session-submission-status.pipe\u0027;"},{"lineNumber":25,"author":{"gitId":"-"},"content":""},{"lineNumber":26,"author":{"gitId":"Derek-Hardy"},"content":"const studentCourseA: any \u003d {"},{"lineNumber":27,"author":{"gitId":"Derek-Hardy"},"content":"  course: {"},{"lineNumber":28,"author":{"gitId":"Derek-Hardy"},"content":"    courseId: \u0027CS1231\u0027,"},{"lineNumber":29,"author":{"gitId":"Derek-Hardy"},"content":"    courseName: \u0027Discrete Structures\u0027,"},{"lineNumber":30,"author":{"gitId":"Derek-Hardy"},"content":"    timeZone: \u0027Asia/Singapore\u0027,"},{"lineNumber":31,"author":{"gitId":"Derek-Hardy"},"content":"    creationTimestamp: 1549095330000,"},{"lineNumber":32,"author":{"gitId":"Derek-Hardy"},"content":"    deletionTimestamp: 0,"},{"lineNumber":33,"author":{"gitId":"Derek-Hardy"},"content":"  },"},{"lineNumber":34,"author":{"gitId":"Derek-Hardy"},"content":"  feedbackSessions: ["},{"lineNumber":35,"author":{"gitId":"Derek-Hardy"},"content":"    {"},{"lineNumber":36,"author":{"gitId":"Derek-Hardy"},"content":"      session: {"},{"lineNumber":37,"author":{"gitId":"Derek-Hardy"},"content":"        feedbackSessionName: \u0027First Session\u0027,"},{"lineNumber":38,"author":{"gitId":"Derek-Hardy"},"content":"        courseId: \u0027CS1231\u0027,"},{"lineNumber":39,"author":{"gitId":"Derek-Hardy"},"content":"        timeZone: \u0027Asia/Singapore\u0027,"},{"lineNumber":40,"author":{"gitId":"Derek-Hardy"},"content":"        instructions: \u0027\u0027,"},{"lineNumber":41,"author":{"gitId":"Derek-Hardy"},"content":"        submissionStartTimestamp: 0,"},{"lineNumber":42,"author":{"gitId":"Derek-Hardy"},"content":"        submissionEndTimestamp: 1549095330000,"},{"lineNumber":43,"author":{"gitId":"Derek-Hardy"},"content":"        gracePeriod: 0,"},{"lineNumber":44,"author":{"gitId":"Derek-Hardy"},"content":"        sessionVisibleSetting: SessionVisibleSetting.AT_OPEN,"},{"lineNumber":45,"author":{"gitId":"Derek-Hardy"},"content":"        responseVisibleSetting: ResponseVisibleSetting.AT_VISIBLE,"},{"lineNumber":46,"author":{"gitId":"Derek-Hardy"},"content":"        submissionStatus: FeedbackSessionSubmissionStatus.OPEN,"},{"lineNumber":47,"author":{"gitId":"Derek-Hardy"},"content":"        publishStatus: FeedbackSessionPublishStatus.PUBLISHED,"},{"lineNumber":48,"author":{"gitId":"Derek-Hardy"},"content":"        isClosingEmailEnabled: true,"},{"lineNumber":49,"author":{"gitId":"Derek-Hardy"},"content":"        isPublishedEmailEnabled: true,"},{"lineNumber":50,"author":{"gitId":"Derek-Hardy"},"content":"        createdAtTimestamp: 0,"},{"lineNumber":51,"author":{"gitId":"Derek-Hardy"},"content":"      },"},{"lineNumber":52,"author":{"gitId":"Derek-Hardy"},"content":"      isOpened: true,"},{"lineNumber":53,"author":{"gitId":"Derek-Hardy"},"content":"      isWaitingToOpen: false,"},{"lineNumber":54,"author":{"gitId":"Derek-Hardy"},"content":"      isPublished: false,"},{"lineNumber":55,"author":{"gitId":"Derek-Hardy"},"content":"      isSubmitted: true,"},{"lineNumber":56,"author":{"gitId":"Derek-Hardy"},"content":"    },"},{"lineNumber":57,"author":{"gitId":"Derek-Hardy"},"content":"    {"},{"lineNumber":58,"author":{"gitId":"Derek-Hardy"},"content":"      session: {"},{"lineNumber":59,"author":{"gitId":"Derek-Hardy"},"content":"        feedbackSessionName: \u0027Second Session\u0027,"},{"lineNumber":60,"author":{"gitId":"Derek-Hardy"},"content":"        courseId: \u0027CS1231\u0027,"},{"lineNumber":61,"author":{"gitId":"Derek-Hardy"},"content":"        timeZone: \u0027Asia/Singapore\u0027,"},{"lineNumber":62,"author":{"gitId":"Derek-Hardy"},"content":"        instructions: \u0027\u0027,"},{"lineNumber":63,"author":{"gitId":"Derek-Hardy"},"content":"        submissionStartTimestamp: 0,"},{"lineNumber":64,"author":{"gitId":"Derek-Hardy"},"content":"        submissionEndTimestamp: 1549095330000,"},{"lineNumber":65,"author":{"gitId":"Derek-Hardy"},"content":"        gracePeriod: 0,"},{"lineNumber":66,"author":{"gitId":"Derek-Hardy"},"content":"        sessionVisibleSetting: SessionVisibleSetting.AT_OPEN,"},{"lineNumber":67,"author":{"gitId":"Derek-Hardy"},"content":"        responseVisibleSetting: ResponseVisibleSetting.AT_VISIBLE,"},{"lineNumber":68,"author":{"gitId":"Derek-Hardy"},"content":"        submissionStatus: FeedbackSessionSubmissionStatus.OPEN,"},{"lineNumber":69,"author":{"gitId":"Derek-Hardy"},"content":"        publishStatus: FeedbackSessionPublishStatus.PUBLISHED,"},{"lineNumber":70,"author":{"gitId":"Derek-Hardy"},"content":"        isClosingEmailEnabled: true,"},{"lineNumber":71,"author":{"gitId":"Derek-Hardy"},"content":"        isPublishedEmailEnabled: true,"},{"lineNumber":72,"author":{"gitId":"Derek-Hardy"},"content":"        createdAtTimestamp: 0,"},{"lineNumber":73,"author":{"gitId":"Derek-Hardy"},"content":"      },"},{"lineNumber":74,"author":{"gitId":"Derek-Hardy"},"content":"      isOpened: false,"},{"lineNumber":75,"author":{"gitId":"Derek-Hardy"},"content":"      isWaitingToOpen: false,"},{"lineNumber":76,"author":{"gitId":"Derek-Hardy"},"content":"      isPublished: false,"},{"lineNumber":77,"author":{"gitId":"Derek-Hardy"},"content":"      isSubmitted: true,"},{"lineNumber":78,"author":{"gitId":"Derek-Hardy"},"content":"    },"},{"lineNumber":79,"author":{"gitId":"Derek-Hardy"},"content":"  ],"},{"lineNumber":80,"author":{"gitId":"Derek-Hardy"},"content":"};"},{"lineNumber":81,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":82,"author":{"gitId":"Derek-Hardy"},"content":"const studentCourseB: any \u003d {"},{"lineNumber":83,"author":{"gitId":"Derek-Hardy"},"content":"  course: {"},{"lineNumber":84,"author":{"gitId":"Derek-Hardy"},"content":"    courseId: \u0027LSM1306\u0027,"},{"lineNumber":85,"author":{"gitId":"Derek-Hardy"},"content":"    courseName: \u0027Forensic Science\u0027,"},{"lineNumber":86,"author":{"gitId":"Derek-Hardy"},"content":"    timeZone: \u0027Asia/Singapore\u0027,"},{"lineNumber":87,"author":{"gitId":"Derek-Hardy"},"content":"    creationTimestamp: 1549095330000, // Saturday, 2 February 2019 16:15:30 GMT+08:00"},{"lineNumber":88,"author":{"gitId":"Derek-Hardy"},"content":"    deletionTimestamp: 0,"},{"lineNumber":89,"author":{"gitId":"Derek-Hardy"},"content":"  },"},{"lineNumber":90,"author":{"gitId":"Derek-Hardy"},"content":"  feedbackSessions: ["},{"lineNumber":91,"author":{"gitId":"Derek-Hardy"},"content":"    {"},{"lineNumber":92,"author":{"gitId":"Derek-Hardy"},"content":"      session: {"},{"lineNumber":93,"author":{"gitId":"Derek-Hardy"},"content":"        feedbackSessionName: \u0027Third Session\u0027,"},{"lineNumber":94,"author":{"gitId":"Derek-Hardy"},"content":"        courseId: \u0027LSM1306\u0027,"},{"lineNumber":95,"author":{"gitId":"Derek-Hardy"},"content":"        timeZone: \u0027Asia/Singapore\u0027,"},{"lineNumber":96,"author":{"gitId":"Derek-Hardy"},"content":"        instructions: \u0027\u0027,"},{"lineNumber":97,"author":{"gitId":"Derek-Hardy"},"content":"        submissionStartTimestamp: 0,"},{"lineNumber":98,"author":{"gitId":"Derek-Hardy"},"content":"        submissionEndTimestamp: 1549095330000, // Saturday, 2 February 2019 16:15:30 GMT+08:00"},{"lineNumber":99,"author":{"gitId":"Derek-Hardy"},"content":"        gracePeriod: 0,"},{"lineNumber":100,"author":{"gitId":"Derek-Hardy"},"content":"        sessionVisibleSetting: SessionVisibleSetting.AT_OPEN,"},{"lineNumber":101,"author":{"gitId":"Derek-Hardy"},"content":"        responseVisibleSetting: ResponseVisibleSetting.AT_VISIBLE,"},{"lineNumber":102,"author":{"gitId":"Derek-Hardy"},"content":"        submissionStatus: FeedbackSessionSubmissionStatus.OPEN,"},{"lineNumber":103,"author":{"gitId":"Derek-Hardy"},"content":"        publishStatus: FeedbackSessionPublishStatus.PUBLISHED,"},{"lineNumber":104,"author":{"gitId":"Derek-Hardy"},"content":"        isClosingEmailEnabled: true,"},{"lineNumber":105,"author":{"gitId":"Derek-Hardy"},"content":"        isPublishedEmailEnabled: true,"},{"lineNumber":106,"author":{"gitId":"Derek-Hardy"},"content":"        createdAtTimestamp: 0,"},{"lineNumber":107,"author":{"gitId":"Derek-Hardy"},"content":"      },"},{"lineNumber":108,"author":{"gitId":"Derek-Hardy"},"content":"      isOpened: true,"},{"lineNumber":109,"author":{"gitId":"Derek-Hardy"},"content":"      isWaitingToOpen: false,"},{"lineNumber":110,"author":{"gitId":"Derek-Hardy"},"content":"      isPublished: false,"},{"lineNumber":111,"author":{"gitId":"Derek-Hardy"},"content":"      isSubmitted: true,"},{"lineNumber":112,"author":{"gitId":"Derek-Hardy"},"content":"    },"},{"lineNumber":113,"author":{"gitId":"Derek-Hardy"},"content":"    {"},{"lineNumber":114,"author":{"gitId":"Derek-Hardy"},"content":"      session: {"},{"lineNumber":115,"author":{"gitId":"Derek-Hardy"},"content":"        feedbackSessionName: \u0027Fourth Session\u0027,"},{"lineNumber":116,"author":{"gitId":"Derek-Hardy"},"content":"        courseId: \u0027LSM1306\u0027,"},{"lineNumber":117,"author":{"gitId":"Derek-Hardy"},"content":"        timeZone: \u0027Asia/Singapore\u0027,"},{"lineNumber":118,"author":{"gitId":"Derek-Hardy"},"content":"        instructions: \u0027\u0027,"},{"lineNumber":119,"author":{"gitId":"Derek-Hardy"},"content":"        submissionStartTimestamp: 0,"},{"lineNumber":120,"author":{"gitId":"Derek-Hardy"},"content":"        submissionEndTimestamp: 1549095330000, // Saturday, 2 February 2019 16:15:30 GMT+08:00"},{"lineNumber":121,"author":{"gitId":"Derek-Hardy"},"content":"        gracePeriod: 0,"},{"lineNumber":122,"author":{"gitId":"Derek-Hardy"},"content":"        sessionVisibleSetting: SessionVisibleSetting.AT_OPEN,"},{"lineNumber":123,"author":{"gitId":"Derek-Hardy"},"content":"        responseVisibleSetting: ResponseVisibleSetting.AT_VISIBLE,"},{"lineNumber":124,"author":{"gitId":"Derek-Hardy"},"content":"        submissionStatus: FeedbackSessionSubmissionStatus.OPEN,"},{"lineNumber":125,"author":{"gitId":"Derek-Hardy"},"content":"        publishStatus: FeedbackSessionPublishStatus.PUBLISHED,"},{"lineNumber":126,"author":{"gitId":"Derek-Hardy"},"content":"        isClosingEmailEnabled: true,"},{"lineNumber":127,"author":{"gitId":"Derek-Hardy"},"content":"        isPublishedEmailEnabled: true,"},{"lineNumber":128,"author":{"gitId":"Derek-Hardy"},"content":"        createdAtTimestamp: 0,"},{"lineNumber":129,"author":{"gitId":"Derek-Hardy"},"content":"      },"},{"lineNumber":130,"author":{"gitId":"Derek-Hardy"},"content":"      isOpened: false,"},{"lineNumber":131,"author":{"gitId":"Derek-Hardy"},"content":"      isWaitingToOpen: false,"},{"lineNumber":132,"author":{"gitId":"Derek-Hardy"},"content":"      isPublished: false,"},{"lineNumber":133,"author":{"gitId":"Derek-Hardy"},"content":"      isSubmitted: true,"},{"lineNumber":134,"author":{"gitId":"Derek-Hardy"},"content":"    },"},{"lineNumber":135,"author":{"gitId":"Derek-Hardy"},"content":"  ],"},{"lineNumber":136,"author":{"gitId":"Derek-Hardy"},"content":"};"},{"lineNumber":137,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":138,"author":{"gitId":"Derek-Hardy"},"content":"const studentCourseC: any \u003d {"},{"lineNumber":139,"author":{"gitId":"Derek-Hardy"},"content":"  course: {"},{"lineNumber":140,"author":{"gitId":"Derek-Hardy"},"content":"    courseId: \u0027MA1521\u0027,"},{"lineNumber":141,"author":{"gitId":"Derek-Hardy"},"content":"    courseName: \u0027Calculus for Computing\u0027,"},{"lineNumber":142,"author":{"gitId":"Derek-Hardy"},"content":"    timeZone: \u0027Asia/Singapore\u0027,"},{"lineNumber":143,"author":{"gitId":"Derek-Hardy"},"content":"    creationTimestamp: 1549095330000, // Saturday, 2 February 2019 16:15:30 GMT+08:00"},{"lineNumber":144,"author":{"gitId":"Derek-Hardy"},"content":"    deletionTimestamp: 0,"},{"lineNumber":145,"author":{"gitId":"Derek-Hardy"},"content":"  },"},{"lineNumber":146,"author":{"gitId":"Derek-Hardy"},"content":"  feedbackSessions: ["},{"lineNumber":147,"author":{"gitId":"Derek-Hardy"},"content":"    {"},{"lineNumber":148,"author":{"gitId":"Derek-Hardy"},"content":"      session: {"},{"lineNumber":149,"author":{"gitId":"Derek-Hardy"},"content":"        feedbackSessionName: \u0027Fifth Session\u0027,"},{"lineNumber":150,"author":{"gitId":"Derek-Hardy"},"content":"        courseId: \u0027MA1521\u0027,"},{"lineNumber":151,"author":{"gitId":"Derek-Hardy"},"content":"        timeZone: \u0027Asia/Singapore\u0027,"},{"lineNumber":152,"author":{"gitId":"Derek-Hardy"},"content":"        instructions: \u0027\u0027,"},{"lineNumber":153,"author":{"gitId":"Derek-Hardy"},"content":"        submissionStartTimestamp: 0,"},{"lineNumber":154,"author":{"gitId":"Derek-Hardy"},"content":"        submissionEndTimestamp: 1549095330000, // Saturday, 2 February 2019 16:15:30 GMT+08:00"},{"lineNumber":155,"author":{"gitId":"Derek-Hardy"},"content":"        gracePeriod: 0,"},{"lineNumber":156,"author":{"gitId":"Derek-Hardy"},"content":"        sessionVisibleSetting: SessionVisibleSetting.AT_OPEN,"},{"lineNumber":157,"author":{"gitId":"Derek-Hardy"},"content":"        responseVisibleSetting: ResponseVisibleSetting.AT_VISIBLE,"},{"lineNumber":158,"author":{"gitId":"Derek-Hardy"},"content":"        submissionStatus: FeedbackSessionSubmissionStatus.OPEN,"},{"lineNumber":159,"author":{"gitId":"Derek-Hardy"},"content":"        publishStatus: FeedbackSessionPublishStatus.PUBLISHED,"},{"lineNumber":160,"author":{"gitId":"Derek-Hardy"},"content":"        isClosingEmailEnabled: true,"},{"lineNumber":161,"author":{"gitId":"Derek-Hardy"},"content":"        isPublishedEmailEnabled: true,"},{"lineNumber":162,"author":{"gitId":"Derek-Hardy"},"content":"        createdAtTimestamp: 0,"},{"lineNumber":163,"author":{"gitId":"Derek-Hardy"},"content":"      },"},{"lineNumber":164,"author":{"gitId":"Derek-Hardy"},"content":"      isOpened: true,"},{"lineNumber":165,"author":{"gitId":"Derek-Hardy"},"content":"      isWaitingToOpen: false,"},{"lineNumber":166,"author":{"gitId":"Derek-Hardy"},"content":"      isPublished: false,"},{"lineNumber":167,"author":{"gitId":"Derek-Hardy"},"content":"      isSubmitted: true,"},{"lineNumber":168,"author":{"gitId":"Derek-Hardy"},"content":"    },"},{"lineNumber":169,"author":{"gitId":"Derek-Hardy"},"content":"    {"},{"lineNumber":170,"author":{"gitId":"Derek-Hardy"},"content":"      session: {"},{"lineNumber":171,"author":{"gitId":"Derek-Hardy"},"content":"        feedbackSessionName: \u0027Sixth Session\u0027,"},{"lineNumber":172,"author":{"gitId":"Derek-Hardy"},"content":"        courseId: \u0027MA1521\u0027,"},{"lineNumber":173,"author":{"gitId":"Derek-Hardy"},"content":"        timeZone: \u0027Asia/Singapore\u0027,"},{"lineNumber":174,"author":{"gitId":"Derek-Hardy"},"content":"        instructions: \u0027\u0027,"},{"lineNumber":175,"author":{"gitId":"Derek-Hardy"},"content":"        submissionStartTimestamp: 0,"},{"lineNumber":176,"author":{"gitId":"Derek-Hardy"},"content":"        submissionEndTimestamp: 1549095330000, // Saturday, 2 February 2019 16:15:30 GMT+08:00"},{"lineNumber":177,"author":{"gitId":"Derek-Hardy"},"content":"        gracePeriod: 0,"},{"lineNumber":178,"author":{"gitId":"Derek-Hardy"},"content":"        sessionVisibleSetting: SessionVisibleSetting.AT_OPEN,"},{"lineNumber":179,"author":{"gitId":"Derek-Hardy"},"content":"        responseVisibleSetting: ResponseVisibleSetting.AT_VISIBLE,"},{"lineNumber":180,"author":{"gitId":"Derek-Hardy"},"content":"        submissionStatus: FeedbackSessionSubmissionStatus.OPEN,"},{"lineNumber":181,"author":{"gitId":"Derek-Hardy"},"content":"        publishStatus: FeedbackSessionPublishStatus.PUBLISHED,"},{"lineNumber":182,"author":{"gitId":"Derek-Hardy"},"content":"        isClosingEmailEnabled: true,"},{"lineNumber":183,"author":{"gitId":"Derek-Hardy"},"content":"        isPublishedEmailEnabled: true,"},{"lineNumber":184,"author":{"gitId":"Derek-Hardy"},"content":"        createdAtTimestamp: 0,"},{"lineNumber":185,"author":{"gitId":"Derek-Hardy"},"content":"      },"},{"lineNumber":186,"author":{"gitId":"Derek-Hardy"},"content":"      isOpened: false,"},{"lineNumber":187,"author":{"gitId":"Derek-Hardy"},"content":"      isWaitingToOpen: false,"},{"lineNumber":188,"author":{"gitId":"Derek-Hardy"},"content":"      isPublished: false,"},{"lineNumber":189,"author":{"gitId":"Derek-Hardy"},"content":"      isSubmitted: true,"},{"lineNumber":190,"author":{"gitId":"Derek-Hardy"},"content":"    },"},{"lineNumber":191,"author":{"gitId":"Derek-Hardy"},"content":"  ],"},{"lineNumber":192,"author":{"gitId":"Derek-Hardy"},"content":"};"},{"lineNumber":193,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":194,"author":{"gitId":"Derek-Hardy"},"content":"const studentCourses: Courses \u003d {"},{"lineNumber":195,"author":{"gitId":"Derek-Hardy"},"content":"  courses: [{"},{"lineNumber":196,"author":{"gitId":"Derek-Hardy"},"content":"    courseId: \u0027CS1231\u0027,"},{"lineNumber":197,"author":{"gitId":"Derek-Hardy"},"content":"    courseName: \u0027Discrete Structures\u0027,"},{"lineNumber":198,"author":{"gitId":"Derek-Hardy"},"content":"    timeZone: \u0027Asia/Singapore\u0027,"},{"lineNumber":199,"author":{"gitId":"Derek-Hardy"},"content":"    creationTimestamp: 1549095330000, // Saturday, 2 February 2019 16:15:30 GMT+08:00"},{"lineNumber":200,"author":{"gitId":"Derek-Hardy"},"content":"    deletionTimestamp: 0,"},{"lineNumber":201,"author":{"gitId":"Derek-Hardy"},"content":"  }],"},{"lineNumber":202,"author":{"gitId":"Derek-Hardy"},"content":"};"},{"lineNumber":203,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":204,"author":{"gitId":"Derek-Hardy"},"content":"const studentFeedbackSessions: FeedbackSessions \u003d {"},{"lineNumber":205,"author":{"gitId":"Derek-Hardy"},"content":"  feedbackSessions: ["},{"lineNumber":206,"author":{"gitId":"Derek-Hardy"},"content":"    {"},{"lineNumber":207,"author":{"gitId":"Derek-Hardy"},"content":"      feedbackSessionName: \u0027Latest update Session\u0027,"},{"lineNumber":208,"author":{"gitId":"Derek-Hardy"},"content":"      courseId: \u0027CS1231\u0027,"},{"lineNumber":209,"author":{"gitId":"Derek-Hardy"},"content":"      timeZone: \u0027Asia/Singapore\u0027,"},{"lineNumber":210,"author":{"gitId":"Derek-Hardy"},"content":"      instructions: \u0027\u0027,"},{"lineNumber":211,"author":{"gitId":"Derek-Hardy"},"content":"      submissionStartTimestamp: 0,"},{"lineNumber":212,"author":{"gitId":"Derek-Hardy"},"content":"      submissionEndTimestamp: 1611392191000, // Saturday, 23 January 2021 16:56:31 GMT+08:00"},{"lineNumber":213,"author":{"gitId":"Derek-Hardy"},"content":"      gracePeriod: 0,"},{"lineNumber":214,"author":{"gitId":"Derek-Hardy"},"content":"      sessionVisibleSetting: SessionVisibleSetting.AT_OPEN,"},{"lineNumber":215,"author":{"gitId":"Derek-Hardy"},"content":"      responseVisibleSetting: ResponseVisibleSetting.AT_VISIBLE,"},{"lineNumber":216,"author":{"gitId":"Derek-Hardy"},"content":"      submissionStatus: FeedbackSessionSubmissionStatus.OPEN,"},{"lineNumber":217,"author":{"gitId":"Derek-Hardy"},"content":"      publishStatus: FeedbackSessionPublishStatus.PUBLISHED,"},{"lineNumber":218,"author":{"gitId":"Derek-Hardy"},"content":"      isClosingEmailEnabled: true,"},{"lineNumber":219,"author":{"gitId":"Derek-Hardy"},"content":"      isPublishedEmailEnabled: true,"},{"lineNumber":220,"author":{"gitId":"Derek-Hardy"},"content":"      createdAtTimestamp: 0,"},{"lineNumber":221,"author":{"gitId":"Derek-Hardy"},"content":"    },"},{"lineNumber":222,"author":{"gitId":"Derek-Hardy"},"content":"    {"},{"lineNumber":223,"author":{"gitId":"Derek-Hardy"},"content":"      feedbackSessionName: \u0027Orientation Session\u0027,"},{"lineNumber":224,"author":{"gitId":"Derek-Hardy"},"content":"      courseId: \u0027CS1231\u0027,"},{"lineNumber":225,"author":{"gitId":"Derek-Hardy"},"content":"      timeZone: \u0027Asia/Singapore\u0027,"},{"lineNumber":226,"author":{"gitId":"Derek-Hardy"},"content":"      instructions: \u0027\u0027,"},{"lineNumber":227,"author":{"gitId":"Derek-Hardy"},"content":"      submissionStartTimestamp: 0,"},{"lineNumber":228,"author":{"gitId":"Derek-Hardy"},"content":"      submissionEndTimestamp: 1549095330000, // Saturday, 2 February 2019 16:15:30 GMT+08:00"},{"lineNumber":229,"author":{"gitId":"Derek-Hardy"},"content":"      gracePeriod: 0,"},{"lineNumber":230,"author":{"gitId":"Derek-Hardy"},"content":"      sessionVisibleSetting: SessionVisibleSetting.AT_OPEN,"},{"lineNumber":231,"author":{"gitId":"Derek-Hardy"},"content":"      responseVisibleSetting: ResponseVisibleSetting.AT_VISIBLE,"},{"lineNumber":232,"author":{"gitId":"Derek-Hardy"},"content":"      submissionStatus: FeedbackSessionSubmissionStatus.OPEN,"},{"lineNumber":233,"author":{"gitId":"Derek-Hardy"},"content":"      publishStatus: FeedbackSessionPublishStatus.PUBLISHED,"},{"lineNumber":234,"author":{"gitId":"Derek-Hardy"},"content":"      isClosingEmailEnabled: true,"},{"lineNumber":235,"author":{"gitId":"Derek-Hardy"},"content":"      isPublishedEmailEnabled: true,"},{"lineNumber":236,"author":{"gitId":"Derek-Hardy"},"content":"      createdAtTimestamp: 0,"},{"lineNumber":237,"author":{"gitId":"Derek-Hardy"},"content":"    },"},{"lineNumber":238,"author":{"gitId":"Derek-Hardy"},"content":"    {"},{"lineNumber":239,"author":{"gitId":"Derek-Hardy"},"content":"      feedbackSessionName: \u0027Welcome Tea Session\u0027,"},{"lineNumber":240,"author":{"gitId":"Derek-Hardy"},"content":"      courseId: \u0027CS1231\u0027,"},{"lineNumber":241,"author":{"gitId":"Derek-Hardy"},"content":"      timeZone: \u0027Asia/Singapore\u0027,"},{"lineNumber":242,"author":{"gitId":"Derek-Hardy"},"content":"      instructions: \u0027\u0027,"},{"lineNumber":243,"author":{"gitId":"Derek-Hardy"},"content":"      submissionStartTimestamp: 0,"},{"lineNumber":244,"author":{"gitId":"Derek-Hardy"},"content":"      submissionEndTimestamp: 1579769791000, // Thursday, 23 January 2020 16:56:31 GMT+08:00"},{"lineNumber":245,"author":{"gitId":"Derek-Hardy"},"content":"      gracePeriod: 0,"},{"lineNumber":246,"author":{"gitId":"Derek-Hardy"},"content":"      sessionVisibleSetting: SessionVisibleSetting.AT_OPEN,"},{"lineNumber":247,"author":{"gitId":"Derek-Hardy"},"content":"      responseVisibleSetting: ResponseVisibleSetting.AT_VISIBLE,"},{"lineNumber":248,"author":{"gitId":"Derek-Hardy"},"content":"      submissionStatus: FeedbackSessionSubmissionStatus.OPEN,"},{"lineNumber":249,"author":{"gitId":"Derek-Hardy"},"content":"      publishStatus: FeedbackSessionPublishStatus.PUBLISHED,"},{"lineNumber":250,"author":{"gitId":"Derek-Hardy"},"content":"      isClosingEmailEnabled: true,"},{"lineNumber":251,"author":{"gitId":"Derek-Hardy"},"content":"      isPublishedEmailEnabled: true,"},{"lineNumber":252,"author":{"gitId":"Derek-Hardy"},"content":"      createdAtTimestamp: 0,"},{"lineNumber":253,"author":{"gitId":"Derek-Hardy"},"content":"    },"},{"lineNumber":254,"author":{"gitId":"Derek-Hardy"},"content":"  ],"},{"lineNumber":255,"author":{"gitId":"Derek-Hardy"},"content":"};"},{"lineNumber":256,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":257,"author":{"gitId":"-"},"content":"describe(\u0027StudentHomePageComponent\u0027, () \u003d\u003e {"},{"lineNumber":258,"author":{"gitId":"-"},"content":"  let component: StudentHomePageComponent;"},{"lineNumber":259,"author":{"gitId":"-"},"content":"  let fixture: ComponentFixture\u003cStudentHomePageComponent\u003e;"},{"lineNumber":260,"author":{"gitId":"Derek-Hardy"},"content":"  let courseService: CourseService;"},{"lineNumber":261,"author":{"gitId":"Derek-Hardy"},"content":"  let feedbackSessionsService: FeedbackSessionsService;"},{"lineNumber":262,"author":{"gitId":"-"},"content":""},{"lineNumber":263,"author":{"gitId":"-"},"content":"  beforeEach(async(() \u003d\u003e {"},{"lineNumber":264,"author":{"gitId":"-"},"content":"    TestBed.configureTestingModule({"},{"lineNumber":265,"author":{"gitId":"-"},"content":"      declarations: ["},{"lineNumber":266,"author":{"gitId":"-"},"content":"        StudentHomePageComponent,"},{"lineNumber":267,"author":{"gitId":"-"},"content":"        ResponseStatusPipe,"},{"lineNumber":268,"author":{"gitId":"-"},"content":"        SubmissionStatusPipe,"},{"lineNumber":269,"author":{"gitId":"-"},"content":"      ],"},{"lineNumber":270,"author":{"gitId":"-"},"content":"      imports: ["},{"lineNumber":271,"author":{"gitId":"-"},"content":"        HttpClientTestingModule,"},{"lineNumber":272,"author":{"gitId":"-"},"content":"        NgbModule,"},{"lineNumber":273,"author":{"gitId":"-"},"content":"        RouterTestingModule,"},{"lineNumber":274,"author":{"gitId":"-"},"content":"        TeammatesCommonModule,"},{"lineNumber":275,"author":{"gitId":"-"},"content":"        LoadingSpinnerModule,"},{"lineNumber":276,"author":{"gitId":"-"},"content":"        LoadingRetryModule,"},{"lineNumber":277,"author":{"gitId":"-"},"content":"        TeammatesRouterModule,"},{"lineNumber":278,"author":{"gitId":"-"},"content":"      ],"},{"lineNumber":279,"author":{"gitId":"-"},"content":"    })"},{"lineNumber":280,"author":{"gitId":"-"},"content":"    .compileComponents();"},{"lineNumber":281,"author":{"gitId":"-"},"content":"  }));"},{"lineNumber":282,"author":{"gitId":"-"},"content":""},{"lineNumber":283,"author":{"gitId":"-"},"content":"  beforeEach(() \u003d\u003e {"},{"lineNumber":284,"author":{"gitId":"-"},"content":"    fixture \u003d TestBed.createComponent(StudentHomePageComponent);"},{"lineNumber":285,"author":{"gitId":"-"},"content":"    component \u003d fixture.componentInstance;"},{"lineNumber":286,"author":{"gitId":"Derek-Hardy"},"content":"    courseService \u003d TestBed.inject(CourseService);"},{"lineNumber":287,"author":{"gitId":"Derek-Hardy"},"content":"    feedbackSessionsService \u003d TestBed.inject(FeedbackSessionsService);"},{"lineNumber":288,"author":{"gitId":"-"},"content":"    fixture.detectChanges();"},{"lineNumber":289,"author":{"gitId":"-"},"content":"  });"},{"lineNumber":290,"author":{"gitId":"-"},"content":""},{"lineNumber":291,"author":{"gitId":"-"},"content":"  it(\u0027should create\u0027, () \u003d\u003e {"},{"lineNumber":292,"author":{"gitId":"-"},"content":"    expect(component).toBeTruthy();"},{"lineNumber":293,"author":{"gitId":"-"},"content":"  });"},{"lineNumber":294,"author":{"gitId":"-"},"content":""},{"lineNumber":295,"author":{"gitId":"Derek-Hardy"},"content":"  it(\u0027should load the courses and feedback sessions involving the student\u0027, () \u003d\u003e {"},{"lineNumber":296,"author":{"gitId":"Derek-Hardy"},"content":"    const studentFeedbackSessions1: FeedbackSessions \u003d {"},{"lineNumber":297,"author":{"gitId":"Derek-Hardy"},"content":"      feedbackSessions: ["},{"lineNumber":298,"author":{"gitId":"Derek-Hardy"},"content":"        {"},{"lineNumber":299,"author":{"gitId":"Derek-Hardy"},"content":"          feedbackSessionName: \u0027First Session\u0027,"},{"lineNumber":300,"author":{"gitId":"Derek-Hardy"},"content":"          courseId: \u0027CS1231\u0027,"},{"lineNumber":301,"author":{"gitId":"Derek-Hardy"},"content":"          timeZone: \u0027Asia/Singapore\u0027,"},{"lineNumber":302,"author":{"gitId":"Derek-Hardy"},"content":"          instructions: \u0027\u0027,"},{"lineNumber":303,"author":{"gitId":"Derek-Hardy"},"content":"          submissionStartTimestamp: 0,"},{"lineNumber":304,"author":{"gitId":"Derek-Hardy"},"content":"          submissionEndTimestamp: 1549095330000, // Saturday, 2 February 2019 16:15:30 GMT+08:00"},{"lineNumber":305,"author":{"gitId":"Derek-Hardy"},"content":"          gracePeriod: 0,"},{"lineNumber":306,"author":{"gitId":"Derek-Hardy"},"content":"          sessionVisibleSetting: SessionVisibleSetting.AT_OPEN,"},{"lineNumber":307,"author":{"gitId":"Derek-Hardy"},"content":"          responseVisibleSetting: ResponseVisibleSetting.AT_VISIBLE,"},{"lineNumber":308,"author":{"gitId":"Derek-Hardy"},"content":"          submissionStatus: FeedbackSessionSubmissionStatus.OPEN,"},{"lineNumber":309,"author":{"gitId":"Derek-Hardy"},"content":"          publishStatus: FeedbackSessionPublishStatus.PUBLISHED,"},{"lineNumber":310,"author":{"gitId":"Derek-Hardy"},"content":"          isClosingEmailEnabled: true,"},{"lineNumber":311,"author":{"gitId":"Derek-Hardy"},"content":"          isPublishedEmailEnabled: true,"},{"lineNumber":312,"author":{"gitId":"Derek-Hardy"},"content":"          createdAtTimestamp: 0,"},{"lineNumber":313,"author":{"gitId":"Derek-Hardy"},"content":"        },"},{"lineNumber":314,"author":{"gitId":"Derek-Hardy"},"content":"      ],"},{"lineNumber":315,"author":{"gitId":"Derek-Hardy"},"content":"    };"},{"lineNumber":316,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":317,"author":{"gitId":"Derek-Hardy"},"content":"    const hasRes: HasResponses \u003d {"},{"lineNumber":318,"author":{"gitId":"Derek-Hardy"},"content":"      hasResponses: false,"},{"lineNumber":319,"author":{"gitId":"Derek-Hardy"},"content":"    };"},{"lineNumber":320,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":321,"author":{"gitId":"Derek-Hardy"},"content":"    spyOn(courseService, \u0027getAllCoursesAsStudent\u0027).and.returnValue(of(studentCourses));"},{"lineNumber":322,"author":{"gitId":"Derek-Hardy"},"content":"    spyOn(feedbackSessionsService, \u0027getFeedbackSessionsForStudent\u0027).and.returnValue(of(studentFeedbackSessions1));"},{"lineNumber":323,"author":{"gitId":"Derek-Hardy"},"content":"    spyOn(feedbackSessionsService, \u0027hasStudentResponseForFeedbackSession\u0027).and.returnValue(of(hasRes));"},{"lineNumber":324,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":325,"author":{"gitId":"Derek-Hardy"},"content":"    component.loadStudentCourses();"},{"lineNumber":326,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":327,"author":{"gitId":"Derek-Hardy"},"content":"    expect(component.courses.length).toEqual(1);"},{"lineNumber":328,"author":{"gitId":"Derek-Hardy"},"content":"    expect(component.courses[0].course.courseId).toEqual(\u0027CS1231\u0027);"},{"lineNumber":329,"author":{"gitId":"Derek-Hardy"},"content":"    expect(component.courses[0].course.courseName).toEqual(\u0027Discrete Structures\u0027);"},{"lineNumber":330,"author":{"gitId":"Derek-Hardy"},"content":"    expect(component.courses[0].feedbackSessions[0].session.feedbackSessionName).toEqual(\u0027First Session\u0027);"},{"lineNumber":331,"author":{"gitId":"Derek-Hardy"},"content":"    expect(component.isCoursesLoading).toBeFalsy();"},{"lineNumber":332,"author":{"gitId":"-"},"content":"  });"},{"lineNumber":333,"author":{"gitId":"-"},"content":""},{"lineNumber":334,"author":{"gitId":"Derek-Hardy"},"content":"  it(\u0027should sort feedback sessions first by createdAtTimestamp upon loading\u0027, () \u003d\u003e {"},{"lineNumber":335,"author":{"gitId":"Derek-Hardy"},"content":"    const hasRes: HasResponses \u003d {"},{"lineNumber":336,"author":{"gitId":"Derek-Hardy"},"content":"      hasResponses: false,"},{"lineNumber":337,"author":{"gitId":"Derek-Hardy"},"content":"    };"},{"lineNumber":338,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":339,"author":{"gitId":"Derek-Hardy"},"content":"    spyOn(courseService, \u0027getAllCoursesAsStudent\u0027).and.returnValue(of(studentCourses));"},{"lineNumber":340,"author":{"gitId":"Derek-Hardy"},"content":"    spyOn(feedbackSessionsService, \u0027getFeedbackSessionsForStudent\u0027).and.returnValue(of(studentFeedbackSessions));"},{"lineNumber":341,"author":{"gitId":"Derek-Hardy"},"content":"    spyOn(feedbackSessionsService, \u0027hasStudentResponseForFeedbackSession\u0027).and.returnValue(of(hasRes));"},{"lineNumber":342,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":343,"author":{"gitId":"Derek-Hardy"},"content":"    component.loadStudentCourses();"},{"lineNumber":344,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":345,"author":{"gitId":"Derek-Hardy"},"content":"    expect(component.courses.length).toEqual(1);"},{"lineNumber":346,"author":{"gitId":"Derek-Hardy"},"content":"    expect(component.courses[0].feedbackSessions.length).toEqual(3);"},{"lineNumber":347,"author":{"gitId":"Derek-Hardy"},"content":"    expect(component.courses[0].feedbackSessions[0].session.feedbackSessionName).toEqual(\u0027Orientation Session\u0027);"},{"lineNumber":348,"author":{"gitId":"Derek-Hardy"},"content":"    expect(component.courses[0].feedbackSessions[1].session.feedbackSessionName).toEqual(\u0027Welcome Tea Session\u0027);"},{"lineNumber":349,"author":{"gitId":"Derek-Hardy"},"content":"    expect(component.courses[0].feedbackSessions[2].session.feedbackSessionName).toEqual(\u0027Latest update Session\u0027);"},{"lineNumber":350,"author":{"gitId":"Derek-Hardy"},"content":"  });"},{"lineNumber":351,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":352,"author":{"gitId":"Derek-Hardy"},"content":"  it(\u0027should sort feedback sessions by submissionEndTimestamp, when createdAtTimestamps are equal\u0027, () \u003d\u003e {"},{"lineNumber":353,"author":{"gitId":"Derek-Hardy"},"content":"    const hasRes: HasResponses \u003d {"},{"lineNumber":354,"author":{"gitId":"Derek-Hardy"},"content":"      hasResponses: false,"},{"lineNumber":355,"author":{"gitId":"Derek-Hardy"},"content":"    };"},{"lineNumber":356,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":357,"author":{"gitId":"Derek-Hardy"},"content":"    spyOn(courseService, \u0027getAllCoursesAsStudent\u0027).and.returnValue(of(studentCourses));"},{"lineNumber":358,"author":{"gitId":"Derek-Hardy"},"content":"    spyOn(feedbackSessionsService, \u0027getFeedbackSessionsForStudent\u0027).and.returnValue(of(studentFeedbackSessions));"},{"lineNumber":359,"author":{"gitId":"Derek-Hardy"},"content":"    spyOn(feedbackSessionsService, \u0027hasStudentResponseForFeedbackSession\u0027).and.returnValue(of(hasRes));"},{"lineNumber":360,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":361,"author":{"gitId":"Derek-Hardy"},"content":"    component.loadStudentCourses();"},{"lineNumber":362,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":363,"author":{"gitId":"Derek-Hardy"},"content":"    expect(component.courses.length).toEqual(1);"},{"lineNumber":364,"author":{"gitId":"Derek-Hardy"},"content":"    expect(component.courses[0].feedbackSessions.length).toEqual(3);"},{"lineNumber":365,"author":{"gitId":"Derek-Hardy"},"content":"    expect(component.courses[0].feedbackSessions[0].session.feedbackSessionName).toEqual(\u0027Orientation Session\u0027);"},{"lineNumber":366,"author":{"gitId":"Derek-Hardy"},"content":"    expect(component.courses[0].feedbackSessions[1].session.feedbackSessionName).toEqual(\u0027Welcome Tea Session\u0027);"},{"lineNumber":367,"author":{"gitId":"Derek-Hardy"},"content":"    expect(component.courses[0].feedbackSessions[2].session.feedbackSessionName).toEqual(\u0027Latest update Session\u0027);"},{"lineNumber":368,"author":{"gitId":"Derek-Hardy"},"content":"  });"},{"lineNumber":369,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":370,"author":{"gitId":"Derek-Hardy"},"content":"  it(\u0027should disable view response button when session is not published\u0027, () \u003d\u003e {"},{"lineNumber":371,"author":{"gitId":"-"},"content":"    const studentCourse: any \u003d {"},{"lineNumber":372,"author":{"gitId":"-"},"content":"      course: {"},{"lineNumber":373,"author":{"gitId":"Derek-Hardy"},"content":"        courseId: \u0027CS1231\u0027,"},{"lineNumber":374,"author":{"gitId":"Derek-Hardy"},"content":"        courseName: \u0027Discrete Structures\u0027,"},{"lineNumber":375,"author":{"gitId":"-"},"content":"        timeZone: \u0027Asia/Singapore\u0027,"},{"lineNumber":376,"author":{"gitId":"-"},"content":"        creationTimestamp: 1549095330000,"},{"lineNumber":377,"author":{"gitId":"-"},"content":"        deletionTimestamp: 0,"},{"lineNumber":378,"author":{"gitId":"-"},"content":"      },"},{"lineNumber":379,"author":{"gitId":"Derek-Hardy"},"content":"      feedbackSessions: ["},{"lineNumber":380,"author":{"gitId":"Derek-Hardy"},"content":"        {"},{"lineNumber":381,"author":{"gitId":"Derek-Hardy"},"content":"          session: {"},{"lineNumber":382,"author":{"gitId":"Derek-Hardy"},"content":"            feedbackSessionName: \u0027First Session\u0027,"},{"lineNumber":383,"author":{"gitId":"Derek-Hardy"},"content":"            courseId: \u0027CS1231\u0027,"},{"lineNumber":384,"author":{"gitId":"Derek-Hardy"},"content":"            timeZone: \u0027Asia/Singapore\u0027,"},{"lineNumber":385,"author":{"gitId":"Derek-Hardy"},"content":"            instructions: \u0027\u0027,"},{"lineNumber":386,"author":{"gitId":"Derek-Hardy"},"content":"            submissionStartTimestamp: 0,"},{"lineNumber":387,"author":{"gitId":"Derek-Hardy"},"content":"            submissionEndTimestamp: 1549095330000, // Saturday, 2 February 2019 16:15:30 GMT+08:00"},{"lineNumber":388,"author":{"gitId":"Derek-Hardy"},"content":"            gracePeriod: 0,"},{"lineNumber":389,"author":{"gitId":"Derek-Hardy"},"content":"            sessionVisibleSetting: SessionVisibleSetting.AT_OPEN,"},{"lineNumber":390,"author":{"gitId":"Derek-Hardy"},"content":"            responseVisibleSetting: ResponseVisibleSetting.AT_VISIBLE,"},{"lineNumber":391,"author":{"gitId":"Derek-Hardy"},"content":"            submissionStatus: FeedbackSessionSubmissionStatus.OPEN,"},{"lineNumber":392,"author":{"gitId":"Derek-Hardy"},"content":"            publishStatus: FeedbackSessionPublishStatus.PUBLISHED,"},{"lineNumber":393,"author":{"gitId":"Derek-Hardy"},"content":"            isClosingEmailEnabled: true,"},{"lineNumber":394,"author":{"gitId":"Derek-Hardy"},"content":"            isPublishedEmailEnabled: true,"},{"lineNumber":395,"author":{"gitId":"Derek-Hardy"},"content":"            createdAtTimestamp: 0,"},{"lineNumber":396,"author":{"gitId":"Derek-Hardy"},"content":"          },"},{"lineNumber":397,"author":{"gitId":"Derek-Hardy"},"content":"          isOpened: true,"},{"lineNumber":398,"author":{"gitId":"Derek-Hardy"},"content":"          isWaitingToOpen: false,"},{"lineNumber":399,"author":{"gitId":"Derek-Hardy"},"content":"          isPublished: false,"},{"lineNumber":400,"author":{"gitId":"Derek-Hardy"},"content":"          isSubmitted: true,"},{"lineNumber":401,"author":{"gitId":"Derek-Hardy"},"content":"        },"},{"lineNumber":402,"author":{"gitId":"Derek-Hardy"},"content":"      ],"},{"lineNumber":403,"author":{"gitId":"-"},"content":"    };"},{"lineNumber":404,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":405,"author":{"gitId":"-"},"content":"    component.courses \u003d [studentCourse];"},{"lineNumber":406,"author":{"gitId":"-"},"content":"    component.isCoursesLoading \u003d false;"},{"lineNumber":407,"author":{"gitId":"-"},"content":"    fixture.detectChanges();"},{"lineNumber":408,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":409,"author":{"gitId":"Derek-Hardy"},"content":"    const button: any \u003d fixture.debugElement.nativeElement.querySelector(\u0027#view-responses-btn-0\u0027);"},{"lineNumber":410,"author":{"gitId":"Derek-Hardy"},"content":"    expect(button.textContent).toEqual(\u0027 View Responses \u0027);"},{"lineNumber":411,"author":{"gitId":"Derek-Hardy"},"content":"    expect(button.className).toContain(\u0027disabled\u0027);"},{"lineNumber":412,"author":{"gitId":"-"},"content":"  });"},{"lineNumber":413,"author":{"gitId":"-"},"content":""},{"lineNumber":414,"author":{"gitId":"Derek-Hardy"},"content":"  it(\u0027should disable start submission button when session is waiting to open\u0027, () \u003d\u003e {"},{"lineNumber":415,"author":{"gitId":"Derek-Hardy"},"content":"    const studentCourse: any \u003d {"},{"lineNumber":416,"author":{"gitId":"-"},"content":"      course: {"},{"lineNumber":417,"author":{"gitId":"Derek-Hardy"},"content":"        courseId: \u0027CS1231\u0027,"},{"lineNumber":418,"author":{"gitId":"Derek-Hardy"},"content":"        courseName: \u0027Discrete Structures\u0027,"},{"lineNumber":419,"author":{"gitId":"-"},"content":"        timeZone: \u0027Asia/Singapore\u0027,"},{"lineNumber":420,"author":{"gitId":"Derek-Hardy"},"content":"        creationTimestamp: 1549095330000, // Saturday, 2 February 2019 16:15:30 GMT+08:00"},{"lineNumber":421,"author":{"gitId":"-"},"content":"        deletionTimestamp: 0,"},{"lineNumber":422,"author":{"gitId":"-"},"content":"      },"},{"lineNumber":423,"author":{"gitId":"-"},"content":"      feedbackSessions: ["},{"lineNumber":424,"author":{"gitId":"-"},"content":"        {"},{"lineNumber":425,"author":{"gitId":"-"},"content":"          session: {"},{"lineNumber":426,"author":{"gitId":"-"},"content":"            feedbackSessionName: \u0027First Session\u0027,"},{"lineNumber":427,"author":{"gitId":"Derek-Hardy"},"content":"            courseId: \u0027CS1231\u0027,"},{"lineNumber":428,"author":{"gitId":"-"},"content":"            timeZone: \u0027Asia/Singapore\u0027,"},{"lineNumber":429,"author":{"gitId":"-"},"content":"            instructions: \u0027\u0027,"},{"lineNumber":430,"author":{"gitId":"-"},"content":"            submissionStartTimestamp: 0,"},{"lineNumber":431,"author":{"gitId":"Derek-Hardy"},"content":"            submissionEndTimestamp: 1549095330000, // Saturday, 2 February 2019 16:15:30 GMT+08:00"},{"lineNumber":432,"author":{"gitId":"-"},"content":"            gracePeriod: 0,"},{"lineNumber":433,"author":{"gitId":"-"},"content":"            sessionVisibleSetting: SessionVisibleSetting.AT_OPEN,"},{"lineNumber":434,"author":{"gitId":"-"},"content":"            responseVisibleSetting: ResponseVisibleSetting.AT_VISIBLE,"},{"lineNumber":435,"author":{"gitId":"-"},"content":"            submissionStatus: FeedbackSessionSubmissionStatus.OPEN,"},{"lineNumber":436,"author":{"gitId":"-"},"content":"            publishStatus: FeedbackSessionPublishStatus.PUBLISHED,"},{"lineNumber":437,"author":{"gitId":"-"},"content":"            isClosingEmailEnabled: true,"},{"lineNumber":438,"author":{"gitId":"-"},"content":"            isPublishedEmailEnabled: true,"},{"lineNumber":439,"author":{"gitId":"-"},"content":"            createdAtTimestamp: 0,"},{"lineNumber":440,"author":{"gitId":"-"},"content":"          },"},{"lineNumber":441,"author":{"gitId":"Derek-Hardy"},"content":"          isOpened: false,"},{"lineNumber":442,"author":{"gitId":"-"},"content":"          isWaitingToOpen: true,"},{"lineNumber":443,"author":{"gitId":"-"},"content":"          isPublished: true,"},{"lineNumber":444,"author":{"gitId":"Derek-Hardy"},"content":"          isSubmitted: false,"},{"lineNumber":445,"author":{"gitId":"-"},"content":"        },"},{"lineNumber":446,"author":{"gitId":"Derek-Hardy"},"content":"      ],"},{"lineNumber":447,"author":{"gitId":"Derek-Hardy"},"content":"    };"},{"lineNumber":448,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":449,"author":{"gitId":"Derek-Hardy"},"content":"    component.courses \u003d [studentCourse];"},{"lineNumber":450,"author":{"gitId":"Derek-Hardy"},"content":"    component.isCoursesLoading \u003d false;"},{"lineNumber":451,"author":{"gitId":"Derek-Hardy"},"content":"    fixture.detectChanges();"},{"lineNumber":452,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":453,"author":{"gitId":"Derek-Hardy"},"content":"    const button: any \u003d fixture.debugElement.nativeElement.querySelector(\u0027#disabled-start-submit-btn-0\u0027);"},{"lineNumber":454,"author":{"gitId":"Derek-Hardy"},"content":"    expect(button.textContent).toEqual(\u0027 Start Submission \u0027);"},{"lineNumber":455,"author":{"gitId":"Derek-Hardy"},"content":"    expect(button.className).toContain(\u0027disabled\u0027);"},{"lineNumber":456,"author":{"gitId":"Derek-Hardy"},"content":"  });"},{"lineNumber":457,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":458,"author":{"gitId":"Derek-Hardy"},"content":"  it(\u0027should activate start submission button when session is open and response is not submitted\u0027, () \u003d\u003e {"},{"lineNumber":459,"author":{"gitId":"Derek-Hardy"},"content":"    const studentCourse: any \u003d {"},{"lineNumber":460,"author":{"gitId":"Derek-Hardy"},"content":"      course: {"},{"lineNumber":461,"author":{"gitId":"Derek-Hardy"},"content":"        courseId: \u0027CS1231\u0027,"},{"lineNumber":462,"author":{"gitId":"Derek-Hardy"},"content":"        courseName: \u0027Discrete Structures\u0027,"},{"lineNumber":463,"author":{"gitId":"Derek-Hardy"},"content":"        timeZone: \u0027Asia/Singapore\u0027,"},{"lineNumber":464,"author":{"gitId":"Derek-Hardy"},"content":"        creationTimestamp: 1549095330000, // Saturday, 2 February 2019 16:15:30 GMT+08:00"},{"lineNumber":465,"author":{"gitId":"Derek-Hardy"},"content":"        deletionTimestamp: 0,"},{"lineNumber":466,"author":{"gitId":"Derek-Hardy"},"content":"      },"},{"lineNumber":467,"author":{"gitId":"Derek-Hardy"},"content":"      feedbackSessions: ["},{"lineNumber":468,"author":{"gitId":"-"},"content":"        {"},{"lineNumber":469,"author":{"gitId":"-"},"content":"          session: {"},{"lineNumber":470,"author":{"gitId":"Derek-Hardy"},"content":"            feedbackSessionName: \u0027First Session\u0027,"},{"lineNumber":471,"author":{"gitId":"Derek-Hardy"},"content":"            courseId: \u0027CS1231\u0027,"},{"lineNumber":472,"author":{"gitId":"-"},"content":"            timeZone: \u0027Asia/Singapore\u0027,"},{"lineNumber":473,"author":{"gitId":"-"},"content":"            instructions: \u0027\u0027,"},{"lineNumber":474,"author":{"gitId":"-"},"content":"            submissionStartTimestamp: 0,"},{"lineNumber":475,"author":{"gitId":"Derek-Hardy"},"content":"            submissionEndTimestamp: 1549095330000, // Saturday, 2 February 2019 16:15:30 GMT+08:00"},{"lineNumber":476,"author":{"gitId":"-"},"content":"            gracePeriod: 0,"},{"lineNumber":477,"author":{"gitId":"-"},"content":"            sessionVisibleSetting: SessionVisibleSetting.AT_OPEN,"},{"lineNumber":478,"author":{"gitId":"-"},"content":"            responseVisibleSetting: ResponseVisibleSetting.AT_VISIBLE,"},{"lineNumber":479,"author":{"gitId":"-"},"content":"            submissionStatus: FeedbackSessionSubmissionStatus.OPEN,"},{"lineNumber":480,"author":{"gitId":"-"},"content":"            publishStatus: FeedbackSessionPublishStatus.PUBLISHED,"},{"lineNumber":481,"author":{"gitId":"-"},"content":"            isClosingEmailEnabled: true,"},{"lineNumber":482,"author":{"gitId":"-"},"content":"            isPublishedEmailEnabled: true,"},{"lineNumber":483,"author":{"gitId":"-"},"content":"            createdAtTimestamp: 0,"},{"lineNumber":484,"author":{"gitId":"-"},"content":"          },"},{"lineNumber":485,"author":{"gitId":"-"},"content":"          isOpened: true,"},{"lineNumber":486,"author":{"gitId":"-"},"content":"          isWaitingToOpen: false,"},{"lineNumber":487,"author":{"gitId":"Derek-Hardy"},"content":"          isPublished: true,"},{"lineNumber":488,"author":{"gitId":"-"},"content":"          isSubmitted: false,"},{"lineNumber":489,"author":{"gitId":"-"},"content":"        },"},{"lineNumber":490,"author":{"gitId":"-"},"content":"      ],"},{"lineNumber":491,"author":{"gitId":"-"},"content":"    };"},{"lineNumber":492,"author":{"gitId":"-"},"content":""},{"lineNumber":493,"author":{"gitId":"Derek-Hardy"},"content":"    component.courses \u003d [studentCourse];"},{"lineNumber":494,"author":{"gitId":"Derek-Hardy"},"content":"    component.isCoursesLoading \u003d false;"},{"lineNumber":495,"author":{"gitId":"-"},"content":"    fixture.detectChanges();"},{"lineNumber":496,"author":{"gitId":"-"},"content":""},{"lineNumber":497,"author":{"gitId":"Derek-Hardy"},"content":"    const button: any \u003d fixture.debugElement.nativeElement.querySelector(\u0027#start-submit-btn-0\u0027);"},{"lineNumber":498,"author":{"gitId":"Derek-Hardy"},"content":"    expect(button.textContent).toEqual(\u0027 Start Submission \u0027);"},{"lineNumber":499,"author":{"gitId":"-"},"content":"  });"},{"lineNumber":500,"author":{"gitId":"-"},"content":""},{"lineNumber":501,"author":{"gitId":"Derek-Hardy"},"content":"  it(\u0027should activate edit submission button when session is open and response is submitted\u0027, () \u003d\u003e {"},{"lineNumber":502,"author":{"gitId":"Derek-Hardy"},"content":"    const studentCourse: any \u003d {"},{"lineNumber":503,"author":{"gitId":"-"},"content":"      course: {"},{"lineNumber":504,"author":{"gitId":"Derek-Hardy"},"content":"        courseId: \u0027CS1231\u0027,"},{"lineNumber":505,"author":{"gitId":"Derek-Hardy"},"content":"        courseName: \u0027Discrete Structures\u0027,"},{"lineNumber":506,"author":{"gitId":"-"},"content":"        timeZone: \u0027Asia/Singapore\u0027,"},{"lineNumber":507,"author":{"gitId":"Derek-Hardy"},"content":"        creationTimestamp: 1549095330000, // Saturday, 2 February 2019 16:15:30 GMT+08:00"},{"lineNumber":508,"author":{"gitId":"-"},"content":"        deletionTimestamp: 0,"},{"lineNumber":509,"author":{"gitId":"-"},"content":"      },"},{"lineNumber":510,"author":{"gitId":"-"},"content":"      feedbackSessions: ["},{"lineNumber":511,"author":{"gitId":"-"},"content":"        {"},{"lineNumber":512,"author":{"gitId":"-"},"content":"          session: {"},{"lineNumber":513,"author":{"gitId":"Derek-Hardy"},"content":"            feedbackSessionName: \u0027First Session\u0027,"},{"lineNumber":514,"author":{"gitId":"Derek-Hardy"},"content":"            courseId: \u0027CS1231\u0027,"},{"lineNumber":515,"author":{"gitId":"-"},"content":"            timeZone: \u0027Asia/Singapore\u0027,"},{"lineNumber":516,"author":{"gitId":"-"},"content":"            instructions: \u0027\u0027,"},{"lineNumber":517,"author":{"gitId":"-"},"content":"            submissionStartTimestamp: 0,"},{"lineNumber":518,"author":{"gitId":"Derek-Hardy"},"content":"            submissionEndTimestamp: 1549095330000, // Saturday, 2 February 2019 16:15:30 GMT+08:00"},{"lineNumber":519,"author":{"gitId":"-"},"content":"            gracePeriod: 0,"},{"lineNumber":520,"author":{"gitId":"-"},"content":"            sessionVisibleSetting: SessionVisibleSetting.AT_OPEN,"},{"lineNumber":521,"author":{"gitId":"-"},"content":"            responseVisibleSetting: ResponseVisibleSetting.AT_VISIBLE,"},{"lineNumber":522,"author":{"gitId":"-"},"content":"            submissionStatus: FeedbackSessionSubmissionStatus.OPEN,"},{"lineNumber":523,"author":{"gitId":"-"},"content":"            publishStatus: FeedbackSessionPublishStatus.PUBLISHED,"},{"lineNumber":524,"author":{"gitId":"-"},"content":"            isClosingEmailEnabled: true,"},{"lineNumber":525,"author":{"gitId":"-"},"content":"            isPublishedEmailEnabled: true,"},{"lineNumber":526,"author":{"gitId":"-"},"content":"            createdAtTimestamp: 0,"},{"lineNumber":527,"author":{"gitId":"-"},"content":"          },"},{"lineNumber":528,"author":{"gitId":"-"},"content":"          isOpened: true,"},{"lineNumber":529,"author":{"gitId":"-"},"content":"          isWaitingToOpen: false,"},{"lineNumber":530,"author":{"gitId":"-"},"content":"          isPublished: false,"},{"lineNumber":531,"author":{"gitId":"-"},"content":"          isSubmitted: true,"},{"lineNumber":532,"author":{"gitId":"-"},"content":"        },"},{"lineNumber":533,"author":{"gitId":"Derek-Hardy"},"content":"      ],"},{"lineNumber":534,"author":{"gitId":"Derek-Hardy"},"content":"    };"},{"lineNumber":535,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":536,"author":{"gitId":"Derek-Hardy"},"content":"    component.courses \u003d [studentCourse];"},{"lineNumber":537,"author":{"gitId":"Derek-Hardy"},"content":"    component.isCoursesLoading \u003d false;"},{"lineNumber":538,"author":{"gitId":"Derek-Hardy"},"content":"    fixture.detectChanges();"},{"lineNumber":539,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":540,"author":{"gitId":"Derek-Hardy"},"content":"    const button: any \u003d fixture.debugElement.nativeElement.querySelector(\u0027#edit-submit-btn-0\u0027);"},{"lineNumber":541,"author":{"gitId":"Derek-Hardy"},"content":"    expect(button.textContent).toEqual(\u0027 Edit Submission \u0027);"},{"lineNumber":542,"author":{"gitId":"-"},"content":"  });"},{"lineNumber":543,"author":{"gitId":"-"},"content":""},{"lineNumber":544,"author":{"gitId":"Derek-Hardy"},"content":"  it(\u0027should activate view submission button when session is not open\u0027, () \u003d\u003e {"},{"lineNumber":545,"author":{"gitId":"-"},"content":"    const studentCourse: any \u003d {"},{"lineNumber":546,"author":{"gitId":"Derek-Hardy"},"content":"      course: {"},{"lineNumber":547,"author":{"gitId":"Derek-Hardy"},"content":"        courseId: \u0027CS1231\u0027,"},{"lineNumber":548,"author":{"gitId":"Derek-Hardy"},"content":"        courseName: \u0027Discrete Structures\u0027,"},{"lineNumber":549,"author":{"gitId":"Derek-Hardy"},"content":"        timeZone: \u0027Asia/Singapore\u0027,"},{"lineNumber":550,"author":{"gitId":"Derek-Hardy"},"content":"        creationTimestamp: 1549095330000, // Saturday, 2 February 2019 16:15:30 GMT+08:00"},{"lineNumber":551,"author":{"gitId":"Derek-Hardy"},"content":"        deletionTimestamp: 0,"},{"lineNumber":552,"author":{"gitId":"Derek-Hardy"},"content":"      },"},{"lineNumber":553,"author":{"gitId":"Derek-Hardy"},"content":"      feedbackSessions: ["},{"lineNumber":554,"author":{"gitId":"-"},"content":"        {"},{"lineNumber":555,"author":{"gitId":"-"},"content":"          session: {"},{"lineNumber":556,"author":{"gitId":"Derek-Hardy"},"content":"            feedbackSessionName: \u0027First Session\u0027,"},{"lineNumber":557,"author":{"gitId":"Derek-Hardy"},"content":"            courseId: \u0027CS1231\u0027,"},{"lineNumber":558,"author":{"gitId":"-"},"content":"            timeZone: \u0027Asia/Singapore\u0027,"},{"lineNumber":559,"author":{"gitId":"-"},"content":"            instructions: \u0027\u0027,"},{"lineNumber":560,"author":{"gitId":"-"},"content":"            submissionStartTimestamp: 0,"},{"lineNumber":561,"author":{"gitId":"Derek-Hardy"},"content":"            submissionEndTimestamp: 1549095330000, // Saturday, 2 February 2019 16:15:30 GMT+08:00"},{"lineNumber":562,"author":{"gitId":"-"},"content":"            gracePeriod: 0,"},{"lineNumber":563,"author":{"gitId":"-"},"content":"            sessionVisibleSetting: SessionVisibleSetting.AT_OPEN,"},{"lineNumber":564,"author":{"gitId":"-"},"content":"            responseVisibleSetting: ResponseVisibleSetting.AT_VISIBLE,"},{"lineNumber":565,"author":{"gitId":"-"},"content":"            submissionStatus: FeedbackSessionSubmissionStatus.OPEN,"},{"lineNumber":566,"author":{"gitId":"-"},"content":"            publishStatus: FeedbackSessionPublishStatus.PUBLISHED,"},{"lineNumber":567,"author":{"gitId":"-"},"content":"            isClosingEmailEnabled: true,"},{"lineNumber":568,"author":{"gitId":"-"},"content":"            isPublishedEmailEnabled: true,"},{"lineNumber":569,"author":{"gitId":"-"},"content":"            createdAtTimestamp: 0,"},{"lineNumber":570,"author":{"gitId":"-"},"content":"          },"},{"lineNumber":571,"author":{"gitId":"-"},"content":"          isOpened: false,"},{"lineNumber":572,"author":{"gitId":"-"},"content":"          isWaitingToOpen: false,"},{"lineNumber":573,"author":{"gitId":"-"},"content":"          isPublished: false,"},{"lineNumber":574,"author":{"gitId":"-"},"content":"          isSubmitted: true,"},{"lineNumber":575,"author":{"gitId":"-"},"content":"        },"},{"lineNumber":576,"author":{"gitId":"-"},"content":"      ],"},{"lineNumber":577,"author":{"gitId":"-"},"content":"    };"},{"lineNumber":578,"author":{"gitId":"-"},"content":""},{"lineNumber":579,"author":{"gitId":"Derek-Hardy"},"content":"    component.courses \u003d [studentCourse];"},{"lineNumber":580,"author":{"gitId":"Derek-Hardy"},"content":"    component.isCoursesLoading \u003d false;"},{"lineNumber":581,"author":{"gitId":"Derek-Hardy"},"content":"    fixture.detectChanges();"},{"lineNumber":582,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":583,"author":{"gitId":"Derek-Hardy"},"content":"    const button: any \u003d fixture.debugElement.nativeElement.querySelector(\u0027#view-submit-btn-0\u0027);"},{"lineNumber":584,"author":{"gitId":"Derek-Hardy"},"content":"    expect(button.textContent).toEqual(\u0027 View Submission \u0027);"},{"lineNumber":585,"author":{"gitId":"Derek-Hardy"},"content":"  });"},{"lineNumber":586,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":587,"author":{"gitId":"Derek-Hardy"},"content":"  it(\u0027should navigate to student course page to view the corresponding team\u0027, () \u003d\u003e {"},{"lineNumber":588,"author":{"gitId":"Derek-Hardy"},"content":"    const studentCourse1: any \u003d {"},{"lineNumber":589,"author":{"gitId":"-"},"content":"      course: {"},{"lineNumber":590,"author":{"gitId":"-"},"content":"        courseId: \u0027CS3281\u0027,"},{"lineNumber":591,"author":{"gitId":"Derek-Hardy"},"content":"        courseName: \u0027Thematic Systems I\u0027,"},{"lineNumber":592,"author":{"gitId":"-"},"content":"        timeZone: \u0027Asia/Singapore\u0027,"},{"lineNumber":593,"author":{"gitId":"Derek-Hardy"},"content":"        creationTimestamp: 1549095330000, // Saturday, 2 February 2019 16:15:30 GMT+08:00"},{"lineNumber":594,"author":{"gitId":"-"},"content":"        deletionTimestamp: 0,"},{"lineNumber":595,"author":{"gitId":"-"},"content":"      },"},{"lineNumber":596,"author":{"gitId":"-"},"content":"      feedbackSessions: [],"},{"lineNumber":597,"author":{"gitId":"-"},"content":"    };"},{"lineNumber":598,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":599,"author":{"gitId":"Derek-Hardy"},"content":"    const studentCourse2: any \u003d {"},{"lineNumber":600,"author":{"gitId":"Derek-Hardy"},"content":"      course: {"},{"lineNumber":601,"author":{"gitId":"Derek-Hardy"},"content":"        courseId: \u0027CS3282\u0027,"},{"lineNumber":602,"author":{"gitId":"Derek-Hardy"},"content":"        courseName: \u0027Thematic Systems II\u0027,"},{"lineNumber":603,"author":{"gitId":"Derek-Hardy"},"content":"        timeZone: \u0027Asia/Singapore\u0027,"},{"lineNumber":604,"author":{"gitId":"Derek-Hardy"},"content":"        creationTimestamp: 1549095330000, // Saturday, 2 February 2019 16:15:30 GMT+08:00"},{"lineNumber":605,"author":{"gitId":"Derek-Hardy"},"content":"        deletionTimestamp: 0,"},{"lineNumber":606,"author":{"gitId":"Derek-Hardy"},"content":"      },"},{"lineNumber":607,"author":{"gitId":"Derek-Hardy"},"content":"      feedbackSessions: [],"},{"lineNumber":608,"author":{"gitId":"Derek-Hardy"},"content":"    };"},{"lineNumber":609,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":610,"author":{"gitId":"Derek-Hardy"},"content":"    component.courses \u003d [studentCourse1, studentCourse2];"},{"lineNumber":611,"author":{"gitId":"-"},"content":"    component.isCoursesLoading \u003d false;"},{"lineNumber":612,"author":{"gitId":"-"},"content":"    fixture.detectChanges();"},{"lineNumber":613,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":614,"author":{"gitId":"Derek-Hardy"},"content":"    const href1: any \u003d fixture.debugElement.nativeElement.querySelector(\u0027#view-team-btn-0\u0027).getAttribute(\u0027href\u0027);"},{"lineNumber":615,"author":{"gitId":"Derek-Hardy"},"content":"    const href2: any \u003d fixture.debugElement.nativeElement.querySelector(\u0027#view-team-btn-1\u0027).getAttribute(\u0027href\u0027);"},{"lineNumber":616,"author":{"gitId":"Derek-Hardy"},"content":"    expect(href1).toEqual(\u0027/web/student/course?courseid\u003dCS3281\u0027);"},{"lineNumber":617,"author":{"gitId":"Derek-Hardy"},"content":"    expect(href2).toEqual(\u0027/web/student/course?courseid\u003dCS3282\u0027);"},{"lineNumber":618,"author":{"gitId":"-"},"content":"  });"},{"lineNumber":619,"author":{"gitId":"-"},"content":""},{"lineNumber":620,"author":{"gitId":"Derek-Hardy"},"content":"  it(\u0027should navigate to student session result page to view responses\u0027, () \u003d\u003e {"},{"lineNumber":621,"author":{"gitId":"Derek-Hardy"},"content":"    const studentCourse: any \u003d {"},{"lineNumber":622,"author":{"gitId":"-"},"content":"      course: {"},{"lineNumber":623,"author":{"gitId":"Derek-Hardy"},"content":"        courseId: \u0027CS1231\u0027,"},{"lineNumber":624,"author":{"gitId":"Derek-Hardy"},"content":"        courseName: \u0027Discrete Structures\u0027,"},{"lineNumber":625,"author":{"gitId":"-"},"content":"        timeZone: \u0027Asia/Singapore\u0027,"},{"lineNumber":626,"author":{"gitId":"Derek-Hardy"},"content":"        creationTimestamp: 1549095330000, // Saturday, 2 February 2019 16:15:30 GMT+08:00"},{"lineNumber":627,"author":{"gitId":"-"},"content":"        deletionTimestamp: 0,"},{"lineNumber":628,"author":{"gitId":"-"},"content":"      },"},{"lineNumber":629,"author":{"gitId":"-"},"content":"      feedbackSessions: ["},{"lineNumber":630,"author":{"gitId":"-"},"content":"        {"},{"lineNumber":631,"author":{"gitId":"-"},"content":"          session: {"},{"lineNumber":632,"author":{"gitId":"-"},"content":"            feedbackSessionName: \u0027First Session\u0027,"},{"lineNumber":633,"author":{"gitId":"Derek-Hardy"},"content":"            courseId: \u0027CS1231\u0027,"},{"lineNumber":634,"author":{"gitId":"-"},"content":"            timeZone: \u0027Asia/Singapore\u0027,"},{"lineNumber":635,"author":{"gitId":"-"},"content":"            instructions: \u0027\u0027,"},{"lineNumber":636,"author":{"gitId":"-"},"content":"            submissionStartTimestamp: 0,"},{"lineNumber":637,"author":{"gitId":"Derek-Hardy"},"content":"            submissionEndTimestamp: 1549095330000, // Saturday, 2 February 2019 16:15:30 GMT+08:00"},{"lineNumber":638,"author":{"gitId":"-"},"content":"            gracePeriod: 0,"},{"lineNumber":639,"author":{"gitId":"-"},"content":"            sessionVisibleSetting: SessionVisibleSetting.AT_OPEN,"},{"lineNumber":640,"author":{"gitId":"-"},"content":"            responseVisibleSetting: ResponseVisibleSetting.AT_VISIBLE,"},{"lineNumber":641,"author":{"gitId":"-"},"content":"            submissionStatus: FeedbackSessionSubmissionStatus.OPEN,"},{"lineNumber":642,"author":{"gitId":"-"},"content":"            publishStatus: FeedbackSessionPublishStatus.PUBLISHED,"},{"lineNumber":643,"author":{"gitId":"-"},"content":"            isClosingEmailEnabled: true,"},{"lineNumber":644,"author":{"gitId":"-"},"content":"            isPublishedEmailEnabled: true,"},{"lineNumber":645,"author":{"gitId":"-"},"content":"            createdAtTimestamp: 0,"},{"lineNumber":646,"author":{"gitId":"-"},"content":"          },"},{"lineNumber":647,"author":{"gitId":"-"},"content":"          isOpened: true,"},{"lineNumber":648,"author":{"gitId":"Derek-Hardy"},"content":"          isWaitingToOpen: false,"},{"lineNumber":649,"author":{"gitId":"-"},"content":"          isPublished: true,"},{"lineNumber":650,"author":{"gitId":"-"},"content":"          isSubmitted: true,"},{"lineNumber":651,"author":{"gitId":"-"},"content":"        },"},{"lineNumber":652,"author":{"gitId":"-"},"content":"        {"},{"lineNumber":653,"author":{"gitId":"-"},"content":"          session: {"},{"lineNumber":654,"author":{"gitId":"-"},"content":"            feedbackSessionName: \u0027Second Session\u0027,"},{"lineNumber":655,"author":{"gitId":"Derek-Hardy"},"content":"            courseId: \u0027CS1231\u0027,"},{"lineNumber":656,"author":{"gitId":"-"},"content":"            timeZone: \u0027Asia/Singapore\u0027,"},{"lineNumber":657,"author":{"gitId":"-"},"content":"            instructions: \u0027\u0027,"},{"lineNumber":658,"author":{"gitId":"-"},"content":"            submissionStartTimestamp: 0,"},{"lineNumber":659,"author":{"gitId":"Derek-Hardy"},"content":"            submissionEndTimestamp: 1549095330000, // Saturday, 2 February 2019 16:15:30 GMT+08:00"},{"lineNumber":660,"author":{"gitId":"-"},"content":"            gracePeriod: 0,"},{"lineNumber":661,"author":{"gitId":"-"},"content":"            sessionVisibleSetting: SessionVisibleSetting.AT_OPEN,"},{"lineNumber":662,"author":{"gitId":"-"},"content":"            responseVisibleSetting: ResponseVisibleSetting.AT_VISIBLE,"},{"lineNumber":663,"author":{"gitId":"-"},"content":"            submissionStatus: FeedbackSessionSubmissionStatus.OPEN,"},{"lineNumber":664,"author":{"gitId":"-"},"content":"            publishStatus: FeedbackSessionPublishStatus.PUBLISHED,"},{"lineNumber":665,"author":{"gitId":"-"},"content":"            isClosingEmailEnabled: true,"},{"lineNumber":666,"author":{"gitId":"-"},"content":"            isPublishedEmailEnabled: true,"},{"lineNumber":667,"author":{"gitId":"-"},"content":"            createdAtTimestamp: 0,"},{"lineNumber":668,"author":{"gitId":"-"},"content":"          },"},{"lineNumber":669,"author":{"gitId":"Derek-Hardy"},"content":"          isOpened: false,"},{"lineNumber":670,"author":{"gitId":"-"},"content":"          isWaitingToOpen: false,"},{"lineNumber":671,"author":{"gitId":"Derek-Hardy"},"content":"          isPublished: true,"},{"lineNumber":672,"author":{"gitId":"Derek-Hardy"},"content":"          isSubmitted: true,"},{"lineNumber":673,"author":{"gitId":"-"},"content":"        },"},{"lineNumber":674,"author":{"gitId":"-"},"content":"      ],"},{"lineNumber":675,"author":{"gitId":"-"},"content":"    };"},{"lineNumber":676,"author":{"gitId":"-"},"content":""},{"lineNumber":677,"author":{"gitId":"Derek-Hardy"},"content":"    component.courses \u003d [studentCourse];"},{"lineNumber":678,"author":{"gitId":"Derek-Hardy"},"content":"    component.isCoursesLoading \u003d false;"},{"lineNumber":679,"author":{"gitId":"Derek-Hardy"},"content":"    fixture.detectChanges();"},{"lineNumber":680,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":681,"author":{"gitId":"Derek-Hardy"},"content":"    const href1: any \u003d fixture.debugElement.nativeElement.querySelector(\u0027#view-responses-btn-0\u0027).getAttribute(\u0027href\u0027);"},{"lineNumber":682,"author":{"gitId":"Derek-Hardy"},"content":"    const href2: any \u003d fixture.debugElement.nativeElement.querySelector(\u0027#view-responses-btn-1\u0027).getAttribute(\u0027href\u0027);"},{"lineNumber":683,"author":{"gitId":"Derek-Hardy"},"content":"    expect(href1).toEqual(\u0027/web/student/sessions/result?courseid\u003dCS1231\u0026fsname\u003dFirst%20Session\u0027);"},{"lineNumber":684,"author":{"gitId":"Derek-Hardy"},"content":"    expect(href2).toEqual(\u0027/web/student/sessions/result?courseid\u003dCS1231\u0026fsname\u003dSecond%20Session\u0027);"},{"lineNumber":685,"author":{"gitId":"Derek-Hardy"},"content":"  });"},{"lineNumber":686,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":687,"author":{"gitId":"Derek-Hardy"},"content":"  // start/edit/view submission button share the same router link and query params"},{"lineNumber":688,"author":{"gitId":"Derek-Hardy"},"content":"  // here we only have to test one of them"},{"lineNumber":689,"author":{"gitId":"Derek-Hardy"},"content":"  it(\u0027should navigate to student session submission page for viewing\u0027, () \u003d\u003e {"},{"lineNumber":690,"author":{"gitId":"Derek-Hardy"},"content":"    const studentCourse: any \u003d {"},{"lineNumber":691,"author":{"gitId":"-"},"content":"      course: {"},{"lineNumber":692,"author":{"gitId":"Derek-Hardy"},"content":"        courseId: \u0027CS1231\u0027,"},{"lineNumber":693,"author":{"gitId":"Derek-Hardy"},"content":"        courseName: \u0027Discrete Structures\u0027,"},{"lineNumber":694,"author":{"gitId":"-"},"content":"        timeZone: \u0027Asia/Singapore\u0027,"},{"lineNumber":695,"author":{"gitId":"Derek-Hardy"},"content":"        creationTimestamp: 1549095330000, // Saturday, 2 February 2019 16:15:30 GMT+08:00"},{"lineNumber":696,"author":{"gitId":"-"},"content":"        deletionTimestamp: 0,"},{"lineNumber":697,"author":{"gitId":"-"},"content":"      },"},{"lineNumber":698,"author":{"gitId":"-"},"content":"      feedbackSessions: ["},{"lineNumber":699,"author":{"gitId":"-"},"content":"        {"},{"lineNumber":700,"author":{"gitId":"-"},"content":"          session: {"},{"lineNumber":701,"author":{"gitId":"Derek-Hardy"},"content":"            feedbackSessionName: \u0027First Session\u0027,"},{"lineNumber":702,"author":{"gitId":"Derek-Hardy"},"content":"            courseId: \u0027CS1231\u0027,"},{"lineNumber":703,"author":{"gitId":"-"},"content":"            timeZone: \u0027Asia/Singapore\u0027,"},{"lineNumber":704,"author":{"gitId":"-"},"content":"            instructions: \u0027\u0027,"},{"lineNumber":705,"author":{"gitId":"-"},"content":"            submissionStartTimestamp: 0,"},{"lineNumber":706,"author":{"gitId":"Derek-Hardy"},"content":"            submissionEndTimestamp: 1549095330000, // Saturday, 2 February 2019 16:15:30 GMT+08:00"},{"lineNumber":707,"author":{"gitId":"-"},"content":"            gracePeriod: 0,"},{"lineNumber":708,"author":{"gitId":"-"},"content":"            sessionVisibleSetting: SessionVisibleSetting.AT_OPEN,"},{"lineNumber":709,"author":{"gitId":"-"},"content":"            responseVisibleSetting: ResponseVisibleSetting.AT_VISIBLE,"},{"lineNumber":710,"author":{"gitId":"-"},"content":"            submissionStatus: FeedbackSessionSubmissionStatus.OPEN,"},{"lineNumber":711,"author":{"gitId":"-"},"content":"            publishStatus: FeedbackSessionPublishStatus.PUBLISHED,"},{"lineNumber":712,"author":{"gitId":"-"},"content":"            isClosingEmailEnabled: true,"},{"lineNumber":713,"author":{"gitId":"-"},"content":"            isPublishedEmailEnabled: true,"},{"lineNumber":714,"author":{"gitId":"-"},"content":"            createdAtTimestamp: 0,"},{"lineNumber":715,"author":{"gitId":"-"},"content":"          },"},{"lineNumber":716,"author":{"gitId":"Derek-Hardy"},"content":"          isOpened: false,"},{"lineNumber":717,"author":{"gitId":"-"},"content":"          isWaitingToOpen: false,"},{"lineNumber":718,"author":{"gitId":"-"},"content":"          isPublished: false,"},{"lineNumber":719,"author":{"gitId":"-"},"content":"          isSubmitted: true,"},{"lineNumber":720,"author":{"gitId":"-"},"content":"        },"},{"lineNumber":721,"author":{"gitId":"-"},"content":"        {"},{"lineNumber":722,"author":{"gitId":"-"},"content":"          session: {"},{"lineNumber":723,"author":{"gitId":"Derek-Hardy"},"content":"            feedbackSessionName: \u0027Second Session\u0027,"},{"lineNumber":724,"author":{"gitId":"Derek-Hardy"},"content":"            courseId: \u0027CS1231\u0027,"},{"lineNumber":725,"author":{"gitId":"-"},"content":"            timeZone: \u0027Asia/Singapore\u0027,"},{"lineNumber":726,"author":{"gitId":"-"},"content":"            instructions: \u0027\u0027,"},{"lineNumber":727,"author":{"gitId":"-"},"content":"            submissionStartTimestamp: 0,"},{"lineNumber":728,"author":{"gitId":"Derek-Hardy"},"content":"            submissionEndTimestamp: 1549095330000, // Saturday, 2 February 2019 16:15:30 GMT+08:00"},{"lineNumber":729,"author":{"gitId":"-"},"content":"            gracePeriod: 0,"},{"lineNumber":730,"author":{"gitId":"-"},"content":"            sessionVisibleSetting: SessionVisibleSetting.AT_OPEN,"},{"lineNumber":731,"author":{"gitId":"-"},"content":"            responseVisibleSetting: ResponseVisibleSetting.AT_VISIBLE,"},{"lineNumber":732,"author":{"gitId":"-"},"content":"            submissionStatus: FeedbackSessionSubmissionStatus.OPEN,"},{"lineNumber":733,"author":{"gitId":"-"},"content":"            publishStatus: FeedbackSessionPublishStatus.PUBLISHED,"},{"lineNumber":734,"author":{"gitId":"-"},"content":"            isClosingEmailEnabled: true,"},{"lineNumber":735,"author":{"gitId":"-"},"content":"            isPublishedEmailEnabled: true,"},{"lineNumber":736,"author":{"gitId":"-"},"content":"            createdAtTimestamp: 0,"},{"lineNumber":737,"author":{"gitId":"-"},"content":"          },"},{"lineNumber":738,"author":{"gitId":"-"},"content":"          isOpened: false,"},{"lineNumber":739,"author":{"gitId":"-"},"content":"          isWaitingToOpen: false,"},{"lineNumber":740,"author":{"gitId":"-"},"content":"          isPublished: false,"},{"lineNumber":741,"author":{"gitId":"-"},"content":"          isSubmitted: true,"},{"lineNumber":742,"author":{"gitId":"-"},"content":"        },"},{"lineNumber":743,"author":{"gitId":"-"},"content":"      ],"},{"lineNumber":744,"author":{"gitId":"-"},"content":"    };"},{"lineNumber":745,"author":{"gitId":"-"},"content":""},{"lineNumber":746,"author":{"gitId":"Derek-Hardy"},"content":"    component.courses \u003d [studentCourse];"},{"lineNumber":747,"author":{"gitId":"Derek-Hardy"},"content":"    component.isCoursesLoading \u003d false;"},{"lineNumber":748,"author":{"gitId":"Derek-Hardy"},"content":"    fixture.detectChanges();"},{"lineNumber":749,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":750,"author":{"gitId":"Derek-Hardy"},"content":"    const href1: any \u003d fixture.debugElement.nativeElement.querySelector(\u0027#view-submit-btn-0\u0027).getAttribute(\u0027href\u0027);"},{"lineNumber":751,"author":{"gitId":"Derek-Hardy"},"content":"    const href2: any \u003d fixture.debugElement.nativeElement.querySelector(\u0027#view-submit-btn-1\u0027).getAttribute(\u0027href\u0027);"},{"lineNumber":752,"author":{"gitId":"Derek-Hardy"},"content":"    expect(href1).toEqual(\u0027/web/student/sessions/submission?courseid\u003dCS1231\u0026fsname\u003dFirst%20Session\u0027);"},{"lineNumber":753,"author":{"gitId":"Derek-Hardy"},"content":"    expect(href2).toEqual(\u0027/web/student/sessions/submission?courseid\u003dCS1231\u0026fsname\u003dSecond%20Session\u0027);"},{"lineNumber":754,"author":{"gitId":"Derek-Hardy"},"content":"  });"},{"lineNumber":755,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":756,"author":{"gitId":"Derek-Hardy"},"content":"  it(\u0027should sort courses by their IDs\u0027, () \u003d\u003e {"},{"lineNumber":757,"author":{"gitId":"Derek-Hardy"},"content":"    component.courses \u003d [studentCourseB, studentCourseC, studentCourseA];"},{"lineNumber":758,"author":{"gitId":"Derek-Hardy"},"content":"    component.isCoursesLoading \u003d false;"},{"lineNumber":759,"author":{"gitId":"Derek-Hardy"},"content":"    fixture.detectChanges();"},{"lineNumber":760,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":761,"author":{"gitId":"Derek-Hardy"},"content":"    const button: any \u003d fixture.debugElement.nativeElement.querySelector(\u0027#sort-course-id-btn\u0027);"},{"lineNumber":762,"author":{"gitId":"Derek-Hardy"},"content":"    button.click();"},{"lineNumber":763,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":764,"author":{"gitId":"Derek-Hardy"},"content":"    expect(component.courses[0].course.courseId).toEqual(studentCourseA.course.courseId);"},{"lineNumber":765,"author":{"gitId":"Derek-Hardy"},"content":"    expect(component.courses[1].course.courseId).toEqual(studentCourseB.course.courseId);"},{"lineNumber":766,"author":{"gitId":"Derek-Hardy"},"content":"    expect(component.courses[2].course.courseId).toEqual(studentCourseC.course.courseId);"},{"lineNumber":767,"author":{"gitId":"Derek-Hardy"},"content":"  });"},{"lineNumber":768,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":769,"author":{"gitId":"Derek-Hardy"},"content":"  it(\u0027should sort courses by their names\u0027, () \u003d\u003e {"},{"lineNumber":770,"author":{"gitId":"Derek-Hardy"},"content":"    component.courses \u003d [studentCourseA, studentCourseB, studentCourseC];"},{"lineNumber":771,"author":{"gitId":"Derek-Hardy"},"content":"    component.isCoursesLoading \u003d false;"},{"lineNumber":772,"author":{"gitId":"Derek-Hardy"},"content":"    fixture.detectChanges();"},{"lineNumber":773,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":774,"author":{"gitId":"Derek-Hardy"},"content":"    const button: any \u003d fixture.debugElement.nativeElement.querySelector(\u0027#sort-course-name-btn\u0027);"},{"lineNumber":775,"author":{"gitId":"Derek-Hardy"},"content":"    button.click();"},{"lineNumber":776,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":777,"author":{"gitId":"Derek-Hardy"},"content":"    expect(component.courses[0].course.courseId).toEqual(studentCourseC.course.courseId);"},{"lineNumber":778,"author":{"gitId":"Derek-Hardy"},"content":"    expect(component.courses[1].course.courseId).toEqual(studentCourseA.course.courseId);"},{"lineNumber":779,"author":{"gitId":"Derek-Hardy"},"content":"    expect(component.courses[2].course.courseId).toEqual(studentCourseB.course.courseId);"},{"lineNumber":780,"author":{"gitId":"Derek-Hardy"},"content":"  });"},{"lineNumber":781,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":782,"author":{"gitId":"Derek-Hardy"},"content":"  it(\u0027should snap with default fields\u0027, () \u003d\u003e {"},{"lineNumber":783,"author":{"gitId":"Derek-Hardy"},"content":"    expect(fixture).toMatchSnapshot();"},{"lineNumber":784,"author":{"gitId":"Derek-Hardy"},"content":"  });"},{"lineNumber":785,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":786,"author":{"gitId":"Derek-Hardy"},"content":"  it(\u0027should snap with no course\u0027, () \u003d\u003e {"},{"lineNumber":787,"author":{"gitId":"Derek-Hardy"},"content":"    component.courses \u003d [];"},{"lineNumber":788,"author":{"gitId":"Derek-Hardy"},"content":"    component.isCoursesLoading \u003d false;"},{"lineNumber":789,"author":{"gitId":"Derek-Hardy"},"content":"    fixture.detectChanges();"},{"lineNumber":790,"author":{"gitId":"Derek-Hardy"},"content":"    expect(fixture).toMatchSnapshot();"},{"lineNumber":791,"author":{"gitId":"Derek-Hardy"},"content":"  });"},{"lineNumber":792,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":793,"author":{"gitId":"Derek-Hardy"},"content":"  it(\u0027should snap with no feedback sessions\u0027, () \u003d\u003e {"},{"lineNumber":794,"author":{"gitId":"Derek-Hardy"},"content":"    const studentCourse: any \u003d {"},{"lineNumber":795,"author":{"gitId":"Derek-Hardy"},"content":"      course: {"},{"lineNumber":796,"author":{"gitId":"Derek-Hardy"},"content":"        courseId: \u0027CS3281\u0027,"},{"lineNumber":797,"author":{"gitId":"Derek-Hardy"},"content":"        courseName: \u0027Thematic Systems\u0027,"},{"lineNumber":798,"author":{"gitId":"Derek-Hardy"},"content":"        timeZone: \u0027Asia/Singapore\u0027,"},{"lineNumber":799,"author":{"gitId":"Derek-Hardy"},"content":"        creationTimestamp: 1549095330000, // Saturday, 2 February 2019 16:15:30 GMT+08:00"},{"lineNumber":800,"author":{"gitId":"Derek-Hardy"},"content":"        deletionTimestamp: 0,"},{"lineNumber":801,"author":{"gitId":"Derek-Hardy"},"content":"      },"},{"lineNumber":802,"author":{"gitId":"Derek-Hardy"},"content":"      feedbackSessions: [],"},{"lineNumber":803,"author":{"gitId":"Derek-Hardy"},"content":"    };"},{"lineNumber":804,"author":{"gitId":"Derek-Hardy"},"content":"    component.courses \u003d [studentCourse];"},{"lineNumber":805,"author":{"gitId":"Derek-Hardy"},"content":"    component.isCoursesLoading \u003d false;"},{"lineNumber":806,"author":{"gitId":"Derek-Hardy"},"content":"    fixture.detectChanges();"},{"lineNumber":807,"author":{"gitId":"Derek-Hardy"},"content":"    expect(fixture).toMatchSnapshot();"},{"lineNumber":808,"author":{"gitId":"Derek-Hardy"},"content":"  });"},{"lineNumber":809,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":810,"author":{"gitId":"Derek-Hardy"},"content":"  it(\u0027should snap with no feedback session over 2 courses\u0027, () \u003d\u003e {"},{"lineNumber":811,"author":{"gitId":"Derek-Hardy"},"content":"    const studentCourse1: any \u003d {"},{"lineNumber":812,"author":{"gitId":"Derek-Hardy"},"content":"      course: {"},{"lineNumber":813,"author":{"gitId":"Derek-Hardy"},"content":"        courseId: \u0027CS3281\u0027,"},{"lineNumber":814,"author":{"gitId":"Derek-Hardy"},"content":"        courseName: \u0027Thematic Systems I\u0027,"},{"lineNumber":815,"author":{"gitId":"Derek-Hardy"},"content":"        timeZone: \u0027Asia/Singapore\u0027,"},{"lineNumber":816,"author":{"gitId":"Derek-Hardy"},"content":"        creationTimestamp: 1549095330000, // Saturday, 2 February 2019 16:15:30 GMT+08:00"},{"lineNumber":817,"author":{"gitId":"Derek-Hardy"},"content":"        deletionTimestamp: 0,"},{"lineNumber":818,"author":{"gitId":"Derek-Hardy"},"content":"      },"},{"lineNumber":819,"author":{"gitId":"Derek-Hardy"},"content":"      feedbackSessions: [],"},{"lineNumber":820,"author":{"gitId":"Derek-Hardy"},"content":"    };"},{"lineNumber":821,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":822,"author":{"gitId":"Derek-Hardy"},"content":"    const studentCourse2: any \u003d {"},{"lineNumber":823,"author":{"gitId":"Derek-Hardy"},"content":"      course: {"},{"lineNumber":824,"author":{"gitId":"Derek-Hardy"},"content":"        courseId: \u0027CS3282\u0027,"},{"lineNumber":825,"author":{"gitId":"Derek-Hardy"},"content":"        courseName: \u0027Thematic Systems II\u0027,"},{"lineNumber":826,"author":{"gitId":"Derek-Hardy"},"content":"        timeZone: \u0027Asia/Singapore\u0027,"},{"lineNumber":827,"author":{"gitId":"Derek-Hardy"},"content":"        creationTimestamp: 1549095330000, // Saturday, 2 February 2019 16:15:30 GMT+08:00"},{"lineNumber":828,"author":{"gitId":"Derek-Hardy"},"content":"        deletionTimestamp: 0,"},{"lineNumber":829,"author":{"gitId":"Derek-Hardy"},"content":"      },"},{"lineNumber":830,"author":{"gitId":"Derek-Hardy"},"content":"      feedbackSessions: [],"},{"lineNumber":831,"author":{"gitId":"Derek-Hardy"},"content":"    };"},{"lineNumber":832,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":833,"author":{"gitId":"Derek-Hardy"},"content":"    component.courses \u003d [studentCourse1, studentCourse2];"},{"lineNumber":834,"author":{"gitId":"Derek-Hardy"},"content":"    component.isCoursesLoading \u003d false;"},{"lineNumber":835,"author":{"gitId":"Derek-Hardy"},"content":"    fixture.detectChanges();"},{"lineNumber":836,"author":{"gitId":"Derek-Hardy"},"content":"    expect(fixture).toMatchSnapshot();"},{"lineNumber":837,"author":{"gitId":"Derek-Hardy"},"content":"  });"},{"lineNumber":838,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":839,"author":{"gitId":"Derek-Hardy"},"content":"  it(\u0027should snap with feedback sessions\u0027, () \u003d\u003e {"},{"lineNumber":840,"author":{"gitId":"Derek-Hardy"},"content":"    const studentCourse: any \u003d {"},{"lineNumber":841,"author":{"gitId":"Derek-Hardy"},"content":"      course: {"},{"lineNumber":842,"author":{"gitId":"Derek-Hardy"},"content":"        courseId: \u0027CS2103\u0027,"},{"lineNumber":843,"author":{"gitId":"Derek-Hardy"},"content":"        courseName: \u0027Software Engineering\u0027,"},{"lineNumber":844,"author":{"gitId":"Derek-Hardy"},"content":"        timeZone: \u0027Asia/Singapore\u0027,"},{"lineNumber":845,"author":{"gitId":"Derek-Hardy"},"content":"        creationTimestamp: 1549095330000, // Saturday, 2 February 2019 16:15:30 GMT+08:00"},{"lineNumber":846,"author":{"gitId":"Derek-Hardy"},"content":"        deletionTimestamp: 0,"},{"lineNumber":847,"author":{"gitId":"Derek-Hardy"},"content":"      },"},{"lineNumber":848,"author":{"gitId":"Derek-Hardy"},"content":"      feedbackSessions: ["},{"lineNumber":849,"author":{"gitId":"Derek-Hardy"},"content":"        {"},{"lineNumber":850,"author":{"gitId":"Derek-Hardy"},"content":"          session: {"},{"lineNumber":851,"author":{"gitId":"Derek-Hardy"},"content":"            feedbackSessionName: \u0027First Session\u0027,"},{"lineNumber":852,"author":{"gitId":"Derek-Hardy"},"content":"            courseId: \u0027CS2103\u0027,"},{"lineNumber":853,"author":{"gitId":"Derek-Hardy"},"content":"            timeZone: \u0027Asia/Singapore\u0027,"},{"lineNumber":854,"author":{"gitId":"Derek-Hardy"},"content":"            instructions: \u0027\u0027,"},{"lineNumber":855,"author":{"gitId":"Derek-Hardy"},"content":"            submissionStartTimestamp: 0,"},{"lineNumber":856,"author":{"gitId":"Derek-Hardy"},"content":"            submissionEndTimestamp: 1549095330000, // Saturday, 2 February 2019 16:15:30 GMT+08:00"},{"lineNumber":857,"author":{"gitId":"Derek-Hardy"},"content":"            gracePeriod: 0,"},{"lineNumber":858,"author":{"gitId":"Derek-Hardy"},"content":"            sessionVisibleSetting: SessionVisibleSetting.AT_OPEN,"},{"lineNumber":859,"author":{"gitId":"Derek-Hardy"},"content":"            responseVisibleSetting: ResponseVisibleSetting.AT_VISIBLE,"},{"lineNumber":860,"author":{"gitId":"Derek-Hardy"},"content":"            submissionStatus: FeedbackSessionSubmissionStatus.OPEN,"},{"lineNumber":861,"author":{"gitId":"Derek-Hardy"},"content":"            publishStatus: FeedbackSessionPublishStatus.PUBLISHED,"},{"lineNumber":862,"author":{"gitId":"Derek-Hardy"},"content":"            isClosingEmailEnabled: true,"},{"lineNumber":863,"author":{"gitId":"Derek-Hardy"},"content":"            isPublishedEmailEnabled: true,"},{"lineNumber":864,"author":{"gitId":"Derek-Hardy"},"content":"            createdAtTimestamp: 0,"},{"lineNumber":865,"author":{"gitId":"Derek-Hardy"},"content":"          },"},{"lineNumber":866,"author":{"gitId":"Derek-Hardy"},"content":"          isOpened: true,"},{"lineNumber":867,"author":{"gitId":"Derek-Hardy"},"content":"          isWaitingToOpen: true,"},{"lineNumber":868,"author":{"gitId":"Derek-Hardy"},"content":"          isPublished: true,"},{"lineNumber":869,"author":{"gitId":"Derek-Hardy"},"content":"          isSubmitted: true,"},{"lineNumber":870,"author":{"gitId":"Derek-Hardy"},"content":"        },"},{"lineNumber":871,"author":{"gitId":"Derek-Hardy"},"content":"        {"},{"lineNumber":872,"author":{"gitId":"Derek-Hardy"},"content":"          session: {"},{"lineNumber":873,"author":{"gitId":"Derek-Hardy"},"content":"            feedbackSessionName: \u0027Second Session\u0027,"},{"lineNumber":874,"author":{"gitId":"Derek-Hardy"},"content":"            courseId: \u0027CS2103\u0027,"},{"lineNumber":875,"author":{"gitId":"Derek-Hardy"},"content":"            timeZone: \u0027Asia/Singapore\u0027,"},{"lineNumber":876,"author":{"gitId":"Derek-Hardy"},"content":"            instructions: \u0027\u0027,"},{"lineNumber":877,"author":{"gitId":"Derek-Hardy"},"content":"            submissionStartTimestamp: 0,"},{"lineNumber":878,"author":{"gitId":"Derek-Hardy"},"content":"            submissionEndTimestamp: 1549095330000, // Saturday, 2 February 2019 16:15:30 GMT+08:00"},{"lineNumber":879,"author":{"gitId":"Derek-Hardy"},"content":"            gracePeriod: 0,"},{"lineNumber":880,"author":{"gitId":"Derek-Hardy"},"content":"            sessionVisibleSetting: SessionVisibleSetting.AT_OPEN,"},{"lineNumber":881,"author":{"gitId":"Derek-Hardy"},"content":"            responseVisibleSetting: ResponseVisibleSetting.AT_VISIBLE,"},{"lineNumber":882,"author":{"gitId":"Derek-Hardy"},"content":"            submissionStatus: FeedbackSessionSubmissionStatus.OPEN,"},{"lineNumber":883,"author":{"gitId":"Derek-Hardy"},"content":"            publishStatus: FeedbackSessionPublishStatus.PUBLISHED,"},{"lineNumber":884,"author":{"gitId":"Derek-Hardy"},"content":"            isClosingEmailEnabled: true,"},{"lineNumber":885,"author":{"gitId":"Derek-Hardy"},"content":"            isPublishedEmailEnabled: true,"},{"lineNumber":886,"author":{"gitId":"Derek-Hardy"},"content":"            createdAtTimestamp: 0,"},{"lineNumber":887,"author":{"gitId":"Derek-Hardy"},"content":"          },"},{"lineNumber":888,"author":{"gitId":"Derek-Hardy"},"content":"          isOpened: true,"},{"lineNumber":889,"author":{"gitId":"Derek-Hardy"},"content":"          isWaitingToOpen: false,"},{"lineNumber":890,"author":{"gitId":"Derek-Hardy"},"content":"          isPublished: false,"},{"lineNumber":891,"author":{"gitId":"Derek-Hardy"},"content":"          isSubmitted: false,"},{"lineNumber":892,"author":{"gitId":"Derek-Hardy"},"content":"        },"},{"lineNumber":893,"author":{"gitId":"Derek-Hardy"},"content":"      ],"},{"lineNumber":894,"author":{"gitId":"Derek-Hardy"},"content":"    };"},{"lineNumber":895,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":896,"author":{"gitId":"Derek-Hardy"},"content":"    component.courses \u003d [studentCourse];"},{"lineNumber":897,"author":{"gitId":"Derek-Hardy"},"content":"    component.isCoursesLoading \u003d false;"},{"lineNumber":898,"author":{"gitId":"Derek-Hardy"},"content":"    fixture.detectChanges();"},{"lineNumber":899,"author":{"gitId":"Derek-Hardy"},"content":"    expect(fixture).toMatchSnapshot();"},{"lineNumber":900,"author":{"gitId":"Derek-Hardy"},"content":"  });"},{"lineNumber":901,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":902,"author":{"gitId":"Derek-Hardy"},"content":"  it(\u0027should snap with all feedback sessions over 2 courses\u0027, () \u003d\u003e {"},{"lineNumber":903,"author":{"gitId":"-"},"content":"    component.courses \u003d [studentCourseA, studentCourseB];"},{"lineNumber":904,"author":{"gitId":"-"},"content":"    component.isCoursesLoading \u003d false;"},{"lineNumber":905,"author":{"gitId":"-"},"content":"    fixture.detectChanges();"},{"lineNumber":906,"author":{"gitId":"-"},"content":"    expect(fixture).toMatchSnapshot();"},{"lineNumber":907,"author":{"gitId":"-"},"content":"  });"},{"lineNumber":908,"author":{"gitId":"-"},"content":""},{"lineNumber":909,"author":{"gitId":"-"},"content":"  it(\u0027should snap when courses are still loading\u0027, () \u003d\u003e {"},{"lineNumber":910,"author":{"gitId":"-"},"content":"    component.isCoursesLoading \u003d true;"},{"lineNumber":911,"author":{"gitId":"-"},"content":"    fixture.detectChanges();"},{"lineNumber":912,"author":{"gitId":"-"},"content":"    expect(fixture).toMatchSnapshot();"},{"lineNumber":913,"author":{"gitId":"-"},"content":"  });"},{"lineNumber":914,"author":{"gitId":"Derek-Hardy"},"content":""},{"lineNumber":915,"author":{"gitId":"Derek-Hardy"},"content":"  it(\u0027should snap when there is course loading failed\u0027, () \u003d\u003e {"},{"lineNumber":916,"author":{"gitId":"Derek-Hardy"},"content":"    component.isCoursesLoading \u003d false;"},{"lineNumber":917,"author":{"gitId":"Derek-Hardy"},"content":"    component.hasCoursesLoadingFailed \u003d true;"},{"lineNumber":918,"author":{"gitId":"Derek-Hardy"},"content":"    fixture.detectChanges();"},{"lineNumber":919,"author":{"gitId":"Derek-Hardy"},"content":"    expect(fixture).toMatchSnapshot();"},{"lineNumber":920,"author":{"gitId":"Derek-Hardy"},"content":"  });"},{"lineNumber":921,"author":{"gitId":"-"},"content":"});"}],"authorContributionMap":{"Derek-Hardy":645,"-":276}}]
